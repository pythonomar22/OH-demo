var RL=Object.defineProperty;var AC=r=>{throw TypeError(r)};var FL=(r,t,e)=>t in r?RL(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var $=(r,t,e)=>FL(r,typeof t!="symbol"?t+"":t,e),e1=(r,t,e)=>t.has(r)||AC("Cannot "+e);var l=(r,t,e)=>(e1(r,t,"read from private field"),e?e.call(r):t.get(r)),b=(r,t,e)=>t.has(r)?AC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),x=(r,t,e,n)=>(e1(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),T=(r,t,e)=>(e1(r,t,"access private method"),e);var Qe=(r,t,e,n)=>({set _(i){x(r,t,i,e)},get _(){return l(r,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var n1={exports:{}},rf={},i1={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC;function IL(){if(bC)return Nt;bC=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(B,W,ut){this.props=B,this.context=W,this.refs=E,this.updater=ut||w}C.prototype.isReactComponent={},C.prototype.setState=function(B,W){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,W,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=C.prototype;function M(B,W,ut){this.props=B,this.context=W,this.refs=E,this.updater=ut||w}var _=M.prototype=new k;_.constructor=M,S(_,C.prototype),_.isPureReactComponent=!0;var L=Array.isArray,D=Object.prototype.hasOwnProperty,F={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function U(B,W,ut){var Ct,xt={},Tt=null,kt=null;if(W!=null)for(Ct in W.ref!==void 0&&(kt=W.ref),W.key!==void 0&&(Tt=""+W.key),W)D.call(W,Ct)&&!j.hasOwnProperty(Ct)&&(xt[Ct]=W[Ct]);var zt=arguments.length-2;if(zt===1)xt.children=ut;else if(1<zt){for(var ee=Array(zt),Ye=0;Ye<zt;Ye++)ee[Ye]=arguments[Ye+2];xt.children=ee}if(B&&B.defaultProps)for(Ct in zt=B.defaultProps,zt)xt[Ct]===void 0&&(xt[Ct]=zt[Ct]);return{$$typeof:r,type:B,key:Tt,ref:kt,props:xt,_owner:F.current}}function G(B,W){return{$$typeof:r,type:B.type,key:W,ref:B.ref,props:B.props,_owner:B._owner}}function q(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function J(B){var W={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ut){return W[ut]})}var vt=/\/+/g;function wt(B,W){return typeof B=="object"&&B!==null&&B.key!=null?J(""+B.key):W.toString(36)}function yt(B,W,ut,Ct,xt){var Tt=typeof B;(Tt==="undefined"||Tt==="boolean")&&(B=null);var kt=!1;if(B===null)kt=!0;else switch(Tt){case"string":case"number":kt=!0;break;case"object":switch(B.$$typeof){case r:case t:kt=!0}}if(kt)return kt=B,xt=xt(kt),B=Ct===""?"."+wt(kt,0):Ct,L(xt)?(ut="",B!=null&&(ut=B.replace(vt,"$&/")+"/"),yt(xt,W,ut,"",function(Ye){return Ye})):xt!=null&&(q(xt)&&(xt=G(xt,ut+(!xt.key||kt&&kt.key===xt.key?"":(""+xt.key).replace(vt,"$&/")+"/")+B)),W.push(xt)),1;if(kt=0,Ct=Ct===""?".":Ct+":",L(B))for(var zt=0;zt<B.length;zt++){Tt=B[zt];var ee=Ct+wt(Tt,zt);kt+=yt(Tt,W,ut,ee,xt)}else if(ee=y(B),typeof ee=="function")for(B=ee.call(B),zt=0;!(Tt=B.next()).done;)Tt=Tt.value,ee=Ct+wt(Tt,zt++),kt+=yt(Tt,W,ut,ee,xt);else if(Tt==="object")throw W=String(B),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return kt}function At(B,W,ut){if(B==null)return B;var Ct=[],xt=0;return yt(B,Ct,"","",function(Tt){return W.call(ut,Tt,xt++)}),Ct}function ot(B){if(B._status===-1){var W=B._result;W=W(),W.then(function(ut){(B._status===0||B._status===-1)&&(B._status=1,B._result=ut)},function(ut){(B._status===0||B._status===-1)&&(B._status=2,B._result=ut)}),B._status===-1&&(B._status=0,B._result=W)}if(B._status===1)return B._result.default;throw B._result}var tt={current:null},X={transition:null},st={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:X,ReactCurrentOwner:F};function et(){throw Error("act(...) is not supported in production builds of React.")}return Nt.Children={map:At,forEach:function(B,W,ut){At(B,function(){W.apply(this,arguments)},ut)},count:function(B){var W=0;return At(B,function(){W++}),W},toArray:function(B){return At(B,function(W){return W})||[]},only:function(B){if(!q(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Nt.Component=C,Nt.Fragment=e,Nt.Profiler=i,Nt.PureComponent=M,Nt.StrictMode=n,Nt.Suspense=d,Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=st,Nt.act=et,Nt.cloneElement=function(B,W,ut){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ct=S({},B.props),xt=B.key,Tt=B.ref,kt=B._owner;if(W!=null){if(W.ref!==void 0&&(Tt=W.ref,kt=F.current),W.key!==void 0&&(xt=""+W.key),B.type&&B.type.defaultProps)var zt=B.type.defaultProps;for(ee in W)D.call(W,ee)&&!j.hasOwnProperty(ee)&&(Ct[ee]=W[ee]===void 0&&zt!==void 0?zt[ee]:W[ee])}var ee=arguments.length-2;if(ee===1)Ct.children=ut;else if(1<ee){zt=Array(ee);for(var Ye=0;Ye<ee;Ye++)zt[Ye]=arguments[Ye+2];Ct.children=zt}return{$$typeof:r,type:B.type,key:xt,ref:Tt,props:Ct,_owner:kt}},Nt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Nt.createElement=U,Nt.createFactory=function(B){var W=U.bind(null,B);return W.type=B,W},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(B){return{$$typeof:u,render:B}},Nt.isValidElement=q,Nt.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:ot}},Nt.memo=function(B,W){return{$$typeof:f,type:B,compare:W===void 0?null:W}},Nt.startTransition=function(B){var W=X.transition;X.transition={};try{B()}finally{X.transition=W}},Nt.unstable_act=et,Nt.useCallback=function(B,W){return tt.current.useCallback(B,W)},Nt.useContext=function(B){return tt.current.useContext(B)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(B){return tt.current.useDeferredValue(B)},Nt.useEffect=function(B,W){return tt.current.useEffect(B,W)},Nt.useId=function(){return tt.current.useId()},Nt.useImperativeHandle=function(B,W,ut){return tt.current.useImperativeHandle(B,W,ut)},Nt.useInsertionEffect=function(B,W){return tt.current.useInsertionEffect(B,W)},Nt.useLayoutEffect=function(B,W){return tt.current.useLayoutEffect(B,W)},Nt.useMemo=function(B,W){return tt.current.useMemo(B,W)},Nt.useReducer=function(B,W,ut){return tt.current.useReducer(B,W,ut)},Nt.useRef=function(B){return tt.current.useRef(B)},Nt.useState=function(B){return tt.current.useState(B)},Nt.useSyncExternalStore=function(B,W,ut){return tt.current.useSyncExternalStore(B,W,ut)},Nt.useTransition=function(){return tt.current.useTransition()},Nt.version="18.3.1",Nt}var SC;function RA(){return SC||(SC=1,i1.exports=IL()),i1.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC;function NL(){if(EC)return rf;EC=1;var r=RA(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,f){var p,g={},y=null,w=null;f!==void 0&&(y=""+f),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(w=d.ref);for(p in d)n.call(d,p)&&!a.hasOwnProperty(p)&&(g[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:t,type:u,key:y,ref:w,props:g,_owner:i.current}}return rf.Fragment=e,rf.jsx=c,rf.jsxs=c,rf}var CC;function OL(){return CC||(CC=1,n1.exports=NL()),n1.exports}var I=OL(),oy={},s1={exports:{}},ii={},r1={exports:{}},o1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function BL(){return TC||(TC=1,(function(r){function t(X,st){var et=X.length;X.push(st);t:for(;0<et;){var B=et-1>>>1,W=X[B];if(0<i(W,st))X[B]=st,X[et]=W,et=B;else break t}}function e(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var st=X[0],et=X.pop();if(et!==st){X[0]=et;t:for(var B=0,W=X.length,ut=W>>>1;B<ut;){var Ct=2*(B+1)-1,xt=X[Ct],Tt=Ct+1,kt=X[Tt];if(0>i(xt,et))Tt<W&&0>i(kt,xt)?(X[B]=kt,X[Tt]=et,B=Tt):(X[B]=xt,X[Ct]=et,B=Ct);else if(Tt<W&&0>i(kt,et))X[B]=kt,X[Tt]=et,B=Tt;else break t}}return st}function i(X,st){var et=X.sortIndex-st.sortIndex;return et!==0?et:X.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var d=[],f=[],p=1,g=null,y=3,w=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(X){for(var st=e(f);st!==null;){if(st.callback===null)n(f);else if(st.startTime<=X)n(f),st.sortIndex=st.expirationTime,t(d,st);else break;st=e(f)}}function L(X){if(E=!1,_(X),!S)if(e(d)!==null)S=!0,ot(D);else{var st=e(f);st!==null&&tt(L,st.startTime-X)}}function D(X,st){S=!1,E&&(E=!1,k(U),U=-1),w=!0;var et=y;try{for(_(st),g=e(d);g!==null&&(!(g.expirationTime>st)||X&&!J());){var B=g.callback;if(typeof B=="function"){g.callback=null,y=g.priorityLevel;var W=B(g.expirationTime<=st);st=r.unstable_now(),typeof W=="function"?g.callback=W:g===e(d)&&n(d),_(st)}else n(d);g=e(d)}if(g!==null)var ut=!0;else{var Ct=e(f);Ct!==null&&tt(L,Ct.startTime-st),ut=!1}return ut}finally{g=null,y=et,w=!1}}var F=!1,j=null,U=-1,G=5,q=-1;function J(){return!(r.unstable_now()-q<G)}function vt(){if(j!==null){var X=r.unstable_now();q=X;var st=!0;try{st=j(!0,X)}finally{st?wt():(F=!1,j=null)}}else F=!1}var wt;if(typeof M=="function")wt=function(){M(vt)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,At=yt.port2;yt.port1.onmessage=vt,wt=function(){At.postMessage(null)}}else wt=function(){C(vt,0)};function ot(X){j=X,F||(F=!0,wt())}function tt(X,st){U=C(function(){X(r.unstable_now())},st)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){S||w||(S=!0,ot(D))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return e(d)},r.unstable_next=function(X){switch(y){case 1:case 2:case 3:var st=3;break;default:st=y}var et=y;y=st;try{return X()}finally{y=et}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,st){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var et=y;y=X;try{return st()}finally{y=et}},r.unstable_scheduleCallback=function(X,st,et){var B=r.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?B+et:B):et=B,X){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=et+W,X={id:p++,callback:st,priorityLevel:X,startTime:et,expirationTime:W,sortIndex:-1},et>B?(X.sortIndex=et,t(f,X),e(d)===null&&X===e(f)&&(E?(k(U),U=-1):E=!0,tt(L,et-B))):(X.sortIndex=W,t(d,X),S||w||(S=!0,ot(D))),X},r.unstable_shouldYield=J,r.unstable_wrapCallback=function(X){var st=y;return function(){var et=y;y=st;try{return X.apply(this,arguments)}finally{y=et}}}})(o1)),o1}var kC;function jL(){return kC||(kC=1,r1.exports=BL()),r1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC;function VL(){if(PC)return ii;PC=1;var r=RA(),t=jL();function e(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(s,o){c(s,o),c(s+"Capture",o)}function c(s,o){for(i[s]=o,s=0;s<o.length;s++)n.add(o[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(s){return d.call(g,s)?!0:d.call(p,s)?!1:f.test(s)?g[s]=!0:(p[s]=!0,!1)}function w(s,o,h,m){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,o,h,m){if(o===null||typeof o>"u"||w(s,o,h,m))return!0;if(m)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(s,o,h,m,v,A,P){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=s,this.type=o,this.sanitizeURL=A,this.removeEmptyString=P}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){C[s]=new E(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];C[o]=new E(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){C[s]=new E(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){C[s]=new E(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){C[s]=new E(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){C[s]=new E(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){C[s]=new E(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){C[s]=new E(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){C[s]=new E(s,5,!1,s.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(k,M);C[o]=new E(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(k,M);C[o]=new E(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(k,M);C[o]=new E(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){C[s]=new E(s,1,!1,s.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){C[s]=new E(s,1,!1,s.toLowerCase(),null,!0,!0)});function _(s,o,h,m){var v=C.hasOwnProperty(o)?C[o]:null;(v!==null?v.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,h,v,m)&&(h=null),m||v===null?y(o)&&(h===null?s.removeAttribute(o):s.setAttribute(o,""+h)):v.mustUseProperty?s[v.propertyName]=h===null?v.type===3?!1:"":h:(o=v.attributeName,m=v.attributeNamespace,h===null?s.removeAttribute(o):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,m?s.setAttributeNS(m,o,h):s.setAttribute(o,h))))}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),F=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),J=Symbol.for("react.context"),vt=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),yt=Symbol.for("react.suspense_list"),At=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),tt=Symbol.for("react.offscreen"),X=Symbol.iterator;function st(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var et=Object.assign,B;function W(s){if(B===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+s}var ut=!1;function Ct(s,o){if(!s||ut)return"";ut=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(H){var m=H}Reflect.construct(s,[],o)}else{try{o.call()}catch(H){m=H}s.call(o.prototype)}else{try{throw Error()}catch(H){m=H}s()}}catch(H){if(H&&m&&typeof H.stack=="string"){for(var v=H.stack.split(`
`),A=m.stack.split(`
`),P=v.length-1,R=A.length-1;1<=P&&0<=R&&v[P]!==A[R];)R--;for(;1<=P&&0<=R;P--,R--)if(v[P]!==A[R]){if(P!==1||R!==1)do if(P--,R--,0>R||v[P]!==A[R]){var N=`
`+v[P].replace(" at new "," at ");return s.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",s.displayName)),N}while(1<=P&&0<=R);break}}}finally{ut=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?W(s):""}function xt(s){switch(s.tag){case 5:return W(s.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return s=Ct(s.type,!1),s;case 11:return s=Ct(s.type.render,!1),s;case 1:return s=Ct(s.type,!0),s;default:return""}}function Tt(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case F:return"Portal";case G:return"Profiler";case U:return"StrictMode";case wt:return"Suspense";case yt:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case J:return(s.displayName||"Context")+".Consumer";case q:return(s._context.displayName||"Context")+".Provider";case vt:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case At:return o=s.displayName||null,o!==null?o:Tt(s.type)||"Memo";case ot:o=s._payload,s=s._init;try{return Tt(s(o))}catch{}}return null}function kt(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tt(o);case 8:return o===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function zt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ee(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ye(s){var o=ee(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,A=h.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(P){m=""+P,A.call(this,P)}}),Object.defineProperty(s,o,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function $i(s){s._valueTracker||(s._valueTracker=Ye(s))}function Wc(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return s&&(m=ee(s)?s.checked?"true":"false":s.value),s=m,s!==h?(o.setValue(s),!0):!1}function el(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function vd(s,o){var h=o.checked;return et({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function Pb(s,o){var h=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;h=zt(o.value!=null?o.value:h),s._wrapperState={initialChecked:m,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function _b(s,o){o=o.checked,o!=null&&_(s,"checked",o,!1)}function cv(s,o){_b(s,o);var h=zt(o.value),m=o.type;if(h!=null)m==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?uv(s,o.type,h):o.hasOwnProperty("defaultValue")&&uv(s,o.type,zt(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Mb(s,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,h||o===s.value||(s.value=o),s.defaultValue=o}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function uv(s,o,h){(o!=="number"||el(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var wd=Array.isArray;function Gc(s,o,h,m){if(s=s.options,o){o={};for(var v=0;v<h.length;v++)o["$"+h[v]]=!0;for(h=0;h<s.length;h++)v=o.hasOwnProperty("$"+s[h].value),s[h].selected!==v&&(s[h].selected=v),v&&m&&(s[h].defaultSelected=!0)}else{for(h=""+zt(h),o=null,v=0;v<s.length;v++){if(s[v].value===h){s[v].selected=!0,m&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function hv(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(e(91));return et({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Db(s,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(e(92));if(wd(h)){if(1<h.length)throw Error(e(93));h=h[0]}o=h}o==null&&(o=""),h=o}s._wrapperState={initialValue:zt(h)}}function Lb(s,o){var h=zt(o.value),m=zt(o.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),o.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),m!=null&&(s.defaultValue=""+m)}function Rb(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function Fb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dv(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?Fb(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Zm,Ib=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,m,v){MSApp.execUnsafeLocalFunction(function(){return s(o,h,m,v)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Zm=Zm||document.createElement("div"),Zm.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Zm.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function xd(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var Ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OM=["Webkit","ms","Moz","O"];Object.keys(Ad).forEach(function(s){OM.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Ad[o]=Ad[s]})});function Nb(s,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||Ad.hasOwnProperty(s)&&Ad[s]?(""+o).trim():o+"px"}function Ob(s,o){s=s.style;for(var h in o)if(o.hasOwnProperty(h)){var m=h.indexOf("--")===0,v=Nb(h,o[h],m);h==="float"&&(h="cssFloat"),m?s.setProperty(h,v):s[h]=v}}var BM=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fv(s,o){if(o){if(BM[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(e(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(e(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(e(61))}if(o.style!=null&&typeof o.style!="object")throw Error(e(62))}}function pv(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mv=null;function gv(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yv=null,Xc=null,Yc=null;function Bb(s){if(s=Hd(s)){if(typeof yv!="function")throw Error(e(280));var o=s.stateNode;o&&(o=Ag(o),yv(s.stateNode,s.type,o))}}function jb(s){Xc?Yc?Yc.push(s):Yc=[s]:Xc=s}function Vb(){if(Xc){var s=Xc,o=Yc;if(Yc=Xc=null,Bb(s),o)for(s=0;s<o.length;s++)Bb(o[s])}}function zb(s,o){return s(o)}function Ub(){}var vv=!1;function Hb(s,o,h){if(vv)return s(o,h);vv=!0;try{return zb(s,o,h)}finally{vv=!1,(Xc!==null||Yc!==null)&&(Ub(),Vb())}}function bd(s,o){var h=s.stateNode;if(h===null)return null;var m=Ag(h);if(m===null)return null;h=m[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(e(231,o,typeof h));return h}var wv=!1;if(u)try{var Sd={};Object.defineProperty(Sd,"passive",{get:function(){wv=!0}}),window.addEventListener("test",Sd,Sd),window.removeEventListener("test",Sd,Sd)}catch{wv=!1}function jM(s,o,h,m,v,A,P,R,N){var H=Array.prototype.slice.call(arguments,3);try{o.apply(h,H)}catch(K){this.onError(K)}}var Ed=!1,Jm=null,tg=!1,xv=null,VM={onError:function(s){Ed=!0,Jm=s}};function zM(s,o,h,m,v,A,P,R,N){Ed=!1,Jm=null,jM.apply(VM,arguments)}function UM(s,o,h,m,v,A,P,R,N){if(zM.apply(this,arguments),Ed){if(Ed){var H=Jm;Ed=!1,Jm=null}else throw Error(e(198));tg||(tg=!0,xv=H)}}function nl(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function $b(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Wb(s){if(nl(s)!==s)throw Error(e(188))}function HM(s){var o=s.alternate;if(!o){if(o=nl(s),o===null)throw Error(e(188));return o!==s?null:s}for(var h=s,m=o;;){var v=h.return;if(v===null)break;var A=v.alternate;if(A===null){if(m=v.return,m!==null){h=m;continue}break}if(v.child===A.child){for(A=v.child;A;){if(A===h)return Wb(v),s;if(A===m)return Wb(v),o;A=A.sibling}throw Error(e(188))}if(h.return!==m.return)h=v,m=A;else{for(var P=!1,R=v.child;R;){if(R===h){P=!0,h=v,m=A;break}if(R===m){P=!0,m=v,h=A;break}R=R.sibling}if(!P){for(R=A.child;R;){if(R===h){P=!0,h=A,m=v;break}if(R===m){P=!0,m=A,h=v;break}R=R.sibling}if(!P)throw Error(e(189))}}if(h.alternate!==m)throw Error(e(190))}if(h.tag!==3)throw Error(e(188));return h.stateNode.current===h?s:o}function Gb(s){return s=HM(s),s!==null?Xb(s):null}function Xb(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Xb(s);if(o!==null)return o;s=s.sibling}return null}var Yb=t.unstable_scheduleCallback,Kb=t.unstable_cancelCallback,$M=t.unstable_shouldYield,WM=t.unstable_requestPaint,Oe=t.unstable_now,GM=t.unstable_getCurrentPriorityLevel,Av=t.unstable_ImmediatePriority,qb=t.unstable_UserBlockingPriority,eg=t.unstable_NormalPriority,XM=t.unstable_LowPriority,Qb=t.unstable_IdlePriority,ng=null,Ws=null;function YM(s){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(ng,s,void 0,(s.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:QM,KM=Math.log,qM=Math.LN2;function QM(s){return s>>>=0,s===0?32:31-(KM(s)/qM|0)|0}var ig=64,sg=4194304;function Cd(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function rg(s,o){var h=s.pendingLanes;if(h===0)return 0;var m=0,v=s.suspendedLanes,A=s.pingedLanes,P=h&268435455;if(P!==0){var R=P&~v;R!==0?m=Cd(R):(A&=P,A!==0&&(m=Cd(A)))}else P=h&~v,P!==0?m=Cd(P):A!==0&&(m=Cd(A));if(m===0)return 0;if(o!==0&&o!==m&&(o&v)===0&&(v=m&-m,A=o&-o,v>=A||v===16&&(A&4194240)!==0))return o;if((m&4)!==0&&(m|=h&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=m;0<o;)h=31-vs(o),v=1<<h,m|=s[h],o&=~v;return m}function ZM(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JM(s,o){for(var h=s.suspendedLanes,m=s.pingedLanes,v=s.expirationTimes,A=s.pendingLanes;0<A;){var P=31-vs(A),R=1<<P,N=v[P];N===-1?((R&h)===0||(R&m)!==0)&&(v[P]=ZM(R,o)):N<=o&&(s.expiredLanes|=R),A&=~R}}function bv(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Zb(){var s=ig;return ig<<=1,(ig&4194240)===0&&(ig=64),s}function Sv(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function Td(s,o,h){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-vs(o),s[o]=h}function tD(s,o){var h=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<h;){var v=31-vs(h),A=1<<v;o[v]=0,m[v]=-1,s[v]=-1,h&=~A}}function Ev(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var m=31-vs(h),v=1<<m;v&o|s[m]&o&&(s[m]|=o),h&=~v}}var qt=0;function Jb(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var tS,Cv,eS,nS,iS,Tv=!1,og=[],Lo=null,Ro=null,Fo=null,kd=new Map,Pd=new Map,Io=[],eD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sS(s,o){switch(s){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":Ro=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":kd.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pd.delete(o.pointerId)}}function _d(s,o,h,m,v,A){return s===null||s.nativeEvent!==A?(s={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:A,targetContainers:[v]},o!==null&&(o=Hd(o),o!==null&&Cv(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function nD(s,o,h,m,v){switch(o){case"focusin":return Lo=_d(Lo,s,o,h,m,v),!0;case"dragenter":return Ro=_d(Ro,s,o,h,m,v),!0;case"mouseover":return Fo=_d(Fo,s,o,h,m,v),!0;case"pointerover":var A=v.pointerId;return kd.set(A,_d(kd.get(A)||null,s,o,h,m,v)),!0;case"gotpointercapture":return A=v.pointerId,Pd.set(A,_d(Pd.get(A)||null,s,o,h,m,v)),!0}return!1}function rS(s){var o=il(s.target);if(o!==null){var h=nl(o);if(h!==null){if(o=h.tag,o===13){if(o=$b(h),o!==null){s.blockedOn=o,iS(s.priority,function(){eS(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ag(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=Pv(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);mv=m,h.target.dispatchEvent(m),mv=null}else return o=Hd(h),o!==null&&Cv(o),s.blockedOn=h,!1;o.shift()}return!0}function oS(s,o,h){ag(s)&&h.delete(o)}function iD(){Tv=!1,Lo!==null&&ag(Lo)&&(Lo=null),Ro!==null&&ag(Ro)&&(Ro=null),Fo!==null&&ag(Fo)&&(Fo=null),kd.forEach(oS),Pd.forEach(oS)}function Md(s,o){s.blockedOn===o&&(s.blockedOn=null,Tv||(Tv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iD)))}function Dd(s){function o(v){return Md(v,s)}if(0<og.length){Md(og[0],s);for(var h=1;h<og.length;h++){var m=og[h];m.blockedOn===s&&(m.blockedOn=null)}}for(Lo!==null&&Md(Lo,s),Ro!==null&&Md(Ro,s),Fo!==null&&Md(Fo,s),kd.forEach(o),Pd.forEach(o),h=0;h<Io.length;h++)m=Io[h],m.blockedOn===s&&(m.blockedOn=null);for(;0<Io.length&&(h=Io[0],h.blockedOn===null);)rS(h),h.blockedOn===null&&Io.shift()}var Kc=L.ReactCurrentBatchConfig,lg=!0;function sD(s,o,h,m){var v=qt,A=Kc.transition;Kc.transition=null;try{qt=1,kv(s,o,h,m)}finally{qt=v,Kc.transition=A}}function rD(s,o,h,m){var v=qt,A=Kc.transition;Kc.transition=null;try{qt=4,kv(s,o,h,m)}finally{qt=v,Kc.transition=A}}function kv(s,o,h,m){if(lg){var v=Pv(s,o,h,m);if(v===null)Wv(s,o,m,cg,h),sS(s,m);else if(nD(v,s,o,h,m))m.stopPropagation();else if(sS(s,m),o&4&&-1<eD.indexOf(s)){for(;v!==null;){var A=Hd(v);if(A!==null&&tS(A),A=Pv(s,o,h,m),A===null&&Wv(s,o,m,cg,h),A===v)break;v=A}v!==null&&m.stopPropagation()}else Wv(s,o,m,null,h)}}var cg=null;function Pv(s,o,h,m){if(cg=null,s=gv(m),s=il(s),s!==null)if(o=nl(s),o===null)s=null;else if(h=o.tag,h===13){if(s=$b(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return cg=s,null}function aS(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GM()){case Av:return 1;case qb:return 4;case eg:case XM:return 16;case Qb:return 536870912;default:return 16}default:return 16}}var No=null,_v=null,ug=null;function lS(){if(ug)return ug;var s,o=_v,h=o.length,m,v="value"in No?No.value:No.textContent,A=v.length;for(s=0;s<h&&o[s]===v[s];s++);var P=h-s;for(m=1;m<=P&&o[h-m]===v[A-m];m++);return ug=v.slice(s,1<m?1-m:void 0)}function hg(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function dg(){return!0}function cS(){return!1}function mi(s){function o(h,m,v,A,P){this._reactName=h,this._targetInst=v,this.type=m,this.nativeEvent=A,this.target=P,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(h=s[R],this[R]=h?h(A):A[R]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?dg:cS,this.isPropagationStopped=cS,this}return et(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=dg)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=dg)},persist:function(){},isPersistent:dg}),o}var qc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mv=mi(qc),Ld=et({},qc,{view:0,detail:0}),oD=mi(Ld),Dv,Lv,Rd,fg=et({},Ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fv,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Rd&&(Rd&&s.type==="mousemove"?(Dv=s.screenX-Rd.screenX,Lv=s.screenY-Rd.screenY):Lv=Dv=0,Rd=s),Dv)},movementY:function(s){return"movementY"in s?s.movementY:Lv}}),uS=mi(fg),aD=et({},fg,{dataTransfer:0}),lD=mi(aD),cD=et({},Ld,{relatedTarget:0}),Rv=mi(cD),uD=et({},qc,{animationName:0,elapsedTime:0,pseudoElement:0}),hD=mi(uD),dD=et({},qc,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fD=mi(dD),pD=et({},qc,{data:0}),hS=mi(pD),mD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vD(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=yD[s])?!!o[s]:!1}function Fv(){return vD}var wD=et({},Ld,{key:function(s){if(s.key){var o=mD[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=hg(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?gD[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fv,charCode:function(s){return s.type==="keypress"?hg(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?hg(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),xD=mi(wD),AD=et({},fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dS=mi(AD),bD=et({},Ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fv}),SD=mi(bD),ED=et({},qc,{propertyName:0,elapsedTime:0,pseudoElement:0}),CD=mi(ED),TD=et({},fg,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kD=mi(TD),PD=[9,13,27,32],Iv=u&&"CompositionEvent"in window,Fd=null;u&&"documentMode"in document&&(Fd=document.documentMode);var _D=u&&"TextEvent"in window&&!Fd,fS=u&&(!Iv||Fd&&8<Fd&&11>=Fd),pS=" ",mS=!1;function gS(s,o){switch(s){case"keyup":return PD.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yS(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Qc=!1;function MD(s,o){switch(s){case"compositionend":return yS(o);case"keypress":return o.which!==32?null:(mS=!0,pS);case"textInput":return s=o.data,s===pS&&mS?null:s;default:return null}}function DD(s,o){if(Qc)return s==="compositionend"||!Iv&&gS(s,o)?(s=lS(),ug=_v=No=null,Qc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return fS&&o.locale!=="ko"?null:o.data;default:return null}}var LD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vS(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!LD[s.type]:o==="textarea"}function wS(s,o,h,m){jb(m),o=vg(o,"onChange"),0<o.length&&(h=new Mv("onChange","change",null,h,m),s.push({event:h,listeners:o}))}var Id=null,Nd=null;function RD(s){OS(s,0)}function pg(s){var o=nu(s);if(Wc(o))return s}function FD(s,o){if(s==="change")return o}var xS=!1;if(u){var Nv;if(u){var Ov="oninput"in document;if(!Ov){var AS=document.createElement("div");AS.setAttribute("oninput","return;"),Ov=typeof AS.oninput=="function"}Nv=Ov}else Nv=!1;xS=Nv&&(!document.documentMode||9<document.documentMode)}function bS(){Id&&(Id.detachEvent("onpropertychange",SS),Nd=Id=null)}function SS(s){if(s.propertyName==="value"&&pg(Nd)){var o=[];wS(o,Nd,s,gv(s)),Hb(RD,o)}}function ID(s,o,h){s==="focusin"?(bS(),Id=o,Nd=h,Id.attachEvent("onpropertychange",SS)):s==="focusout"&&bS()}function ND(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return pg(Nd)}function OD(s,o){if(s==="click")return pg(o)}function BD(s,o){if(s==="input"||s==="change")return pg(o)}function jD(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var ws=typeof Object.is=="function"?Object.is:jD;function Od(s,o){if(ws(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var v=h[m];if(!d.call(o,v)||!ws(s[v],o[v]))return!1}return!0}function ES(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function CS(s,o){var h=ES(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=o&&m>=o)return{node:h,offset:o-s};s=m}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=ES(h)}}function TS(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?TS(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function kS(){for(var s=window,o=el();o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=el(s.document)}return o}function Bv(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function VD(s){var o=kS(),h=s.focusedElem,m=s.selectionRange;if(o!==h&&h&&h.ownerDocument&&TS(h.ownerDocument.documentElement,h)){if(m!==null&&Bv(h)){if(o=m.start,s=m.end,s===void 0&&(s=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(s,h.value.length);else if(s=(o=h.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var v=h.textContent.length,A=Math.min(m.start,v);m=m.end===void 0?A:Math.min(m.end,v),!s.extend&&A>m&&(v=m,m=A,A=v),v=CS(h,A);var P=CS(h,m);v&&P&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==P.node||s.focusOffset!==P.offset)&&(o=o.createRange(),o.setStart(v.node,v.offset),s.removeAllRanges(),A>m?(s.addRange(o),s.extend(P.node,P.offset)):(o.setEnd(P.node,P.offset),s.addRange(o)))}}for(o=[],s=h;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)s=o[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var zD=u&&"documentMode"in document&&11>=document.documentMode,Zc=null,jv=null,Bd=null,Vv=!1;function PS(s,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Vv||Zc==null||Zc!==el(m)||(m=Zc,"selectionStart"in m&&Bv(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Bd&&Od(Bd,m)||(Bd=m,m=vg(jv,"onSelect"),0<m.length&&(o=new Mv("onSelect","select",null,o,h),s.push({event:o,listeners:m}),o.target=Zc)))}function mg(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var Jc={animationend:mg("Animation","AnimationEnd"),animationiteration:mg("Animation","AnimationIteration"),animationstart:mg("Animation","AnimationStart"),transitionend:mg("Transition","TransitionEnd")},zv={},_S={};u&&(_S=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function gg(s){if(zv[s])return zv[s];if(!Jc[s])return s;var o=Jc[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in _S)return zv[s]=o[h];return s}var MS=gg("animationend"),DS=gg("animationiteration"),LS=gg("animationstart"),RS=gg("transitionend"),FS=new Map,IS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(s,o){FS.set(s,o),a(o,[s])}for(var Uv=0;Uv<IS.length;Uv++){var Hv=IS[Uv],UD=Hv.toLowerCase(),HD=Hv[0].toUpperCase()+Hv.slice(1);Oo(UD,"on"+HD)}Oo(MS,"onAnimationEnd"),Oo(DS,"onAnimationIteration"),Oo(LS,"onAnimationStart"),Oo("dblclick","onDoubleClick"),Oo("focusin","onFocus"),Oo("focusout","onBlur"),Oo(RS,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$D=new Set("cancel close invalid load scroll toggle".split(" ").concat(jd));function NS(s,o,h){var m=s.type||"unknown-event";s.currentTarget=h,UM(m,o,void 0,s),s.currentTarget=null}function OS(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],v=m.event;m=m.listeners;t:{var A=void 0;if(o)for(var P=m.length-1;0<=P;P--){var R=m[P],N=R.instance,H=R.currentTarget;if(R=R.listener,N!==A&&v.isPropagationStopped())break t;NS(v,R,H),A=N}else for(P=0;P<m.length;P++){if(R=m[P],N=R.instance,H=R.currentTarget,R=R.listener,N!==A&&v.isPropagationStopped())break t;NS(v,R,H),A=N}}}if(tg)throw s=xv,tg=!1,xv=null,s}function ge(s,o){var h=o[Qv];h===void 0&&(h=o[Qv]=new Set);var m=s+"__bubble";h.has(m)||(BS(o,s,2,!1),h.add(m))}function $v(s,o,h){var m=0;o&&(m|=4),BS(h,s,m,o)}var yg="_reactListening"+Math.random().toString(36).slice(2);function Vd(s){if(!s[yg]){s[yg]=!0,n.forEach(function(h){h!=="selectionchange"&&($D.has(h)||$v(h,!1,s),$v(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[yg]||(o[yg]=!0,$v("selectionchange",!1,o))}}function BS(s,o,h,m){switch(aS(o)){case 1:var v=sD;break;case 4:v=rD;break;default:v=kv}h=v.bind(null,o,h,s),v=void 0,!wv||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),m?v!==void 0?s.addEventListener(o,h,{capture:!0,passive:v}):s.addEventListener(o,h,!0):v!==void 0?s.addEventListener(o,h,{passive:v}):s.addEventListener(o,h,!1)}function Wv(s,o,h,m,v){var A=m;if((o&1)===0&&(o&2)===0&&m!==null)t:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var R=m.stateNode.containerInfo;if(R===v||R.nodeType===8&&R.parentNode===v)break;if(P===4)for(P=m.return;P!==null;){var N=P.tag;if((N===3||N===4)&&(N=P.stateNode.containerInfo,N===v||N.nodeType===8&&N.parentNode===v))return;P=P.return}for(;R!==null;){if(P=il(R),P===null)return;if(N=P.tag,N===5||N===6){m=A=P;continue t}R=R.parentNode}}m=m.return}Hb(function(){var H=A,K=gv(h),Q=[];t:{var Y=FS.get(s);if(Y!==void 0){var at=Mv,dt=s;switch(s){case"keypress":if(hg(h)===0)break t;case"keydown":case"keyup":at=xD;break;case"focusin":dt="focus",at=Rv;break;case"focusout":dt="blur",at=Rv;break;case"beforeblur":case"afterblur":at=Rv;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=uS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=lD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=SD;break;case MS:case DS:case LS:at=hD;break;case RS:at=CD;break;case"scroll":at=oD;break;case"wheel":at=kD;break;case"copy":case"cut":case"paste":at=fD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=dS}var pt=(o&4)!==0,Be=!pt&&s==="scroll",V=pt?Y!==null?Y+"Capture":null:Y;pt=[];for(var O=H,z;O!==null;){z=O;var nt=z.stateNode;if(z.tag===5&&nt!==null&&(z=nt,V!==null&&(nt=bd(O,V),nt!=null&&pt.push(zd(O,nt,z)))),Be)break;O=O.return}0<pt.length&&(Y=new at(Y,dt,null,h,K),Q.push({event:Y,listeners:pt}))}}if((o&7)===0){t:{if(Y=s==="mouseover"||s==="pointerover",at=s==="mouseout"||s==="pointerout",Y&&h!==mv&&(dt=h.relatedTarget||h.fromElement)&&(il(dt)||dt[Pr]))break t;if((at||Y)&&(Y=K.window===K?K:(Y=K.ownerDocument)?Y.defaultView||Y.parentWindow:window,at?(dt=h.relatedTarget||h.toElement,at=H,dt=dt?il(dt):null,dt!==null&&(Be=nl(dt),dt!==Be||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(at=null,dt=H),at!==dt)){if(pt=uS,nt="onMouseLeave",V="onMouseEnter",O="mouse",(s==="pointerout"||s==="pointerover")&&(pt=dS,nt="onPointerLeave",V="onPointerEnter",O="pointer"),Be=at==null?Y:nu(at),z=dt==null?Y:nu(dt),Y=new pt(nt,O+"leave",at,h,K),Y.target=Be,Y.relatedTarget=z,nt=null,il(K)===H&&(pt=new pt(V,O+"enter",dt,h,K),pt.target=z,pt.relatedTarget=Be,nt=pt),Be=nt,at&&dt)e:{for(pt=at,V=dt,O=0,z=pt;z;z=tu(z))O++;for(z=0,nt=V;nt;nt=tu(nt))z++;for(;0<O-z;)pt=tu(pt),O--;for(;0<z-O;)V=tu(V),z--;for(;O--;){if(pt===V||V!==null&&pt===V.alternate)break e;pt=tu(pt),V=tu(V)}pt=null}else pt=null;at!==null&&jS(Q,Y,at,pt,!1),dt!==null&&Be!==null&&jS(Q,Be,dt,pt,!0)}}t:{if(Y=H?nu(H):window,at=Y.nodeName&&Y.nodeName.toLowerCase(),at==="select"||at==="input"&&Y.type==="file")var gt=FD;else if(vS(Y))if(xS)gt=BD;else{gt=ND;var bt=ID}else(at=Y.nodeName)&&at.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(gt=OD);if(gt&&(gt=gt(s,H))){wS(Q,gt,h,K);break t}bt&&bt(s,Y,H),s==="focusout"&&(bt=Y._wrapperState)&&bt.controlled&&Y.type==="number"&&uv(Y,"number",Y.value)}switch(bt=H?nu(H):window,s){case"focusin":(vS(bt)||bt.contentEditable==="true")&&(Zc=bt,jv=H,Bd=null);break;case"focusout":Bd=jv=Zc=null;break;case"mousedown":Vv=!0;break;case"contextmenu":case"mouseup":case"dragend":Vv=!1,PS(Q,h,K);break;case"selectionchange":if(zD)break;case"keydown":case"keyup":PS(Q,h,K)}var St;if(Iv)t:{switch(s){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Qc?gS(s,h)&&(Pt="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Pt="onCompositionStart");Pt&&(fS&&h.locale!=="ko"&&(Qc||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Qc&&(St=lS()):(No=K,_v="value"in No?No.value:No.textContent,Qc=!0)),bt=vg(H,Pt),0<bt.length&&(Pt=new hS(Pt,s,null,h,K),Q.push({event:Pt,listeners:bt}),St?Pt.data=St:(St=yS(h),St!==null&&(Pt.data=St)))),(St=_D?MD(s,h):DD(s,h))&&(H=vg(H,"onBeforeInput"),0<H.length&&(K=new hS("onBeforeInput","beforeinput",null,h,K),Q.push({event:K,listeners:H}),K.data=St))}OS(Q,o)})}function zd(s,o,h){return{instance:s,listener:o,currentTarget:h}}function vg(s,o){for(var h=o+"Capture",m=[];s!==null;){var v=s,A=v.stateNode;v.tag===5&&A!==null&&(v=A,A=bd(s,h),A!=null&&m.unshift(zd(s,A,v)),A=bd(s,o),A!=null&&m.push(zd(s,A,v))),s=s.return}return m}function tu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function jS(s,o,h,m,v){for(var A=o._reactName,P=[];h!==null&&h!==m;){var R=h,N=R.alternate,H=R.stateNode;if(N!==null&&N===m)break;R.tag===5&&H!==null&&(R=H,v?(N=bd(h,A),N!=null&&P.unshift(zd(h,N,R))):v||(N=bd(h,A),N!=null&&P.push(zd(h,N,R)))),h=h.return}P.length!==0&&s.push({event:o,listeners:P})}var WD=/\r\n?/g,GD=/\u0000|\uFFFD/g;function VS(s){return(typeof s=="string"?s:""+s).replace(WD,`
`).replace(GD,"")}function wg(s,o,h){if(o=VS(o),VS(s)!==o&&h)throw Error(e(425))}function xg(){}var Gv=null,Xv=null;function Yv(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kv=typeof setTimeout=="function"?setTimeout:void 0,XD=typeof clearTimeout=="function"?clearTimeout:void 0,zS=typeof Promise=="function"?Promise:void 0,YD=typeof queueMicrotask=="function"?queueMicrotask:typeof zS<"u"?function(s){return zS.resolve(null).then(s).catch(KD)}:Kv;function KD(s){setTimeout(function(){throw s})}function qv(s,o){var h=o,m=0;do{var v=h.nextSibling;if(s.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(m===0){s.removeChild(v),Dd(o);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=v}while(h);Dd(o)}function Bo(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function US(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return s;o--}else h==="/$"&&o++}s=s.previousSibling}return null}var eu=Math.random().toString(36).slice(2),Gs="__reactFiber$"+eu,Ud="__reactProps$"+eu,Pr="__reactContainer$"+eu,Qv="__reactEvents$"+eu,qD="__reactListeners$"+eu,QD="__reactHandles$"+eu;function il(s){var o=s[Gs];if(o)return o;for(var h=s.parentNode;h;){if(o=h[Pr]||h[Gs]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=US(s);s!==null;){if(h=s[Gs])return h;s=US(s)}return o}s=h,h=s.parentNode}return null}function Hd(s){return s=s[Gs]||s[Pr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function nu(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(e(33))}function Ag(s){return s[Ud]||null}var Zv=[],iu=-1;function jo(s){return{current:s}}function ye(s){0>iu||(s.current=Zv[iu],Zv[iu]=null,iu--)}function he(s,o){iu++,Zv[iu]=s.current,s.current=o}var Vo={},Pn=jo(Vo),Zn=jo(!1),sl=Vo;function su(s,o){var h=s.type.contextTypes;if(!h)return Vo;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var v={},A;for(A in h)v[A]=o[A];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=v),v}function Jn(s){return s=s.childContextTypes,s!=null}function bg(){ye(Zn),ye(Pn)}function HS(s,o,h){if(Pn.current!==Vo)throw Error(e(168));he(Pn,o),he(Zn,h)}function $S(s,o,h){var m=s.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var v in m)if(!(v in o))throw Error(e(108,kt(s)||"Unknown",v));return et({},h,m)}function Sg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vo,sl=Pn.current,he(Pn,s),he(Zn,Zn.current),!0}function WS(s,o,h){var m=s.stateNode;if(!m)throw Error(e(169));h?(s=$S(s,o,sl),m.__reactInternalMemoizedMergedChildContext=s,ye(Zn),ye(Pn),he(Pn,s)):ye(Zn),he(Zn,h)}var _r=null,Eg=!1,Jv=!1;function GS(s){_r===null?_r=[s]:_r.push(s)}function ZD(s){Eg=!0,GS(s)}function zo(){if(!Jv&&_r!==null){Jv=!0;var s=0,o=qt;try{var h=_r;for(qt=1;s<h.length;s++){var m=h[s];do m=m(!0);while(m!==null)}_r=null,Eg=!1}catch(v){throw _r!==null&&(_r=_r.slice(s+1)),Yb(Av,zo),v}finally{qt=o,Jv=!1}}return null}var ru=[],ou=0,Cg=null,Tg=0,Wi=[],Gi=0,rl=null,Mr=1,Dr="";function ol(s,o){ru[ou++]=Tg,ru[ou++]=Cg,Cg=s,Tg=o}function XS(s,o,h){Wi[Gi++]=Mr,Wi[Gi++]=Dr,Wi[Gi++]=rl,rl=s;var m=Mr;s=Dr;var v=32-vs(m)-1;m&=~(1<<v),h+=1;var A=32-vs(o)+v;if(30<A){var P=v-v%5;A=(m&(1<<P)-1).toString(32),m>>=P,v-=P,Mr=1<<32-vs(o)+v|h<<v|m,Dr=A+s}else Mr=1<<A|h<<v|m,Dr=s}function tw(s){s.return!==null&&(ol(s,1),XS(s,1,0))}function ew(s){for(;s===Cg;)Cg=ru[--ou],ru[ou]=null,Tg=ru[--ou],ru[ou]=null;for(;s===rl;)rl=Wi[--Gi],Wi[Gi]=null,Dr=Wi[--Gi],Wi[Gi]=null,Mr=Wi[--Gi],Wi[Gi]=null}var gi=null,yi=null,we=!1,xs=null;function YS(s,o){var h=qi(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=s,o=s.deletions,o===null?(s.deletions=[h],s.flags|=16):o.push(h)}function KS(s,o){switch(s.tag){case 5:var h=s.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,gi=s,yi=Bo(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,gi=s,yi=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=rl!==null?{id:Mr,overflow:Dr}:null,s.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=qi(18,null,null,0),h.stateNode=o,h.return=s,s.child=h,gi=s,yi=null,!0):!1;default:return!1}}function nw(s){return(s.mode&1)!==0&&(s.flags&128)===0}function iw(s){if(we){var o=yi;if(o){var h=o;if(!KS(s,o)){if(nw(s))throw Error(e(418));o=Bo(h.nextSibling);var m=gi;o&&KS(s,o)?YS(m,h):(s.flags=s.flags&-4097|2,we=!1,gi=s)}}else{if(nw(s))throw Error(e(418));s.flags=s.flags&-4097|2,we=!1,gi=s}}}function qS(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;gi=s}function kg(s){if(s!==gi)return!1;if(!we)return qS(s),we=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Yv(s.type,s.memoizedProps)),o&&(o=yi)){if(nw(s))throw QS(),Error(e(418));for(;o;)YS(s,o),o=Bo(o.nextSibling)}if(qS(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(e(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(o===0){yi=Bo(s.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}s=s.nextSibling}yi=null}}else yi=gi?Bo(s.stateNode.nextSibling):null;return!0}function QS(){for(var s=yi;s;)s=Bo(s.nextSibling)}function au(){yi=gi=null,we=!1}function sw(s){xs===null?xs=[s]:xs.push(s)}var JD=L.ReactCurrentBatchConfig;function $d(s,o,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(e(309));var m=h.stateNode}if(!m)throw Error(e(147,s));var v=m,A=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===A?o.ref:(o=function(P){var R=v.refs;P===null?delete R[A]:R[A]=P},o._stringRef=A,o)}if(typeof s!="string")throw Error(e(284));if(!h._owner)throw Error(e(290,s))}return s}function Pg(s,o){throw s=Object.prototype.toString.call(o),Error(e(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function ZS(s){var o=s._init;return o(s._payload)}function JS(s){function o(V,O){if(s){var z=V.deletions;z===null?(V.deletions=[O],V.flags|=16):z.push(O)}}function h(V,O){if(!s)return null;for(;O!==null;)o(V,O),O=O.sibling;return null}function m(V,O){for(V=new Map;O!==null;)O.key!==null?V.set(O.key,O):V.set(O.index,O),O=O.sibling;return V}function v(V,O){return V=Ko(V,O),V.index=0,V.sibling=null,V}function A(V,O,z){return V.index=z,s?(z=V.alternate,z!==null?(z=z.index,z<O?(V.flags|=2,O):z):(V.flags|=2,O)):(V.flags|=1048576,O)}function P(V){return s&&V.alternate===null&&(V.flags|=2),V}function R(V,O,z,nt){return O===null||O.tag!==6?(O=Kw(z,V.mode,nt),O.return=V,O):(O=v(O,z),O.return=V,O)}function N(V,O,z,nt){var gt=z.type;return gt===j?K(V,O,z.props.children,nt,z.key):O!==null&&(O.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===ot&&ZS(gt)===O.type)?(nt=v(O,z.props),nt.ref=$d(V,O,z),nt.return=V,nt):(nt=Zg(z.type,z.key,z.props,null,V.mode,nt),nt.ref=$d(V,O,z),nt.return=V,nt)}function H(V,O,z,nt){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=qw(z,V.mode,nt),O.return=V,O):(O=v(O,z.children||[]),O.return=V,O)}function K(V,O,z,nt,gt){return O===null||O.tag!==7?(O=pl(z,V.mode,nt,gt),O.return=V,O):(O=v(O,z),O.return=V,O)}function Q(V,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Kw(""+O,V.mode,z),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case D:return z=Zg(O.type,O.key,O.props,null,V.mode,z),z.ref=$d(V,null,O),z.return=V,z;case F:return O=qw(O,V.mode,z),O.return=V,O;case ot:var nt=O._init;return Q(V,nt(O._payload),z)}if(wd(O)||st(O))return O=pl(O,V.mode,z,null),O.return=V,O;Pg(V,O)}return null}function Y(V,O,z,nt){var gt=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return gt!==null?null:R(V,O,""+z,nt);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===gt?N(V,O,z,nt):null;case F:return z.key===gt?H(V,O,z,nt):null;case ot:return gt=z._init,Y(V,O,gt(z._payload),nt)}if(wd(z)||st(z))return gt!==null?null:K(V,O,z,nt,null);Pg(V,z)}return null}function at(V,O,z,nt,gt){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return V=V.get(z)||null,R(O,V,""+nt,gt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case D:return V=V.get(nt.key===null?z:nt.key)||null,N(O,V,nt,gt);case F:return V=V.get(nt.key===null?z:nt.key)||null,H(O,V,nt,gt);case ot:var bt=nt._init;return at(V,O,z,bt(nt._payload),gt)}if(wd(nt)||st(nt))return V=V.get(z)||null,K(O,V,nt,gt,null);Pg(O,nt)}return null}function dt(V,O,z,nt){for(var gt=null,bt=null,St=O,Pt=O=0,an=null;St!==null&&Pt<z.length;Pt++){St.index>Pt?(an=St,St=null):an=St.sibling;var Wt=Y(V,St,z[Pt],nt);if(Wt===null){St===null&&(St=an);break}s&&St&&Wt.alternate===null&&o(V,St),O=A(Wt,O,Pt),bt===null?gt=Wt:bt.sibling=Wt,bt=Wt,St=an}if(Pt===z.length)return h(V,St),we&&ol(V,Pt),gt;if(St===null){for(;Pt<z.length;Pt++)St=Q(V,z[Pt],nt),St!==null&&(O=A(St,O,Pt),bt===null?gt=St:bt.sibling=St,bt=St);return we&&ol(V,Pt),gt}for(St=m(V,St);Pt<z.length;Pt++)an=at(St,V,Pt,z[Pt],nt),an!==null&&(s&&an.alternate!==null&&St.delete(an.key===null?Pt:an.key),O=A(an,O,Pt),bt===null?gt=an:bt.sibling=an,bt=an);return s&&St.forEach(function(qo){return o(V,qo)}),we&&ol(V,Pt),gt}function pt(V,O,z,nt){var gt=st(z);if(typeof gt!="function")throw Error(e(150));if(z=gt.call(z),z==null)throw Error(e(151));for(var bt=gt=null,St=O,Pt=O=0,an=null,Wt=z.next();St!==null&&!Wt.done;Pt++,Wt=z.next()){St.index>Pt?(an=St,St=null):an=St.sibling;var qo=Y(V,St,Wt.value,nt);if(qo===null){St===null&&(St=an);break}s&&St&&qo.alternate===null&&o(V,St),O=A(qo,O,Pt),bt===null?gt=qo:bt.sibling=qo,bt=qo,St=an}if(Wt.done)return h(V,St),we&&ol(V,Pt),gt;if(St===null){for(;!Wt.done;Pt++,Wt=z.next())Wt=Q(V,Wt.value,nt),Wt!==null&&(O=A(Wt,O,Pt),bt===null?gt=Wt:bt.sibling=Wt,bt=Wt);return we&&ol(V,Pt),gt}for(St=m(V,St);!Wt.done;Pt++,Wt=z.next())Wt=at(St,V,Pt,Wt.value,nt),Wt!==null&&(s&&Wt.alternate!==null&&St.delete(Wt.key===null?Pt:Wt.key),O=A(Wt,O,Pt),bt===null?gt=Wt:bt.sibling=Wt,bt=Wt);return s&&St.forEach(function(LL){return o(V,LL)}),we&&ol(V,Pt),gt}function Be(V,O,z,nt){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:t:{for(var gt=z.key,bt=O;bt!==null;){if(bt.key===gt){if(gt=z.type,gt===j){if(bt.tag===7){h(V,bt.sibling),O=v(bt,z.props.children),O.return=V,V=O;break t}}else if(bt.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===ot&&ZS(gt)===bt.type){h(V,bt.sibling),O=v(bt,z.props),O.ref=$d(V,bt,z),O.return=V,V=O;break t}h(V,bt);break}else o(V,bt);bt=bt.sibling}z.type===j?(O=pl(z.props.children,V.mode,nt,z.key),O.return=V,V=O):(nt=Zg(z.type,z.key,z.props,null,V.mode,nt),nt.ref=$d(V,O,z),nt.return=V,V=nt)}return P(V);case F:t:{for(bt=z.key;O!==null;){if(O.key===bt)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){h(V,O.sibling),O=v(O,z.children||[]),O.return=V,V=O;break t}else{h(V,O);break}else o(V,O);O=O.sibling}O=qw(z,V.mode,nt),O.return=V,V=O}return P(V);case ot:return bt=z._init,Be(V,O,bt(z._payload),nt)}if(wd(z))return dt(V,O,z,nt);if(st(z))return pt(V,O,z,nt);Pg(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(h(V,O.sibling),O=v(O,z),O.return=V,V=O):(h(V,O),O=Kw(z,V.mode,nt),O.return=V,V=O),P(V)):h(V,O)}return Be}var lu=JS(!0),tE=JS(!1),_g=jo(null),Mg=null,cu=null,rw=null;function ow(){rw=cu=Mg=null}function aw(s){var o=_g.current;ye(_g),s._currentValue=o}function lw(s,o,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===h)break;s=s.return}}function uu(s,o){Mg=s,rw=cu=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(ti=!0),s.firstContext=null)}function Xi(s){var o=s._currentValue;if(rw!==s)if(s={context:s,memoizedValue:o,next:null},cu===null){if(Mg===null)throw Error(e(308));cu=s,Mg.dependencies={lanes:0,firstContext:s}}else cu=cu.next=s;return o}var al=null;function cw(s){al===null?al=[s]:al.push(s)}function eE(s,o,h,m){var v=o.interleaved;return v===null?(h.next=h,cw(o)):(h.next=v.next,v.next=h),o.interleaved=h,Lr(s,m)}function Lr(s,o){s.lanes|=o;var h=s.alternate;for(h!==null&&(h.lanes|=o),h=s,s=s.return;s!==null;)s.childLanes|=o,h=s.alternate,h!==null&&(h.childLanes|=o),h=s,s=s.return;return h.tag===3?h.stateNode:null}var Uo=!1;function uw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nE(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Rr(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Ho(s,o,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Ut&2)!==0){var v=m.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),m.pending=o,Lr(s,h)}return v=m.interleaved,v===null?(o.next=o,cw(m)):(o.next=v.next,v.next=o),m.interleaved=o,Lr(s,h)}function Dg(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,Ev(s,h)}}function iE(s,o){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var v=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};A===null?v=A=P:A=A.next=P,h=h.next}while(h!==null);A===null?v=A=o:A=A.next=o}else v=A=o;h={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:A,shared:m.shared,effects:m.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}function Lg(s,o,h,m){var v=s.updateQueue;Uo=!1;var A=v.firstBaseUpdate,P=v.lastBaseUpdate,R=v.shared.pending;if(R!==null){v.shared.pending=null;var N=R,H=N.next;N.next=null,P===null?A=H:P.next=H,P=N;var K=s.alternate;K!==null&&(K=K.updateQueue,R=K.lastBaseUpdate,R!==P&&(R===null?K.firstBaseUpdate=H:R.next=H,K.lastBaseUpdate=N))}if(A!==null){var Q=v.baseState;P=0,K=H=N=null,R=A;do{var Y=R.lane,at=R.eventTime;if((m&Y)===Y){K!==null&&(K=K.next={eventTime:at,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});t:{var dt=s,pt=R;switch(Y=o,at=h,pt.tag){case 1:if(dt=pt.payload,typeof dt=="function"){Q=dt.call(at,Q,Y);break t}Q=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=pt.payload,Y=typeof dt=="function"?dt.call(at,Q,Y):dt,Y==null)break t;Q=et({},Q,Y);break t;case 2:Uo=!0}}R.callback!==null&&R.lane!==0&&(s.flags|=64,Y=v.effects,Y===null?v.effects=[R]:Y.push(R))}else at={eventTime:at,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},K===null?(H=K=at,N=Q):K=K.next=at,P|=Y;if(R=R.next,R===null){if(R=v.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,v.lastBaseUpdate=Y,v.shared.pending=null}}while(!0);if(K===null&&(N=Q),v.baseState=N,v.firstBaseUpdate=H,v.lastBaseUpdate=K,o=v.shared.interleaved,o!==null){v=o;do P|=v.lane,v=v.next;while(v!==o)}else A===null&&(v.shared.lanes=0);ul|=P,s.lanes=P,s.memoizedState=Q}}function sE(s,o,h){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var m=s[o],v=m.callback;if(v!==null){if(m.callback=null,m=h,typeof v!="function")throw Error(e(191,v));v.call(m)}}}var Wd={},Xs=jo(Wd),Gd=jo(Wd),Xd=jo(Wd);function ll(s){if(s===Wd)throw Error(e(174));return s}function hw(s,o){switch(he(Xd,o),he(Gd,s),he(Xs,Wd),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:dv(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=dv(o,s)}ye(Xs),he(Xs,o)}function hu(){ye(Xs),ye(Gd),ye(Xd)}function rE(s){ll(Xd.current);var o=ll(Xs.current),h=dv(o,s.type);o!==h&&(he(Gd,s),he(Xs,h))}function dw(s){Gd.current===s&&(ye(Xs),ye(Gd))}var Se=jo(0);function Rg(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var fw=[];function pw(){for(var s=0;s<fw.length;s++)fw[s]._workInProgressVersionPrimary=null;fw.length=0}var Fg=L.ReactCurrentDispatcher,mw=L.ReactCurrentBatchConfig,cl=0,Ee=null,Ke=null,rn=null,Ig=!1,Yd=!1,Kd=0,tL=0;function _n(){throw Error(e(321))}function gw(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!ws(s[h],o[h]))return!1;return!0}function yw(s,o,h,m,v,A){if(cl=A,Ee=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Fg.current=s===null||s.memoizedState===null?sL:rL,s=h(m,v),Yd){A=0;do{if(Yd=!1,Kd=0,25<=A)throw Error(e(301));A+=1,rn=Ke=null,o.updateQueue=null,Fg.current=oL,s=h(m,v)}while(Yd)}if(Fg.current=Bg,o=Ke!==null&&Ke.next!==null,cl=0,rn=Ke=Ee=null,Ig=!1,o)throw Error(e(300));return s}function vw(){var s=Kd!==0;return Kd=0,s}function Ys(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ee.memoizedState=rn=s:rn=rn.next=s,rn}function Yi(){if(Ke===null){var s=Ee.alternate;s=s!==null?s.memoizedState:null}else s=Ke.next;var o=rn===null?Ee.memoizedState:rn.next;if(o!==null)rn=o,Ke=s;else{if(s===null)throw Error(e(310));Ke=s,s={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},rn===null?Ee.memoizedState=rn=s:rn=rn.next=s}return rn}function qd(s,o){return typeof o=="function"?o(s):o}function ww(s){var o=Yi(),h=o.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=s;var m=Ke,v=m.baseQueue,A=h.pending;if(A!==null){if(v!==null){var P=v.next;v.next=A.next,A.next=P}m.baseQueue=v=A,h.pending=null}if(v!==null){A=v.next,m=m.baseState;var R=P=null,N=null,H=A;do{var K=H.lane;if((cl&K)===K)N!==null&&(N=N.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),m=H.hasEagerState?H.eagerState:s(m,H.action);else{var Q={lane:K,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};N===null?(R=N=Q,P=m):N=N.next=Q,Ee.lanes|=K,ul|=K}H=H.next}while(H!==null&&H!==A);N===null?P=m:N.next=R,ws(m,o.memoizedState)||(ti=!0),o.memoizedState=m,o.baseState=P,o.baseQueue=N,h.lastRenderedState=m}if(s=h.interleaved,s!==null){v=s;do A=v.lane,Ee.lanes|=A,ul|=A,v=v.next;while(v!==s)}else v===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function xw(s){var o=Yi(),h=o.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=s;var m=h.dispatch,v=h.pending,A=o.memoizedState;if(v!==null){h.pending=null;var P=v=v.next;do A=s(A,P.action),P=P.next;while(P!==v);ws(A,o.memoizedState)||(ti=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),h.lastRenderedState=A}return[A,m]}function oE(){}function aE(s,o){var h=Ee,m=Yi(),v=o(),A=!ws(m.memoizedState,v);if(A&&(m.memoizedState=v,ti=!0),m=m.queue,Aw(uE.bind(null,h,m,s),[s]),m.getSnapshot!==o||A||rn!==null&&rn.memoizedState.tag&1){if(h.flags|=2048,Qd(9,cE.bind(null,h,m,v,o),void 0,null),on===null)throw Error(e(349));(cl&30)!==0||lE(h,o,v)}return v}function lE(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=Ee.updateQueue,o===null?(o={lastEffect:null,stores:null},Ee.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function cE(s,o,h,m){o.value=h,o.getSnapshot=m,hE(o)&&dE(s)}function uE(s,o,h){return h(function(){hE(o)&&dE(s)})}function hE(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!ws(s,h)}catch{return!0}}function dE(s){var o=Lr(s,1);o!==null&&Es(o,s,1,-1)}function fE(s){var o=Ys();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qd,lastRenderedState:s},o.queue=s,s=s.dispatch=iL.bind(null,Ee,s),[o.memoizedState,s]}function Qd(s,o,h,m){return s={tag:s,create:o,destroy:h,deps:m,next:null},o=Ee.updateQueue,o===null?(o={lastEffect:null,stores:null},Ee.updateQueue=o,o.lastEffect=s.next=s):(h=o.lastEffect,h===null?o.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,o.lastEffect=s)),s}function pE(){return Yi().memoizedState}function Ng(s,o,h,m){var v=Ys();Ee.flags|=s,v.memoizedState=Qd(1|o,h,void 0,m===void 0?null:m)}function Og(s,o,h,m){var v=Yi();m=m===void 0?null:m;var A=void 0;if(Ke!==null){var P=Ke.memoizedState;if(A=P.destroy,m!==null&&gw(m,P.deps)){v.memoizedState=Qd(o,h,A,m);return}}Ee.flags|=s,v.memoizedState=Qd(1|o,h,A,m)}function mE(s,o){return Ng(8390656,8,s,o)}function Aw(s,o){return Og(2048,8,s,o)}function gE(s,o){return Og(4,2,s,o)}function yE(s,o){return Og(4,4,s,o)}function vE(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function wE(s,o,h){return h=h!=null?h.concat([s]):null,Og(4,4,vE.bind(null,o,s),h)}function bw(){}function xE(s,o){var h=Yi();o=o===void 0?null:o;var m=h.memoizedState;return m!==null&&o!==null&&gw(o,m[1])?m[0]:(h.memoizedState=[s,o],s)}function AE(s,o){var h=Yi();o=o===void 0?null:o;var m=h.memoizedState;return m!==null&&o!==null&&gw(o,m[1])?m[0]:(s=s(),h.memoizedState=[s,o],s)}function bE(s,o,h){return(cl&21)===0?(s.baseState&&(s.baseState=!1,ti=!0),s.memoizedState=h):(ws(h,o)||(h=Zb(),Ee.lanes|=h,ul|=h,s.baseState=!0),o)}function eL(s,o){var h=qt;qt=h!==0&&4>h?h:4,s(!0);var m=mw.transition;mw.transition={};try{s(!1),o()}finally{qt=h,mw.transition=m}}function SE(){return Yi().memoizedState}function nL(s,o,h){var m=Xo(s);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},EE(s))CE(o,h);else if(h=eE(s,o,h,m),h!==null){var v=zn();Es(h,s,m,v),TE(h,o,m)}}function iL(s,o,h){var m=Xo(s),v={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(EE(s))CE(o,v);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var P=o.lastRenderedState,R=A(P,h);if(v.hasEagerState=!0,v.eagerState=R,ws(R,P)){var N=o.interleaved;N===null?(v.next=v,cw(o)):(v.next=N.next,N.next=v),o.interleaved=v;return}}catch{}finally{}h=eE(s,o,v,m),h!==null&&(v=zn(),Es(h,s,m,v),TE(h,o,m))}}function EE(s){var o=s.alternate;return s===Ee||o!==null&&o===Ee}function CE(s,o){Yd=Ig=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function TE(s,o,h){if((h&4194240)!==0){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,Ev(s,h)}}var Bg={readContext:Xi,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},sL={readContext:Xi,useCallback:function(s,o){return Ys().memoizedState=[s,o===void 0?null:o],s},useContext:Xi,useEffect:mE,useImperativeHandle:function(s,o,h){return h=h!=null?h.concat([s]):null,Ng(4194308,4,vE.bind(null,o,s),h)},useLayoutEffect:function(s,o){return Ng(4194308,4,s,o)},useInsertionEffect:function(s,o){return Ng(4,2,s,o)},useMemo:function(s,o){var h=Ys();return o=o===void 0?null:o,s=s(),h.memoizedState=[s,o],s},useReducer:function(s,o,h){var m=Ys();return o=h!==void 0?h(o):o,m.memoizedState=m.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},m.queue=s,s=s.dispatch=nL.bind(null,Ee,s),[m.memoizedState,s]},useRef:function(s){var o=Ys();return s={current:s},o.memoizedState=s},useState:fE,useDebugValue:bw,useDeferredValue:function(s){return Ys().memoizedState=s},useTransition:function(){var s=fE(!1),o=s[0];return s=eL.bind(null,s[1]),Ys().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,h){var m=Ee,v=Ys();if(we){if(h===void 0)throw Error(e(407));h=h()}else{if(h=o(),on===null)throw Error(e(349));(cl&30)!==0||lE(m,o,h)}v.memoizedState=h;var A={value:h,getSnapshot:o};return v.queue=A,mE(uE.bind(null,m,A,s),[s]),m.flags|=2048,Qd(9,cE.bind(null,m,A,h,o),void 0,null),h},useId:function(){var s=Ys(),o=on.identifierPrefix;if(we){var h=Dr,m=Mr;h=(m&~(1<<32-vs(m)-1)).toString(32)+h,o=":"+o+"R"+h,h=Kd++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=tL++,o=":"+o+"r"+h.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},rL={readContext:Xi,useCallback:xE,useContext:Xi,useEffect:Aw,useImperativeHandle:wE,useInsertionEffect:gE,useLayoutEffect:yE,useMemo:AE,useReducer:ww,useRef:pE,useState:function(){return ww(qd)},useDebugValue:bw,useDeferredValue:function(s){var o=Yi();return bE(o,Ke.memoizedState,s)},useTransition:function(){var s=ww(qd)[0],o=Yi().memoizedState;return[s,o]},useMutableSource:oE,useSyncExternalStore:aE,useId:SE,unstable_isNewReconciler:!1},oL={readContext:Xi,useCallback:xE,useContext:Xi,useEffect:Aw,useImperativeHandle:wE,useInsertionEffect:gE,useLayoutEffect:yE,useMemo:AE,useReducer:xw,useRef:pE,useState:function(){return xw(qd)},useDebugValue:bw,useDeferredValue:function(s){var o=Yi();return Ke===null?o.memoizedState=s:bE(o,Ke.memoizedState,s)},useTransition:function(){var s=xw(qd)[0],o=Yi().memoizedState;return[s,o]},useMutableSource:oE,useSyncExternalStore:aE,useId:SE,unstable_isNewReconciler:!1};function As(s,o){if(s&&s.defaultProps){o=et({},o),s=s.defaultProps;for(var h in s)o[h]===void 0&&(o[h]=s[h]);return o}return o}function Sw(s,o,h,m){o=s.memoizedState,h=h(m,o),h=h==null?o:et({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var jg={isMounted:function(s){return(s=s._reactInternals)?nl(s)===s:!1},enqueueSetState:function(s,o,h){s=s._reactInternals;var m=zn(),v=Xo(s),A=Rr(m,v);A.payload=o,h!=null&&(A.callback=h),o=Ho(s,A,v),o!==null&&(Es(o,s,v,m),Dg(o,s,v))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var m=zn(),v=Xo(s),A=Rr(m,v);A.tag=1,A.payload=o,h!=null&&(A.callback=h),o=Ho(s,A,v),o!==null&&(Es(o,s,v,m),Dg(o,s,v))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=zn(),m=Xo(s),v=Rr(h,m);v.tag=2,o!=null&&(v.callback=o),o=Ho(s,v,m),o!==null&&(Es(o,s,m,h),Dg(o,s,m))}};function kE(s,o,h,m,v,A,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,A,P):o.prototype&&o.prototype.isPureReactComponent?!Od(h,m)||!Od(v,A):!0}function PE(s,o,h){var m=!1,v=Vo,A=o.contextType;return typeof A=="object"&&A!==null?A=Xi(A):(v=Jn(o)?sl:Pn.current,m=o.contextTypes,A=(m=m!=null)?su(s,v):Vo),o=new o(h,A),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=jg,s.stateNode=o,o._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=A),o}function _E(s,o,h,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==s&&jg.enqueueReplaceState(o,o.state,null)}function Ew(s,o,h,m){var v=s.stateNode;v.props=h,v.state=s.memoizedState,v.refs={},uw(s);var A=o.contextType;typeof A=="object"&&A!==null?v.context=Xi(A):(A=Jn(o)?sl:Pn.current,v.context=su(s,A)),v.state=s.memoizedState,A=o.getDerivedStateFromProps,typeof A=="function"&&(Sw(s,o,A,h),v.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(o=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),o!==v.state&&jg.enqueueReplaceState(v,v.state,null),Lg(s,h,v,m),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function du(s,o){try{var h="",m=o;do h+=xt(m),m=m.return;while(m);var v=h}catch(A){v=`
Error generating stack: `+A.message+`
`+A.stack}return{value:s,source:o,stack:v,digest:null}}function Cw(s,o,h){return{value:s,source:null,stack:h??null,digest:o??null}}function Tw(s,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var aL=typeof WeakMap=="function"?WeakMap:Map;function ME(s,o,h){h=Rr(-1,h),h.tag=3,h.payload={element:null};var m=o.value;return h.callback=function(){Gg||(Gg=!0,zw=m),Tw(s,o)},h}function DE(s,o,h){h=Rr(-1,h),h.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var v=o.value;h.payload=function(){return m(v)},h.callback=function(){Tw(s,o)}}var A=s.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(h.callback=function(){Tw(s,o),typeof m!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var P=o.stack;this.componentDidCatch(o.value,{componentStack:P!==null?P:""})}),h}function LE(s,o,h){var m=s.pingCache;if(m===null){m=s.pingCache=new aL;var v=new Set;m.set(o,v)}else v=m.get(o),v===void 0&&(v=new Set,m.set(o,v));v.has(h)||(v.add(h),s=AL.bind(null,s,o,h),o.then(s,s))}function RE(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function FE(s,o,h,m,v){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=Rr(-1,1),o.tag=2,Ho(h,o,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var lL=L.ReactCurrentOwner,ti=!1;function Vn(s,o,h,m){o.child=s===null?tE(o,null,h,m):lu(o,s.child,h,m)}function IE(s,o,h,m,v){h=h.render;var A=o.ref;return uu(o,v),m=yw(s,o,h,m,A,v),h=vw(),s!==null&&!ti?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~v,Fr(s,o,v)):(we&&h&&tw(o),o.flags|=1,Vn(s,o,m,v),o.child)}function NE(s,o,h,m,v){if(s===null){var A=h.type;return typeof A=="function"&&!Yw(A)&&A.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=A,OE(s,o,A,m,v)):(s=Zg(h.type,null,m,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(A=s.child,(s.lanes&v)===0){var P=A.memoizedProps;if(h=h.compare,h=h!==null?h:Od,h(P,m)&&s.ref===o.ref)return Fr(s,o,v)}return o.flags|=1,s=Ko(A,m),s.ref=o.ref,s.return=o,o.child=s}function OE(s,o,h,m,v){if(s!==null){var A=s.memoizedProps;if(Od(A,m)&&s.ref===o.ref)if(ti=!1,o.pendingProps=m=A,(s.lanes&v)!==0)(s.flags&131072)!==0&&(ti=!0);else return o.lanes=s.lanes,Fr(s,o,v)}return kw(s,o,h,m,v)}function BE(s,o,h){var m=o.pendingProps,v=m.children,A=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(pu,vi),vi|=h;else{if((h&1073741824)===0)return s=A!==null?A.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,he(pu,vi),vi|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=A!==null?A.baseLanes:h,he(pu,vi),vi|=m}else A!==null?(m=A.baseLanes|h,o.memoizedState=null):m=h,he(pu,vi),vi|=m;return Vn(s,o,v,h),o.child}function jE(s,o){var h=o.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function kw(s,o,h,m,v){var A=Jn(h)?sl:Pn.current;return A=su(o,A),uu(o,v),h=yw(s,o,h,m,A,v),m=vw(),s!==null&&!ti?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~v,Fr(s,o,v)):(we&&m&&tw(o),o.flags|=1,Vn(s,o,h,v),o.child)}function VE(s,o,h,m,v){if(Jn(h)){var A=!0;Sg(o)}else A=!1;if(uu(o,v),o.stateNode===null)zg(s,o),PE(o,h,m),Ew(o,h,m,v),m=!0;else if(s===null){var P=o.stateNode,R=o.memoizedProps;P.props=R;var N=P.context,H=h.contextType;typeof H=="object"&&H!==null?H=Xi(H):(H=Jn(h)?sl:Pn.current,H=su(o,H));var K=h.getDerivedStateFromProps,Q=typeof K=="function"||typeof P.getSnapshotBeforeUpdate=="function";Q||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(R!==m||N!==H)&&_E(o,P,m,H),Uo=!1;var Y=o.memoizedState;P.state=Y,Lg(o,m,P,v),N=o.memoizedState,R!==m||Y!==N||Zn.current||Uo?(typeof K=="function"&&(Sw(o,h,K,m),N=o.memoizedState),(R=Uo||kE(o,h,R,m,Y,N,H))?(Q||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(o.flags|=4194308)):(typeof P.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=N),P.props=m,P.state=N,P.context=H,m=R):(typeof P.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{P=o.stateNode,nE(s,o),R=o.memoizedProps,H=o.type===o.elementType?R:As(o.type,R),P.props=H,Q=o.pendingProps,Y=P.context,N=h.contextType,typeof N=="object"&&N!==null?N=Xi(N):(N=Jn(h)?sl:Pn.current,N=su(o,N));var at=h.getDerivedStateFromProps;(K=typeof at=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(R!==Q||Y!==N)&&_E(o,P,m,N),Uo=!1,Y=o.memoizedState,P.state=Y,Lg(o,m,P,v);var dt=o.memoizedState;R!==Q||Y!==dt||Zn.current||Uo?(typeof at=="function"&&(Sw(o,h,at,m),dt=o.memoizedState),(H=Uo||kE(o,h,H,m,Y,dt,N)||!1)?(K||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,dt,N),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,dt,N)),typeof P.componentDidUpdate=="function"&&(o.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof P.componentDidUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=dt),P.props=m,P.state=dt,P.context=N,m=H):(typeof P.componentDidUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),m=!1)}return Pw(s,o,h,m,A,v)}function Pw(s,o,h,m,v,A){jE(s,o);var P=(o.flags&128)!==0;if(!m&&!P)return v&&WS(o,h,!1),Fr(s,o,A);m=o.stateNode,lL.current=o;var R=P&&typeof h.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,s!==null&&P?(o.child=lu(o,s.child,null,A),o.child=lu(o,null,R,A)):Vn(s,o,R,A),o.memoizedState=m.state,v&&WS(o,h,!0),o.child}function zE(s){var o=s.stateNode;o.pendingContext?HS(s,o.pendingContext,o.pendingContext!==o.context):o.context&&HS(s,o.context,!1),hw(s,o.containerInfo)}function UE(s,o,h,m,v){return au(),sw(v),o.flags|=256,Vn(s,o,h,m),o.child}var _w={dehydrated:null,treeContext:null,retryLane:0};function Mw(s){return{baseLanes:s,cachePool:null,transitions:null}}function HE(s,o,h){var m=o.pendingProps,v=Se.current,A=!1,P=(o.flags&128)!==0,R;if((R=P)||(R=s!==null&&s.memoizedState===null?!1:(v&2)!==0),R?(A=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),he(Se,v&1),s===null)return iw(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(P=m.children,s=m.fallback,A?(m=o.mode,A=o.child,P={mode:"hidden",children:P},(m&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=P):A=Jg(P,m,0,null),s=pl(s,m,h,null),A.return=o,s.return=o,A.sibling=s,o.child=A,o.child.memoizedState=Mw(h),o.memoizedState=_w,s):Dw(o,P));if(v=s.memoizedState,v!==null&&(R=v.dehydrated,R!==null))return cL(s,o,P,m,R,v,h);if(A){A=m.fallback,P=o.mode,v=s.child,R=v.sibling;var N={mode:"hidden",children:m.children};return(P&1)===0&&o.child!==v?(m=o.child,m.childLanes=0,m.pendingProps=N,o.deletions=null):(m=Ko(v,N),m.subtreeFlags=v.subtreeFlags&14680064),R!==null?A=Ko(R,A):(A=pl(A,P,h,null),A.flags|=2),A.return=o,m.return=o,m.sibling=A,o.child=m,m=A,A=o.child,P=s.child.memoizedState,P=P===null?Mw(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},A.memoizedState=P,A.childLanes=s.childLanes&~h,o.memoizedState=_w,m}return A=s.child,s=A.sibling,m=Ko(A,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=h),m.return=o,m.sibling=null,s!==null&&(h=o.deletions,h===null?(o.deletions=[s],o.flags|=16):h.push(s)),o.child=m,o.memoizedState=null,m}function Dw(s,o){return o=Jg({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Vg(s,o,h,m){return m!==null&&sw(m),lu(o,s.child,null,h),s=Dw(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function cL(s,o,h,m,v,A,P){if(h)return o.flags&256?(o.flags&=-257,m=Cw(Error(e(422))),Vg(s,o,P,m)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(A=m.fallback,v=o.mode,m=Jg({mode:"visible",children:m.children},v,0,null),A=pl(A,v,P,null),A.flags|=2,m.return=o,A.return=o,m.sibling=A,o.child=m,(o.mode&1)!==0&&lu(o,s.child,null,P),o.child.memoizedState=Mw(P),o.memoizedState=_w,A);if((o.mode&1)===0)return Vg(s,o,P,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var R=m.dgst;return m=R,A=Error(e(419)),m=Cw(A,m,void 0),Vg(s,o,P,m)}if(R=(P&s.childLanes)!==0,ti||R){if(m=on,m!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|P))!==0?0:v,v!==0&&v!==A.retryLane&&(A.retryLane=v,Lr(s,v),Es(m,s,v,-1))}return Xw(),m=Cw(Error(e(421))),Vg(s,o,P,m)}return v.data==="$?"?(o.flags|=128,o.child=s.child,o=bL.bind(null,s),v._reactRetry=o,null):(s=A.treeContext,yi=Bo(v.nextSibling),gi=o,we=!0,xs=null,s!==null&&(Wi[Gi++]=Mr,Wi[Gi++]=Dr,Wi[Gi++]=rl,Mr=s.id,Dr=s.overflow,rl=o),o=Dw(o,m.children),o.flags|=4096,o)}function $E(s,o,h){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),lw(s.return,o,h)}function Lw(s,o,h,m,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=h,A.tailMode=v)}function WE(s,o,h){var m=o.pendingProps,v=m.revealOrder,A=m.tail;if(Vn(s,o,m.children,h),m=Se.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$E(s,h,o);else if(s.tag===19)$E(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(he(Se,m),(o.mode&1)===0)o.memoizedState=null;else switch(v){case"forwards":for(h=o.child,v=null;h!==null;)s=h.alternate,s!==null&&Rg(s)===null&&(v=h),h=h.sibling;h=v,h===null?(v=o.child,o.child=null):(v=h.sibling,h.sibling=null),Lw(o,!1,v,h,A);break;case"backwards":for(h=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&Rg(s)===null){o.child=v;break}s=v.sibling,v.sibling=h,h=v,v=s}Lw(o,!0,h,null,A);break;case"together":Lw(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function zg(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Fr(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),ul|=o.lanes,(h&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(e(153));if(o.child!==null){for(s=o.child,h=Ko(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Ko(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function uL(s,o,h){switch(o.tag){case 3:zE(o),au();break;case 5:rE(o);break;case 1:Jn(o.type)&&Sg(o);break;case 4:hw(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,v=o.memoizedProps.value;he(_g,m._currentValue),m._currentValue=v;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(he(Se,Se.current&1),o.flags|=128,null):(h&o.child.childLanes)!==0?HE(s,o,h):(he(Se,Se.current&1),s=Fr(s,o,h),s!==null?s.sibling:null);he(Se,Se.current&1);break;case 19:if(m=(h&o.childLanes)!==0,(s.flags&128)!==0){if(m)return WE(s,o,h);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),he(Se,Se.current),m)break;return null;case 22:case 23:return o.lanes=0,BE(s,o,h)}return Fr(s,o,h)}var GE,Rw,XE,YE;GE=function(s,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Rw=function(){},XE=function(s,o,h,m){var v=s.memoizedProps;if(v!==m){s=o.stateNode,ll(Xs.current);var A=null;switch(h){case"input":v=vd(s,v),m=vd(s,m),A=[];break;case"select":v=et({},v,{value:void 0}),m=et({},m,{value:void 0}),A=[];break;case"textarea":v=hv(s,v),m=hv(s,m),A=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=xg)}fv(h,m);var P;h=null;for(H in v)if(!m.hasOwnProperty(H)&&v.hasOwnProperty(H)&&v[H]!=null)if(H==="style"){var R=v[H];for(P in R)R.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?A||(A=[]):(A=A||[]).push(H,null));for(H in m){var N=m[H];if(R=v!=null?v[H]:void 0,m.hasOwnProperty(H)&&N!==R&&(N!=null||R!=null))if(H==="style")if(R){for(P in R)!R.hasOwnProperty(P)||N&&N.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in N)N.hasOwnProperty(P)&&R[P]!==N[P]&&(h||(h={}),h[P]=N[P])}else h||(A||(A=[]),A.push(H,h)),h=N;else H==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(A=A||[]).push(H,N)):H==="children"?typeof N!="string"&&typeof N!="number"||(A=A||[]).push(H,""+N):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(i.hasOwnProperty(H)?(N!=null&&H==="onScroll"&&ge("scroll",s),A||R===N||(A=[])):(A=A||[]).push(H,N))}h&&(A=A||[]).push("style",h);var H=A;(o.updateQueue=H)&&(o.flags|=4)}},YE=function(s,o,h,m){h!==m&&(o.flags|=4)};function Zd(s,o){if(!we)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Mn(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(o)for(var v=s.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=m,s.childLanes=h,o}function hL(s,o,h){var m=o.pendingProps;switch(ew(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(o),null;case 1:return Jn(o.type)&&bg(),Mn(o),null;case 3:return m=o.stateNode,hu(),ye(Zn),ye(Pn),pw(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(kg(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xs!==null&&($w(xs),xs=null))),Rw(s,o),Mn(o),null;case 5:dw(o);var v=ll(Xd.current);if(h=o.type,s!==null&&o.stateNode!=null)XE(s,o,h,m,v),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(e(166));return Mn(o),null}if(s=ll(Xs.current),kg(o)){m=o.stateNode,h=o.type;var A=o.memoizedProps;switch(m[Gs]=o,m[Ud]=A,s=(o.mode&1)!==0,h){case"dialog":ge("cancel",m),ge("close",m);break;case"iframe":case"object":case"embed":ge("load",m);break;case"video":case"audio":for(v=0;v<jd.length;v++)ge(jd[v],m);break;case"source":ge("error",m);break;case"img":case"image":case"link":ge("error",m),ge("load",m);break;case"details":ge("toggle",m);break;case"input":Pb(m,A),ge("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!A.multiple},ge("invalid",m);break;case"textarea":Db(m,A),ge("invalid",m)}fv(h,A),v=null;for(var P in A)if(A.hasOwnProperty(P)){var R=A[P];P==="children"?typeof R=="string"?m.textContent!==R&&(A.suppressHydrationWarning!==!0&&wg(m.textContent,R,s),v=["children",R]):typeof R=="number"&&m.textContent!==""+R&&(A.suppressHydrationWarning!==!0&&wg(m.textContent,R,s),v=["children",""+R]):i.hasOwnProperty(P)&&R!=null&&P==="onScroll"&&ge("scroll",m)}switch(h){case"input":$i(m),Mb(m,A,!0);break;case"textarea":$i(m),Rb(m);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(m.onclick=xg)}m=v,o.updateQueue=m,m!==null&&(o.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Fb(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=P.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=P.createElement(h,{is:m.is}):(s=P.createElement(h),h==="select"&&(P=s,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):s=P.createElementNS(s,h),s[Gs]=o,s[Ud]=m,GE(s,o,!1,!1),o.stateNode=s;t:{switch(P=pv(h,m),h){case"dialog":ge("cancel",s),ge("close",s),v=m;break;case"iframe":case"object":case"embed":ge("load",s),v=m;break;case"video":case"audio":for(v=0;v<jd.length;v++)ge(jd[v],s);v=m;break;case"source":ge("error",s),v=m;break;case"img":case"image":case"link":ge("error",s),ge("load",s),v=m;break;case"details":ge("toggle",s),v=m;break;case"input":Pb(s,m),v=vd(s,m),ge("invalid",s);break;case"option":v=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},v=et({},m,{value:void 0}),ge("invalid",s);break;case"textarea":Db(s,m),v=hv(s,m),ge("invalid",s);break;default:v=m}fv(h,v),R=v;for(A in R)if(R.hasOwnProperty(A)){var N=R[A];A==="style"?Ob(s,N):A==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Ib(s,N)):A==="children"?typeof N=="string"?(h!=="textarea"||N!=="")&&xd(s,N):typeof N=="number"&&xd(s,""+N):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?N!=null&&A==="onScroll"&&ge("scroll",s):N!=null&&_(s,A,N,P))}switch(h){case"input":$i(s),Mb(s,m,!1);break;case"textarea":$i(s),Rb(s);break;case"option":m.value!=null&&s.setAttribute("value",""+zt(m.value));break;case"select":s.multiple=!!m.multiple,A=m.value,A!=null?Gc(s,!!m.multiple,A,!1):m.defaultValue!=null&&Gc(s,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=xg)}switch(h){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break t;case"img":m=!0;break t;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Mn(o),null;case 6:if(s&&o.stateNode!=null)YE(s,o,s.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(e(166));if(h=ll(Xd.current),ll(Xs.current),kg(o)){if(m=o.stateNode,h=o.memoizedProps,m[Gs]=o,(A=m.nodeValue!==h)&&(s=gi,s!==null))switch(s.tag){case 3:wg(m.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&wg(m.nodeValue,h,(s.mode&1)!==0)}A&&(o.flags|=4)}else m=(h.nodeType===9?h:h.ownerDocument).createTextNode(m),m[Gs]=o,o.stateNode=m}return Mn(o),null;case 13:if(ye(Se),m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(we&&yi!==null&&(o.mode&1)!==0&&(o.flags&128)===0)QS(),au(),o.flags|=98560,A=!1;else if(A=kg(o),m!==null&&m.dehydrated!==null){if(s===null){if(!A)throw Error(e(318));if(A=o.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(e(317));A[Gs]=o}else au(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Mn(o),A=!1}else xs!==null&&($w(xs),xs=null),A=!0;if(!A)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=h,o):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Se.current&1)!==0?qe===0&&(qe=3):Xw())),o.updateQueue!==null&&(o.flags|=4),Mn(o),null);case 4:return hu(),Rw(s,o),s===null&&Vd(o.stateNode.containerInfo),Mn(o),null;case 10:return aw(o.type._context),Mn(o),null;case 17:return Jn(o.type)&&bg(),Mn(o),null;case 19:if(ye(Se),A=o.memoizedState,A===null)return Mn(o),null;if(m=(o.flags&128)!==0,P=A.rendering,P===null)if(m)Zd(A,!1);else{if(qe!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(P=Rg(s),P!==null){for(o.flags|=128,Zd(A,!1),m=P.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=h,h=o.child;h!==null;)A=h,s=m,A.flags&=14680066,P=A.alternate,P===null?(A.childLanes=0,A.lanes=s,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=P.childLanes,A.lanes=P.lanes,A.child=P.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=P.memoizedProps,A.memoizedState=P.memoizedState,A.updateQueue=P.updateQueue,A.type=P.type,s=P.dependencies,A.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return he(Se,Se.current&1|2),o.child}s=s.sibling}A.tail!==null&&Oe()>mu&&(o.flags|=128,m=!0,Zd(A,!1),o.lanes=4194304)}else{if(!m)if(s=Rg(P),s!==null){if(o.flags|=128,m=!0,h=s.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),Zd(A,!0),A.tail===null&&A.tailMode==="hidden"&&!P.alternate&&!we)return Mn(o),null}else 2*Oe()-A.renderingStartTime>mu&&h!==1073741824&&(o.flags|=128,m=!0,Zd(A,!1),o.lanes=4194304);A.isBackwards?(P.sibling=o.child,o.child=P):(h=A.last,h!==null?h.sibling=P:o.child=P,A.last=P)}return A.tail!==null?(o=A.tail,A.rendering=o,A.tail=o.sibling,A.renderingStartTime=Oe(),o.sibling=null,h=Se.current,he(Se,m?h&1|2:h&1),o):(Mn(o),null);case 22:case 23:return Gw(),m=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(vi&1073741824)!==0&&(Mn(o),o.subtreeFlags&6&&(o.flags|=8192)):Mn(o),null;case 24:return null;case 25:return null}throw Error(e(156,o.tag))}function dL(s,o){switch(ew(o),o.tag){case 1:return Jn(o.type)&&bg(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return hu(),ye(Zn),ye(Pn),pw(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return dw(o),null;case 13:if(ye(Se),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(e(340));au()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ye(Se),null;case 4:return hu(),null;case 10:return aw(o.type._context),null;case 22:case 23:return Gw(),null;case 24:return null;default:return null}}var Ug=!1,Dn=!1,fL=typeof WeakSet=="function"?WeakSet:Set,ht=null;function fu(s,o){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){Me(s,o,m)}else h.current=null}function Fw(s,o,h){try{h()}catch(m){Me(s,o,m)}}var KE=!1;function pL(s,o){if(Gv=lg,s=kS(),Bv(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var v=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break t}var P=0,R=-1,N=-1,H=0,K=0,Q=s,Y=null;e:for(;;){for(var at;Q!==h||v!==0&&Q.nodeType!==3||(R=P+v),Q!==A||m!==0&&Q.nodeType!==3||(N=P+m),Q.nodeType===3&&(P+=Q.nodeValue.length),(at=Q.firstChild)!==null;)Y=Q,Q=at;for(;;){if(Q===s)break e;if(Y===h&&++H===v&&(R=P),Y===A&&++K===m&&(N=P),(at=Q.nextSibling)!==null)break;Q=Y,Y=Q.parentNode}Q=at}h=R===-1||N===-1?null:{start:R,end:N}}else h=null}h=h||{start:0,end:0}}else h=null;for(Xv={focusedElem:s,selectionRange:h},lg=!1,ht=o;ht!==null;)if(o=ht,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,ht=s;else for(;ht!==null;){o=ht;try{var dt=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var pt=dt.memoizedProps,Be=dt.memoizedState,V=o.stateNode,O=V.getSnapshotBeforeUpdate(o.elementType===o.type?pt:As(o.type,pt),Be);V.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=o.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(nt){Me(o,o.return,nt)}if(s=o.sibling,s!==null){s.return=o.return,ht=s;break}ht=o.return}return dt=KE,KE=!1,dt}function Jd(s,o,h){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&s)===s){var A=v.destroy;v.destroy=void 0,A!==void 0&&Fw(o,h,A)}v=v.next}while(v!==m)}}function Hg(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&s)===s){var m=h.create;h.destroy=m()}h=h.next}while(h!==o)}}function Iw(s){var o=s.ref;if(o!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof o=="function"?o(s):o.current=s}}function qE(s){var o=s.alternate;o!==null&&(s.alternate=null,qE(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Gs],delete o[Ud],delete o[Qv],delete o[qD],delete o[QD])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function QE(s){return s.tag===5||s.tag===3||s.tag===4}function ZE(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||QE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Nw(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(s,o):h.insertBefore(s,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(s,h)):(o=h,o.appendChild(s)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=xg));else if(m!==4&&(s=s.child,s!==null))for(Nw(s,o,h),s=s.sibling;s!==null;)Nw(s,o,h),s=s.sibling}function Ow(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(Ow(s,o,h),s=s.sibling;s!==null;)Ow(s,o,h),s=s.sibling}var mn=null,bs=!1;function $o(s,o,h){for(h=h.child;h!==null;)JE(s,o,h),h=h.sibling}function JE(s,o,h){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(ng,h)}catch{}switch(h.tag){case 5:Dn||fu(h,o);case 6:var m=mn,v=bs;mn=null,$o(s,o,h),mn=m,bs=v,mn!==null&&(bs?(s=mn,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):mn.removeChild(h.stateNode));break;case 18:mn!==null&&(bs?(s=mn,h=h.stateNode,s.nodeType===8?qv(s.parentNode,h):s.nodeType===1&&qv(s,h),Dd(s)):qv(mn,h.stateNode));break;case 4:m=mn,v=bs,mn=h.stateNode.containerInfo,bs=!0,$o(s,o,h),mn=m,bs=v;break;case 0:case 11:case 14:case 15:if(!Dn&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var A=v,P=A.destroy;A=A.tag,P!==void 0&&((A&2)!==0||(A&4)!==0)&&Fw(h,o,P),v=v.next}while(v!==m)}$o(s,o,h);break;case 1:if(!Dn&&(fu(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(R){Me(h,o,R)}$o(s,o,h);break;case 21:$o(s,o,h);break;case 22:h.mode&1?(Dn=(m=Dn)||h.memoizedState!==null,$o(s,o,h),Dn=m):$o(s,o,h);break;default:$o(s,o,h)}}function tC(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new fL),o.forEach(function(m){var v=SL.bind(null,s,m);h.has(m)||(h.add(m),m.then(v,v))})}}function Ss(s,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];try{var A=s,P=o,R=P;t:for(;R!==null;){switch(R.tag){case 5:mn=R.stateNode,bs=!1;break t;case 3:mn=R.stateNode.containerInfo,bs=!0;break t;case 4:mn=R.stateNode.containerInfo,bs=!0;break t}R=R.return}if(mn===null)throw Error(e(160));JE(A,P,v),mn=null,bs=!1;var N=v.alternate;N!==null&&(N.return=null),v.return=null}catch(H){Me(v,o,H)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)eC(o,s),o=o.sibling}function eC(s,o){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ss(o,s),Ks(s),m&4){try{Jd(3,s,s.return),Hg(3,s)}catch(pt){Me(s,s.return,pt)}try{Jd(5,s,s.return)}catch(pt){Me(s,s.return,pt)}}break;case 1:Ss(o,s),Ks(s),m&512&&h!==null&&fu(h,h.return);break;case 5:if(Ss(o,s),Ks(s),m&512&&h!==null&&fu(h,h.return),s.flags&32){var v=s.stateNode;try{xd(v,"")}catch(pt){Me(s,s.return,pt)}}if(m&4&&(v=s.stateNode,v!=null)){var A=s.memoizedProps,P=h!==null?h.memoizedProps:A,R=s.type,N=s.updateQueue;if(s.updateQueue=null,N!==null)try{R==="input"&&A.type==="radio"&&A.name!=null&&_b(v,A),pv(R,P);var H=pv(R,A);for(P=0;P<N.length;P+=2){var K=N[P],Q=N[P+1];K==="style"?Ob(v,Q):K==="dangerouslySetInnerHTML"?Ib(v,Q):K==="children"?xd(v,Q):_(v,K,Q,H)}switch(R){case"input":cv(v,A);break;case"textarea":Lb(v,A);break;case"select":var Y=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!A.multiple;var at=A.value;at!=null?Gc(v,!!A.multiple,at,!1):Y!==!!A.multiple&&(A.defaultValue!=null?Gc(v,!!A.multiple,A.defaultValue,!0):Gc(v,!!A.multiple,A.multiple?[]:"",!1))}v[Ud]=A}catch(pt){Me(s,s.return,pt)}}break;case 6:if(Ss(o,s),Ks(s),m&4){if(s.stateNode===null)throw Error(e(162));v=s.stateNode,A=s.memoizedProps;try{v.nodeValue=A}catch(pt){Me(s,s.return,pt)}}break;case 3:if(Ss(o,s),Ks(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Dd(o.containerInfo)}catch(pt){Me(s,s.return,pt)}break;case 4:Ss(o,s),Ks(s);break;case 13:Ss(o,s),Ks(s),v=s.child,v.flags&8192&&(A=v.memoizedState!==null,v.stateNode.isHidden=A,!A||v.alternate!==null&&v.alternate.memoizedState!==null||(Vw=Oe())),m&4&&tC(s);break;case 22:if(K=h!==null&&h.memoizedState!==null,s.mode&1?(Dn=(H=Dn)||K,Ss(o,s),Dn=H):Ss(o,s),Ks(s),m&8192){if(H=s.memoizedState!==null,(s.stateNode.isHidden=H)&&!K&&(s.mode&1)!==0)for(ht=s,K=s.child;K!==null;){for(Q=ht=K;ht!==null;){switch(Y=ht,at=Y.child,Y.tag){case 0:case 11:case 14:case 15:Jd(4,Y,Y.return);break;case 1:fu(Y,Y.return);var dt=Y.stateNode;if(typeof dt.componentWillUnmount=="function"){m=Y,h=Y.return;try{o=m,dt.props=o.memoizedProps,dt.state=o.memoizedState,dt.componentWillUnmount()}catch(pt){Me(m,h,pt)}}break;case 5:fu(Y,Y.return);break;case 22:if(Y.memoizedState!==null){sC(Q);continue}}at!==null?(at.return=Y,ht=at):sC(Q)}K=K.sibling}t:for(K=null,Q=s;;){if(Q.tag===5){if(K===null){K=Q;try{v=Q.stateNode,H?(A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(R=Q.stateNode,N=Q.memoizedProps.style,P=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=Nb("display",P))}catch(pt){Me(s,s.return,pt)}}}else if(Q.tag===6){if(K===null)try{Q.stateNode.nodeValue=H?"":Q.memoizedProps}catch(pt){Me(s,s.return,pt)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===s)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===s)break t;for(;Q.sibling===null;){if(Q.return===null||Q.return===s)break t;K===Q&&(K=null),Q=Q.return}K===Q&&(K=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Ss(o,s),Ks(s),m&4&&tC(s);break;case 21:break;default:Ss(o,s),Ks(s)}}function Ks(s){var o=s.flags;if(o&2){try{t:{for(var h=s.return;h!==null;){if(QE(h)){var m=h;break t}h=h.return}throw Error(e(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(xd(v,""),m.flags&=-33);var A=ZE(s);Ow(s,A,v);break;case 3:case 4:var P=m.stateNode.containerInfo,R=ZE(s);Nw(s,R,P);break;default:throw Error(e(161))}}catch(N){Me(s,s.return,N)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function mL(s,o,h){ht=s,nC(s)}function nC(s,o,h){for(var m=(s.mode&1)!==0;ht!==null;){var v=ht,A=v.child;if(v.tag===22&&m){var P=v.memoizedState!==null||Ug;if(!P){var R=v.alternate,N=R!==null&&R.memoizedState!==null||Dn;R=Ug;var H=Dn;if(Ug=P,(Dn=N)&&!H)for(ht=v;ht!==null;)P=ht,N=P.child,P.tag===22&&P.memoizedState!==null?rC(v):N!==null?(N.return=P,ht=N):rC(v);for(;A!==null;)ht=A,nC(A),A=A.sibling;ht=v,Ug=R,Dn=H}iC(s)}else(v.subtreeFlags&8772)!==0&&A!==null?(A.return=v,ht=A):iC(s)}}function iC(s){for(;ht!==null;){var o=ht;if((o.flags&8772)!==0){var h=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Dn||Hg(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!Dn)if(h===null)m.componentDidMount();else{var v=o.elementType===o.type?h.memoizedProps:As(o.type,h.memoizedProps);m.componentDidUpdate(v,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var A=o.updateQueue;A!==null&&sE(o,A,m);break;case 3:var P=o.updateQueue;if(P!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}sE(o,P,h)}break;case 5:var R=o.stateNode;if(h===null&&o.flags&4){h=R;var N=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&h.focus();break;case"img":N.src&&(h.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var H=o.alternate;if(H!==null){var K=H.memoizedState;if(K!==null){var Q=K.dehydrated;Q!==null&&Dd(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Dn||o.flags&512&&Iw(o)}catch(Y){Me(o,o.return,Y)}}if(o===s){ht=null;break}if(h=o.sibling,h!==null){h.return=o.return,ht=h;break}ht=o.return}}function sC(s){for(;ht!==null;){var o=ht;if(o===s){ht=null;break}var h=o.sibling;if(h!==null){h.return=o.return,ht=h;break}ht=o.return}}function rC(s){for(;ht!==null;){var o=ht;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Hg(4,o)}catch(N){Me(o,h,N)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var v=o.return;try{m.componentDidMount()}catch(N){Me(o,v,N)}}var A=o.return;try{Iw(o)}catch(N){Me(o,A,N)}break;case 5:var P=o.return;try{Iw(o)}catch(N){Me(o,P,N)}}}catch(N){Me(o,o.return,N)}if(o===s){ht=null;break}var R=o.sibling;if(R!==null){R.return=o.return,ht=R;break}ht=o.return}}var gL=Math.ceil,$g=L.ReactCurrentDispatcher,Bw=L.ReactCurrentOwner,Ki=L.ReactCurrentBatchConfig,Ut=0,on=null,Ue=null,gn=0,vi=0,pu=jo(0),qe=0,tf=null,ul=0,Wg=0,jw=0,ef=null,ei=null,Vw=0,mu=1/0,Ir=null,Gg=!1,zw=null,Wo=null,Xg=!1,Go=null,Yg=0,nf=0,Uw=null,Kg=-1,qg=0;function zn(){return(Ut&6)!==0?Oe():Kg!==-1?Kg:Kg=Oe()}function Xo(s){return(s.mode&1)===0?1:(Ut&2)!==0&&gn!==0?gn&-gn:JD.transition!==null?(qg===0&&(qg=Zb()),qg):(s=qt,s!==0||(s=window.event,s=s===void 0?16:aS(s.type)),s)}function Es(s,o,h,m){if(50<nf)throw nf=0,Uw=null,Error(e(185));Td(s,h,m),((Ut&2)===0||s!==on)&&(s===on&&((Ut&2)===0&&(Wg|=h),qe===4&&Yo(s,gn)),ni(s,m),h===1&&Ut===0&&(o.mode&1)===0&&(mu=Oe()+500,Eg&&zo()))}function ni(s,o){var h=s.callbackNode;JM(s,o);var m=rg(s,s===on?gn:0);if(m===0)h!==null&&Kb(h),s.callbackNode=null,s.callbackPriority=0;else if(o=m&-m,s.callbackPriority!==o){if(h!=null&&Kb(h),o===1)s.tag===0?ZD(aC.bind(null,s)):GS(aC.bind(null,s)),YD(function(){(Ut&6)===0&&zo()}),h=null;else{switch(Jb(m)){case 1:h=Av;break;case 4:h=qb;break;case 16:h=eg;break;case 536870912:h=Qb;break;default:h=eg}h=mC(h,oC.bind(null,s))}s.callbackPriority=o,s.callbackNode=h}}function oC(s,o){if(Kg=-1,qg=0,(Ut&6)!==0)throw Error(e(327));var h=s.callbackNode;if(gu()&&s.callbackNode!==h)return null;var m=rg(s,s===on?gn:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||o)o=Qg(s,m);else{o=m;var v=Ut;Ut|=2;var A=cC();(on!==s||gn!==o)&&(Ir=null,mu=Oe()+500,dl(s,o));do try{wL();break}catch(R){lC(s,R)}while(!0);ow(),$g.current=A,Ut=v,Ue!==null?o=0:(on=null,gn=0,o=qe)}if(o!==0){if(o===2&&(v=bv(s),v!==0&&(m=v,o=Hw(s,v))),o===1)throw h=tf,dl(s,0),Yo(s,m),ni(s,Oe()),h;if(o===6)Yo(s,m);else{if(v=s.current.alternate,(m&30)===0&&!yL(v)&&(o=Qg(s,m),o===2&&(A=bv(s),A!==0&&(m=A,o=Hw(s,A))),o===1))throw h=tf,dl(s,0),Yo(s,m),ni(s,Oe()),h;switch(s.finishedWork=v,s.finishedLanes=m,o){case 0:case 1:throw Error(e(345));case 2:fl(s,ei,Ir);break;case 3:if(Yo(s,m),(m&130023424)===m&&(o=Vw+500-Oe(),10<o)){if(rg(s,0)!==0)break;if(v=s.suspendedLanes,(v&m)!==m){zn(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=Kv(fl.bind(null,s,ei,Ir),o);break}fl(s,ei,Ir);break;case 4:if(Yo(s,m),(m&4194240)===m)break;for(o=s.eventTimes,v=-1;0<m;){var P=31-vs(m);A=1<<P,P=o[P],P>v&&(v=P),m&=~A}if(m=v,m=Oe()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*gL(m/1960))-m,10<m){s.timeoutHandle=Kv(fl.bind(null,s,ei,Ir),m);break}fl(s,ei,Ir);break;case 5:fl(s,ei,Ir);break;default:throw Error(e(329))}}}return ni(s,Oe()),s.callbackNode===h?oC.bind(null,s):null}function Hw(s,o){var h=ef;return s.current.memoizedState.isDehydrated&&(dl(s,o).flags|=256),s=Qg(s,o),s!==2&&(o=ei,ei=h,o!==null&&$w(o)),s}function $w(s){ei===null?ei=s:ei.push.apply(ei,s)}function yL(s){for(var o=s;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var v=h[m],A=v.getSnapshot;v=v.value;try{if(!ws(A(),v))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Yo(s,o){for(o&=~jw,o&=~Wg,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var h=31-vs(o),m=1<<h;s[h]=-1,o&=~m}}function aC(s){if((Ut&6)!==0)throw Error(e(327));gu();var o=rg(s,0);if((o&1)===0)return ni(s,Oe()),null;var h=Qg(s,o);if(s.tag!==0&&h===2){var m=bv(s);m!==0&&(o=m,h=Hw(s,m))}if(h===1)throw h=tf,dl(s,0),Yo(s,o),ni(s,Oe()),h;if(h===6)throw Error(e(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,fl(s,ei,Ir),ni(s,Oe()),null}function Ww(s,o){var h=Ut;Ut|=1;try{return s(o)}finally{Ut=h,Ut===0&&(mu=Oe()+500,Eg&&zo())}}function hl(s){Go!==null&&Go.tag===0&&(Ut&6)===0&&gu();var o=Ut;Ut|=1;var h=Ki.transition,m=qt;try{if(Ki.transition=null,qt=1,s)return s()}finally{qt=m,Ki.transition=h,Ut=o,(Ut&6)===0&&zo()}}function Gw(){vi=pu.current,ye(pu)}function dl(s,o){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,XD(h)),Ue!==null)for(h=Ue.return;h!==null;){var m=h;switch(ew(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&bg();break;case 3:hu(),ye(Zn),ye(Pn),pw();break;case 5:dw(m);break;case 4:hu();break;case 13:ye(Se);break;case 19:ye(Se);break;case 10:aw(m.type._context);break;case 22:case 23:Gw()}h=h.return}if(on=s,Ue=s=Ko(s.current,null),gn=vi=o,qe=0,tf=null,jw=Wg=ul=0,ei=ef=null,al!==null){for(o=0;o<al.length;o++)if(h=al[o],m=h.interleaved,m!==null){h.interleaved=null;var v=m.next,A=h.pending;if(A!==null){var P=A.next;A.next=v,m.next=P}h.pending=m}al=null}return s}function lC(s,o){do{var h=Ue;try{if(ow(),Fg.current=Bg,Ig){for(var m=Ee.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}Ig=!1}if(cl=0,rn=Ke=Ee=null,Yd=!1,Kd=0,Bw.current=null,h===null||h.return===null){qe=1,tf=o,Ue=null;break}t:{var A=s,P=h.return,R=h,N=o;if(o=gn,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var H=N,K=R,Q=K.tag;if((K.mode&1)===0&&(Q===0||Q===11||Q===15)){var Y=K.alternate;Y?(K.updateQueue=Y.updateQueue,K.memoizedState=Y.memoizedState,K.lanes=Y.lanes):(K.updateQueue=null,K.memoizedState=null)}var at=RE(P);if(at!==null){at.flags&=-257,FE(at,P,R,A,o),at.mode&1&&LE(A,H,o),o=at,N=H;var dt=o.updateQueue;if(dt===null){var pt=new Set;pt.add(N),o.updateQueue=pt}else dt.add(N);break t}else{if((o&1)===0){LE(A,H,o),Xw();break t}N=Error(e(426))}}else if(we&&R.mode&1){var Be=RE(P);if(Be!==null){(Be.flags&65536)===0&&(Be.flags|=256),FE(Be,P,R,A,o),sw(du(N,R));break t}}A=N=du(N,R),qe!==4&&(qe=2),ef===null?ef=[A]:ef.push(A),A=P;do{switch(A.tag){case 3:A.flags|=65536,o&=-o,A.lanes|=o;var V=ME(A,N,o);iE(A,V);break t;case 1:R=N;var O=A.type,z=A.stateNode;if((A.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Wo===null||!Wo.has(z)))){A.flags|=65536,o&=-o,A.lanes|=o;var nt=DE(A,R,o);iE(A,nt);break t}}A=A.return}while(A!==null)}hC(h)}catch(gt){o=gt,Ue===h&&h!==null&&(Ue=h=h.return);continue}break}while(!0)}function cC(){var s=$g.current;return $g.current=Bg,s===null?Bg:s}function Xw(){(qe===0||qe===3||qe===2)&&(qe=4),on===null||(ul&268435455)===0&&(Wg&268435455)===0||Yo(on,gn)}function Qg(s,o){var h=Ut;Ut|=2;var m=cC();(on!==s||gn!==o)&&(Ir=null,dl(s,o));do try{vL();break}catch(v){lC(s,v)}while(!0);if(ow(),Ut=h,$g.current=m,Ue!==null)throw Error(e(261));return on=null,gn=0,qe}function vL(){for(;Ue!==null;)uC(Ue)}function wL(){for(;Ue!==null&&!$M();)uC(Ue)}function uC(s){var o=pC(s.alternate,s,vi);s.memoizedProps=s.pendingProps,o===null?hC(s):Ue=o,Bw.current=null}function hC(s){var o=s;do{var h=o.alternate;if(s=o.return,(o.flags&32768)===0){if(h=hL(h,o,vi),h!==null){Ue=h;return}}else{if(h=dL(h,o),h!==null){h.flags&=32767,Ue=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{qe=6,Ue=null;return}}if(o=o.sibling,o!==null){Ue=o;return}Ue=o=s}while(o!==null);qe===0&&(qe=5)}function fl(s,o,h){var m=qt,v=Ki.transition;try{Ki.transition=null,qt=1,xL(s,o,h,m)}finally{Ki.transition=v,qt=m}return null}function xL(s,o,h,m){do gu();while(Go!==null);if((Ut&6)!==0)throw Error(e(327));h=s.finishedWork;var v=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(e(177));s.callbackNode=null,s.callbackPriority=0;var A=h.lanes|h.childLanes;if(tD(s,A),s===on&&(Ue=on=null,gn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Xg||(Xg=!0,mC(eg,function(){return gu(),null})),A=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||A){A=Ki.transition,Ki.transition=null;var P=qt;qt=1;var R=Ut;Ut|=4,Bw.current=null,pL(s,h),eC(h,s),VD(Xv),lg=!!Gv,Xv=Gv=null,s.current=h,mL(h),WM(),Ut=R,qt=P,Ki.transition=A}else s.current=h;if(Xg&&(Xg=!1,Go=s,Yg=v),A=s.pendingLanes,A===0&&(Wo=null),YM(h.stateNode),ni(s,Oe()),o!==null)for(m=s.onRecoverableError,h=0;h<o.length;h++)v=o[h],m(v.value,{componentStack:v.stack,digest:v.digest});if(Gg)throw Gg=!1,s=zw,zw=null,s;return(Yg&1)!==0&&s.tag!==0&&gu(),A=s.pendingLanes,(A&1)!==0?s===Uw?nf++:(nf=0,Uw=s):nf=0,zo(),null}function gu(){if(Go!==null){var s=Jb(Yg),o=Ki.transition,h=qt;try{if(Ki.transition=null,qt=16>s?16:s,Go===null)var m=!1;else{if(s=Go,Go=null,Yg=0,(Ut&6)!==0)throw Error(e(331));var v=Ut;for(Ut|=4,ht=s.current;ht!==null;){var A=ht,P=A.child;if((ht.flags&16)!==0){var R=A.deletions;if(R!==null){for(var N=0;N<R.length;N++){var H=R[N];for(ht=H;ht!==null;){var K=ht;switch(K.tag){case 0:case 11:case 15:Jd(8,K,A)}var Q=K.child;if(Q!==null)Q.return=K,ht=Q;else for(;ht!==null;){K=ht;var Y=K.sibling,at=K.return;if(qE(K),K===H){ht=null;break}if(Y!==null){Y.return=at,ht=Y;break}ht=at}}}var dt=A.alternate;if(dt!==null){var pt=dt.child;if(pt!==null){dt.child=null;do{var Be=pt.sibling;pt.sibling=null,pt=Be}while(pt!==null)}}ht=A}}if((A.subtreeFlags&2064)!==0&&P!==null)P.return=A,ht=P;else t:for(;ht!==null;){if(A=ht,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Jd(9,A,A.return)}var V=A.sibling;if(V!==null){V.return=A.return,ht=V;break t}ht=A.return}}var O=s.current;for(ht=O;ht!==null;){P=ht;var z=P.child;if((P.subtreeFlags&2064)!==0&&z!==null)z.return=P,ht=z;else t:for(P=O;ht!==null;){if(R=ht,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Hg(9,R)}}catch(gt){Me(R,R.return,gt)}if(R===P){ht=null;break t}var nt=R.sibling;if(nt!==null){nt.return=R.return,ht=nt;break t}ht=R.return}}if(Ut=v,zo(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(ng,s)}catch{}m=!0}return m}finally{qt=h,Ki.transition=o}}return!1}function dC(s,o,h){o=du(h,o),o=ME(s,o,1),s=Ho(s,o,1),o=zn(),s!==null&&(Td(s,1,o),ni(s,o))}function Me(s,o,h){if(s.tag===3)dC(s,s,h);else for(;o!==null;){if(o.tag===3){dC(o,s,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Wo===null||!Wo.has(m))){s=du(h,s),s=DE(o,s,1),o=Ho(o,s,1),s=zn(),o!==null&&(Td(o,1,s),ni(o,s));break}}o=o.return}}function AL(s,o,h){var m=s.pingCache;m!==null&&m.delete(o),o=zn(),s.pingedLanes|=s.suspendedLanes&h,on===s&&(gn&h)===h&&(qe===4||qe===3&&(gn&130023424)===gn&&500>Oe()-Vw?dl(s,0):jw|=h),ni(s,o)}function fC(s,o){o===0&&((s.mode&1)===0?o=1:(o=sg,sg<<=1,(sg&130023424)===0&&(sg=4194304)));var h=zn();s=Lr(s,o),s!==null&&(Td(s,o,h),ni(s,h))}function bL(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),fC(s,h)}function SL(s,o){var h=0;switch(s.tag){case 13:var m=s.stateNode,v=s.memoizedState;v!==null&&(h=v.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(e(314))}m!==null&&m.delete(o),fC(s,h)}var pC;pC=function(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps||Zn.current)ti=!0;else{if((s.lanes&h)===0&&(o.flags&128)===0)return ti=!1,uL(s,o,h);ti=(s.flags&131072)!==0}else ti=!1,we&&(o.flags&1048576)!==0&&XS(o,Tg,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;zg(s,o),s=o.pendingProps;var v=su(o,Pn.current);uu(o,h),v=yw(null,o,m,s,v,h);var A=vw();return o.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Jn(m)?(A=!0,Sg(o)):A=!1,o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,uw(o),v.updater=jg,o.stateNode=v,v._reactInternals=o,Ew(o,m,s,h),o=Pw(null,o,m,!0,A,h)):(o.tag=0,we&&A&&tw(o),Vn(null,o,v,h),o=o.child),o;case 16:m=o.elementType;t:{switch(zg(s,o),s=o.pendingProps,v=m._init,m=v(m._payload),o.type=m,v=o.tag=CL(m),s=As(m,s),v){case 0:o=kw(null,o,m,s,h);break t;case 1:o=VE(null,o,m,s,h);break t;case 11:o=IE(null,o,m,s,h);break t;case 14:o=NE(null,o,m,As(m.type,s),h);break t}throw Error(e(306,m,""))}return o;case 0:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:As(m,v),kw(s,o,m,v,h);case 1:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:As(m,v),VE(s,o,m,v,h);case 3:t:{if(zE(o),s===null)throw Error(e(387));m=o.pendingProps,A=o.memoizedState,v=A.element,nE(s,o),Lg(o,m,null,h);var P=o.memoizedState;if(m=P.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){v=du(Error(e(423)),o),o=UE(s,o,m,h,v);break t}else if(m!==v){v=du(Error(e(424)),o),o=UE(s,o,m,h,v);break t}else for(yi=Bo(o.stateNode.containerInfo.firstChild),gi=o,we=!0,xs=null,h=tE(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(au(),m===v){o=Fr(s,o,h);break t}Vn(s,o,m,h)}o=o.child}return o;case 5:return rE(o),s===null&&iw(o),m=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,P=v.children,Yv(m,v)?P=null:A!==null&&Yv(m,A)&&(o.flags|=32),jE(s,o),Vn(s,o,P,h),o.child;case 6:return s===null&&iw(o),null;case 13:return HE(s,o,h);case 4:return hw(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=lu(o,null,m,h):Vn(s,o,m,h),o.child;case 11:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:As(m,v),IE(s,o,m,v,h);case 7:return Vn(s,o,o.pendingProps,h),o.child;case 8:return Vn(s,o,o.pendingProps.children,h),o.child;case 12:return Vn(s,o,o.pendingProps.children,h),o.child;case 10:t:{if(m=o.type._context,v=o.pendingProps,A=o.memoizedProps,P=v.value,he(_g,m._currentValue),m._currentValue=P,A!==null)if(ws(A.value,P)){if(A.children===v.children&&!Zn.current){o=Fr(s,o,h);break t}}else for(A=o.child,A!==null&&(A.return=o);A!==null;){var R=A.dependencies;if(R!==null){P=A.child;for(var N=R.firstContext;N!==null;){if(N.context===m){if(A.tag===1){N=Rr(-1,h&-h),N.tag=2;var H=A.updateQueue;if(H!==null){H=H.shared;var K=H.pending;K===null?N.next=N:(N.next=K.next,K.next=N),H.pending=N}}A.lanes|=h,N=A.alternate,N!==null&&(N.lanes|=h),lw(A.return,h,o),R.lanes|=h;break}N=N.next}}else if(A.tag===10)P=A.type===o.type?null:A.child;else if(A.tag===18){if(P=A.return,P===null)throw Error(e(341));P.lanes|=h,R=P.alternate,R!==null&&(R.lanes|=h),lw(P,h,o),P=A.sibling}else P=A.child;if(P!==null)P.return=A;else for(P=A;P!==null;){if(P===o){P=null;break}if(A=P.sibling,A!==null){A.return=P.return,P=A;break}P=P.return}A=P}Vn(s,o,v.children,h),o=o.child}return o;case 9:return v=o.type,m=o.pendingProps.children,uu(o,h),v=Xi(v),m=m(v),o.flags|=1,Vn(s,o,m,h),o.child;case 14:return m=o.type,v=As(m,o.pendingProps),v=As(m.type,v),NE(s,o,m,v,h);case 15:return OE(s,o,o.type,o.pendingProps,h);case 17:return m=o.type,v=o.pendingProps,v=o.elementType===m?v:As(m,v),zg(s,o),o.tag=1,Jn(m)?(s=!0,Sg(o)):s=!1,uu(o,h),PE(o,m,v),Ew(o,m,v,h),Pw(null,o,m,!0,s,h);case 19:return WE(s,o,h);case 22:return BE(s,o,h)}throw Error(e(156,o.tag))};function mC(s,o){return Yb(s,o)}function EL(s,o,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(s,o,h,m){return new EL(s,o,h,m)}function Yw(s){return s=s.prototype,!(!s||!s.isReactComponent)}function CL(s){if(typeof s=="function")return Yw(s)?1:0;if(s!=null){if(s=s.$$typeof,s===vt)return 11;if(s===At)return 14}return 2}function Ko(s,o){var h=s.alternate;return h===null?(h=qi(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function Zg(s,o,h,m,v,A){var P=2;if(m=s,typeof s=="function")Yw(s)&&(P=1);else if(typeof s=="string")P=5;else t:switch(s){case j:return pl(h.children,v,A,o);case U:P=8,v|=8;break;case G:return s=qi(12,h,o,v|2),s.elementType=G,s.lanes=A,s;case wt:return s=qi(13,h,o,v),s.elementType=wt,s.lanes=A,s;case yt:return s=qi(19,h,o,v),s.elementType=yt,s.lanes=A,s;case tt:return Jg(h,v,A,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case q:P=10;break t;case J:P=9;break t;case vt:P=11;break t;case At:P=14;break t;case ot:P=16,m=null;break t}throw Error(e(130,s==null?s:typeof s,""))}return o=qi(P,h,o,v),o.elementType=s,o.type=m,o.lanes=A,o}function pl(s,o,h,m){return s=qi(7,s,m,o),s.lanes=h,s}function Jg(s,o,h,m){return s=qi(22,s,m,o),s.elementType=tt,s.lanes=h,s.stateNode={isHidden:!1},s}function Kw(s,o,h){return s=qi(6,s,null,o),s.lanes=h,s}function qw(s,o,h){return o=qi(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function TL(s,o,h,m,v){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sv(0),this.expirationTimes=Sv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sv(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Qw(s,o,h,m,v,A,P,R,N){return s=new TL(s,o,h,R,N),o===1?(o=1,A===!0&&(o|=8)):o=0,A=qi(3,null,null,o),s.current=A,A.stateNode=s,A.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},uw(A),s}function kL(s,o,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:m==null?null:""+m,children:s,containerInfo:o,implementation:h}}function gC(s){if(!s)return Vo;s=s._reactInternals;t:{if(nl(s)!==s||s.tag!==1)throw Error(e(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Jn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(e(171))}if(s.tag===1){var h=s.type;if(Jn(h))return $S(s,h,o)}return o}function yC(s,o,h,m,v,A,P,R,N){return s=Qw(h,m,!0,s,v,A,P,R,N),s.context=gC(null),h=s.current,m=zn(),v=Xo(h),A=Rr(m,v),A.callback=o??null,Ho(h,A,v),s.current.lanes=v,Td(s,v,m),ni(s,m),s}function ty(s,o,h,m){var v=o.current,A=zn(),P=Xo(v);return h=gC(h),o.context===null?o.context=h:o.pendingContext=h,o=Rr(A,P),o.payload={element:s},m=m===void 0?null:m,m!==null&&(o.callback=m),s=Ho(v,o,P),s!==null&&(Es(s,v,P,A),Dg(s,v,P)),P}function ey(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function vC(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function Zw(s,o){vC(s,o),(s=s.alternate)&&vC(s,o)}function PL(){return null}var wC=typeof reportError=="function"?reportError:function(s){console.error(s)};function Jw(s){this._internalRoot=s}ny.prototype.render=Jw.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(e(409));ty(s,o,null,null)},ny.prototype.unmount=Jw.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;hl(function(){ty(null,s,null,null)}),o[Pr]=null}};function ny(s){this._internalRoot=s}ny.prototype.unstable_scheduleHydration=function(s){if(s){var o=nS();s={blockedOn:null,target:s,priority:o};for(var h=0;h<Io.length&&o!==0&&o<Io[h].priority;h++);Io.splice(h,0,s),h===0&&rS(s)}};function t1(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function iy(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function xC(){}function _L(s,o,h,m,v){if(v){if(typeof m=="function"){var A=m;m=function(){var H=ey(P);A.call(H)}}var P=yC(o,m,s,0,null,!1,!1,"",xC);return s._reactRootContainer=P,s[Pr]=P.current,Vd(s.nodeType===8?s.parentNode:s),hl(),P}for(;v=s.lastChild;)s.removeChild(v);if(typeof m=="function"){var R=m;m=function(){var H=ey(N);R.call(H)}}var N=Qw(s,0,!1,null,null,!1,!1,"",xC);return s._reactRootContainer=N,s[Pr]=N.current,Vd(s.nodeType===8?s.parentNode:s),hl(function(){ty(o,N,h,m)}),N}function sy(s,o,h,m,v){var A=h._reactRootContainer;if(A){var P=A;if(typeof v=="function"){var R=v;v=function(){var N=ey(P);R.call(N)}}ty(o,P,s,v)}else P=_L(h,o,s,v,m);return ey(P)}tS=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var h=Cd(o.pendingLanes);h!==0&&(Ev(o,h|1),ni(o,Oe()),(Ut&6)===0&&(mu=Oe()+500,zo()))}break;case 13:hl(function(){var m=Lr(s,1);if(m!==null){var v=zn();Es(m,s,1,v)}}),Zw(s,1)}},Cv=function(s){if(s.tag===13){var o=Lr(s,134217728);if(o!==null){var h=zn();Es(o,s,134217728,h)}Zw(s,134217728)}},eS=function(s){if(s.tag===13){var o=Xo(s),h=Lr(s,o);if(h!==null){var m=zn();Es(h,s,o,m)}Zw(s,o)}},nS=function(){return qt},iS=function(s,o){var h=qt;try{return qt=s,o()}finally{qt=h}},yv=function(s,o,h){switch(o){case"input":if(cv(s,h),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==s&&m.form===s.form){var v=Ag(m);if(!v)throw Error(e(90));Wc(m),cv(m,v)}}}break;case"textarea":Lb(s,h);break;case"select":o=h.value,o!=null&&Gc(s,!!h.multiple,o,!1)}},zb=Ww,Ub=hl;var ML={usingClientEntryPoint:!1,Events:[Hd,nu,Ag,jb,Vb,Ww]},sf={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DL={bundleType:sf.bundleType,version:sf.version,rendererPackageName:sf.rendererPackageName,rendererConfig:sf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Gb(s),s===null?null:s.stateNode},findFiberByHostInstance:sf.findFiberByHostInstance||PL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ry.isDisabled&&ry.supportsFiber)try{ng=ry.inject(DL),Ws=ry}catch{}}return ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ML,ii.createPortal=function(s,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t1(o))throw Error(e(200));return kL(s,o,null,h)},ii.createRoot=function(s,o){if(!t1(s))throw Error(e(299));var h=!1,m="",v=wC;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(v=o.onRecoverableError)),o=Qw(s,1,!1,null,null,h,!1,m,v),s[Pr]=o.current,Vd(s.nodeType===8?s.parentNode:s),new Jw(o)},ii.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(e(188)):(s=Object.keys(s).join(","),Error(e(268,s)));return s=Gb(o),s=s===null?null:s.stateNode,s},ii.flushSync=function(s){return hl(s)},ii.hydrate=function(s,o,h){if(!iy(o))throw Error(e(200));return sy(null,s,o,!0,h)},ii.hydrateRoot=function(s,o,h){if(!t1(s))throw Error(e(405));var m=h!=null&&h.hydratedSources||null,v=!1,A="",P=wC;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),o=yC(o,null,s,1,h??null,v,!1,A,P),s[Pr]=o.current,Vd(s),m)for(s=0;s<m.length;s++)h=m[s],v=h._getVersion,v=v(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,v]:o.mutableSourceEagerHydrationData.push(h,v);return new ny(o)},ii.render=function(s,o,h){if(!iy(o))throw Error(e(200));return sy(null,s,o,!1,h)},ii.unmountComponentAtNode=function(s){if(!iy(s))throw Error(e(40));return s._reactRootContainer?(hl(function(){sy(null,null,s,!1,function(){s._reactRootContainer=null,s[Pr]=null})}),!0):!1},ii.unstable_batchedUpdates=Ww,ii.unstable_renderSubtreeIntoContainer=function(s,o,h,m){if(!iy(h))throw Error(e(200));if(s==null||s._reactInternals===void 0)throw Error(e(38));return sy(s,o,h,!1,m)},ii.version="18.3.1-next-f1338f8080-20240426",ii}var _C;function zL(){if(_C)return s1.exports;_C=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),s1.exports=VL(),s1.exports}var MC;function UL(){if(MC)return oy;MC=1;var r=zL();return oy.createRoot=r.createRoot,oy.hydrateRoot=r.hydrateRoot,oy}var HL=UL(),Z=RA();const FA=Z.createContext({});function IA(r){const t=Z.useRef(null);return t.current===null&&(t.current=r()),t.current}const Ck=typeof window<"u",Tk=Ck?Z.useLayoutEffect:Z.useEffect,X0=Z.createContext(null);function NA(r,t){r.indexOf(t)===-1&&r.push(t)}function a0(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const Er=(r,t,e)=>e>t?t:e<r?r:e;let OA=()=>{};const Po={},kk=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function Pk(r){return typeof r=="object"&&r!==null}const _k=r=>/^0[^.\s]+$/u.test(r);function Mk(r){let t;return()=>(t===void 0&&(t=r()),t)}const ms=r=>r,$L=(r,t)=>e=>t(r(e)),Hm=(...r)=>r.reduce($L),Bf=(r,t,e)=>{const n=t-r;return n===0?1:(e-r)/n};class BA{constructor(){this.subscriptions=[]}add(t){return NA(this.subscriptions,t),()=>a0(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,n);else for(let a=0;a<i;a++){const c=this.subscriptions[a];c&&c(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Us=r=>r*1e3,ps=r=>r/1e3;function Dk(r,t){return t?r*(1e3/t):0}const Lk=(r,t,e)=>(((1-3*e+3*t)*r+(3*e-6*t))*r+3*t)*r,WL=1e-7,GL=12;function XL(r,t,e,n,i){let a,c,u=0;do c=t+(e-t)/2,a=Lk(c,n,i)-r,a>0?e=c:t=c;while(Math.abs(a)>WL&&++u<GL);return c}function $m(r,t,e,n){if(r===t&&e===n)return ms;const i=a=>XL(a,0,1,r,e);return a=>a===0||a===1?a:Lk(i(a),t,n)}const Rk=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,Fk=r=>t=>1-r(1-t),Ik=$m(.33,1.53,.69,.99),jA=Fk(Ik),Nk=Rk(jA),Ok=r=>(r*=2)<1?.5*jA(r):.5*(2-Math.pow(2,-10*(r-1))),VA=r=>1-Math.sin(Math.acos(r)),Bk=Fk(VA),jk=Rk(VA),YL=$m(.42,0,1,1),KL=$m(0,0,.58,1),Vk=$m(.42,0,.58,1),qL=r=>Array.isArray(r)&&typeof r[0]!="number",zk=r=>Array.isArray(r)&&typeof r[0]=="number",QL={linear:ms,easeIn:YL,easeInOut:Vk,easeOut:KL,circIn:VA,circInOut:jk,circOut:Bk,backIn:jA,backInOut:Nk,backOut:Ik,anticipate:Ok},ZL=r=>typeof r=="string",DC=r=>{if(zk(r)){OA(r.length===4);const[t,e,n,i]=r;return $m(t,e,n,i)}else if(ZL(r))return QL[r];return r},ay=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function JL(r,t){let e=new Set,n=new Set,i=!1,a=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(p){c.has(p)&&(f.schedule(p),r()),p(u)}const f={schedule:(p,g=!1,y=!1)=>{const S=y&&i?e:n;return g&&c.add(p),S.has(p)||S.add(p),p},cancel:p=>{n.delete(p),c.delete(p)},process:p=>{if(u=p,i){a=!0;return}i=!0,[e,n]=[n,e],e.forEach(d),e.clear(),i=!1,a&&(a=!1,f.process(p))}};return f}const tR=40;function Uk(r,t){let e=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,c=ay.reduce((_,L)=>(_[L]=JL(a),_),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:p,update:g,preRender:y,render:w,postRender:S}=c,E=()=>{const _=Po.useManualTiming?i.timestamp:performance.now();e=!1,Po.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(_-i.timestamp,tR),1)),i.timestamp=_,i.isProcessing=!0,u.process(i),d.process(i),f.process(i),p.process(i),g.process(i),y.process(i),w.process(i),S.process(i),i.isProcessing=!1,e&&t&&(n=!1,r(E))},C=()=>{e=!0,n=!0,i.isProcessing||r(E)};return{schedule:ay.reduce((_,L)=>{const D=c[L];return _[L]=(F,j=!1,U=!1)=>(e||C(),D.schedule(F,j,U)),_},{}),cancel:_=>{for(let L=0;L<ay.length;L++)c[ay[L]].cancel(_)},state:i,steps:c}}const{schedule:me,cancel:qa,state:Sn,steps:a1}=Uk(typeof requestAnimationFrame<"u"?requestAnimationFrame:ms,!0);let xy;function eR(){xy=void 0}const Yn={now:()=>(xy===void 0&&Yn.set(Sn.isProcessing||Po.useManualTiming?Sn.timestamp:performance.now()),xy),set:r=>{xy=r,queueMicrotask(eR)}},Hk=r=>t=>typeof t=="string"&&t.startsWith(r),$k=Hk("--"),nR=Hk("var(--"),zA=r=>nR(r)?iR.test(r.split("/*")[0].trim()):!1,iR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function LC(r){return typeof r!="string"?!1:r.split("/*")[0].includes("var(--")}const md={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},jf={...md,transform:r=>Er(0,1,r)},ly={...md,default:1},Ff=r=>Math.round(r*1e5)/1e5,UA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function sR(r){return r==null}const rR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,HA=(r,t)=>e=>!!(typeof e=="string"&&rR.test(e)&&e.startsWith(r)||t&&!sR(e)&&Object.prototype.hasOwnProperty.call(e,t)),Wk=(r,t,e)=>n=>{if(typeof n!="string")return n;const[i,a,c,u]=n.match(UA);return{[r]:parseFloat(i),[t]:parseFloat(a),[e]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},oR=r=>Er(0,255,r),l1={...md,transform:r=>Math.round(oR(r))},Sl={test:HA("rgb","red"),parse:Wk("red","green","blue"),transform:({red:r,green:t,blue:e,alpha:n=1})=>"rgba("+l1.transform(r)+", "+l1.transform(t)+", "+l1.transform(e)+", "+Ff(jf.transform(n))+")"};function aR(r){let t="",e="",n="",i="";return r.length>5?(t=r.substring(1,3),e=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(t=r.substring(1,2),e=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),t+=t,e+=e,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const R1={test:HA("#"),parse:aR,transform:Sl.transform},Wm=r=>({test:t=>typeof t=="string"&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),Qo=Wm("deg"),Sr=Wm("%"),ft=Wm("px"),lR=Wm("vh"),cR=Wm("vw"),RC={...Sr,parse:r=>Sr.parse(r)/100,transform:r=>Sr.transform(r*100)},ku={test:HA("hsl","hue"),parse:Wk("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(r)+", "+Sr.transform(Ff(t))+", "+Sr.transform(Ff(e))+", "+Ff(jf.transform(n))+")"},Ge={test:r=>Sl.test(r)||R1.test(r)||ku.test(r),parse:r=>Sl.test(r)?Sl.parse(r):ku.test(r)?ku.parse(r):R1.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Sl.transform(r):ku.transform(r),getAnimatableNone:r=>{const t=Ge.parse(r);return t.alpha=0,Ge.transform(t)}},uR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hR(r){var t,e;return isNaN(r)&&typeof r=="string"&&(((t=r.match(UA))==null?void 0:t.length)||0)+(((e=r.match(uR))==null?void 0:e.length)||0)>0}const Gk="number",Xk="color",dR="var",fR="var(",FC="${}",pR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vf(r){const t=r.toString(),e=[],n={color:[],number:[],var:[]},i=[];let a=0;const u=t.replace(pR,d=>(Ge.test(d)?(n.color.push(a),i.push(Xk),e.push(Ge.parse(d))):d.startsWith(fR)?(n.var.push(a),i.push(dR),e.push(d)):(n.number.push(a),i.push(Gk),e.push(parseFloat(d))),++a,FC)).split(FC);return{values:e,split:u,indexes:n,types:i}}function Yk(r){return Vf(r).values}function Kk(r){const{split:t,types:e}=Vf(r),n=t.length;return i=>{let a="";for(let c=0;c<n;c++)if(a+=t[c],i[c]!==void 0){const u=e[c];u===Gk?a+=Ff(i[c]):u===Xk?a+=Ge.transform(i[c]):a+=i[c]}return a}}const mR=r=>typeof r=="number"?0:Ge.test(r)?Ge.getAnimatableNone(r):r;function gR(r){const t=Yk(r);return Kk(r)(t.map(mR))}const Hs={test:hR,parse:Yk,createTransformer:Kk,getAnimatableNone:gR};function c1(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r}function yR({hue:r,saturation:t,lightness:e,alpha:n}){r/=360,t/=100,e/=100;let i=0,a=0,c=0;if(!t)i=a=c=e;else{const u=e<.5?e*(1+t):e+t-e*t,d=2*e-u;i=c1(d,u,r+1/3),a=c1(d,u,r),c=c1(d,u,r-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:n}}function l0(r,t){return e=>e>0?t:r}const Pe=(r,t,e)=>r+(t-r)*e,u1=(r,t,e)=>{const n=r*r,i=e*(t*t-n)+n;return i<0?0:Math.sqrt(i)},vR=[R1,Sl,ku],wR=r=>vR.find(t=>t.test(r));function IC(r){const t=wR(r);if(!t)return!1;let e=t.parse(r);return t===ku&&(e=yR(e)),e}const NC=(r,t)=>{const e=IC(r),n=IC(t);if(!e||!n)return l0(r,t);const i={...e};return a=>(i.red=u1(e.red,n.red,a),i.green=u1(e.green,n.green,a),i.blue=u1(e.blue,n.blue,a),i.alpha=Pe(e.alpha,n.alpha,a),Sl.transform(i))},F1=new Set(["none","hidden"]);function xR(r,t){return F1.has(r)?e=>e<=0?r:t:e=>e>=1?t:r}function AR(r,t){return e=>Pe(r,t,e)}function $A(r){return typeof r=="number"?AR:typeof r=="string"?zA(r)?l0:Ge.test(r)?NC:ER:Array.isArray(r)?qk:typeof r=="object"?Ge.test(r)?NC:bR:l0}function qk(r,t){const e=[...r],n=e.length,i=r.map((a,c)=>$A(a)(a,t[c]));return a=>{for(let c=0;c<n;c++)e[c]=i[c](a);return e}}function bR(r,t){const e={...r,...t},n={};for(const i in e)r[i]!==void 0&&t[i]!==void 0&&(n[i]=$A(r[i])(r[i],t[i]));return i=>{for(const a in n)e[a]=n[a](i);return e}}function SR(r,t){const e=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],c=r.indexes[a][n[a]],u=r.values[c]??0;e[i]=u,n[a]++}return e}const ER=(r,t)=>{const e=Hs.createTransformer(t),n=Vf(r),i=Vf(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?F1.has(r)&&!i.values.length||F1.has(t)&&!n.values.length?xR(r,t):Hm(qk(SR(n,i),i.values),e):l0(r,t)};function Qk(r,t,e){return typeof r=="number"&&typeof t=="number"&&typeof e=="number"?Pe(r,t,e):$A(r)(r,t)}const CR=r=>{const t=({timestamp:e})=>r(e);return{start:(e=!0)=>me.update(t,e),stop:()=>qa(t),now:()=>Sn.isProcessing?Sn.timestamp:Yn.now()}},Zk=(r,t,e=10)=>{let n="";const i=Math.max(Math.round(t/e),2);for(let a=0;a<i;a++)n+=Math.round(r(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},c0=2e4;function WA(r){let t=0;const e=50;let n=r.next(t);for(;!n.done&&t<c0;)t+=e,n=r.next(t);return t>=c0?1/0:t}function TR(r,t=100,e){const n=e({...r,keyframes:[0,t]}),i=Math.min(WA(n),c0);return{type:"keyframes",ease:a=>n.next(i*a).value/t,duration:ps(i)}}const kR=5;function Jk(r,t,e){const n=Math.max(t-kR,0);return Dk(e-r(n),t-n)}const Fe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},h1=.001;function PR({duration:r=Fe.duration,bounce:t=Fe.bounce,velocity:e=Fe.velocity,mass:n=Fe.mass}){let i,a,c=1-t;c=Er(Fe.minDamping,Fe.maxDamping,c),r=Er(Fe.minDuration,Fe.maxDuration,ps(r)),c<1?(i=f=>{const p=f*c,g=p*r,y=p-e,w=I1(f,c),S=Math.exp(-g);return h1-y/w*S},a=f=>{const g=f*c*r,y=g*e+e,w=Math.pow(c,2)*Math.pow(f,2)*r,S=Math.exp(-g),E=I1(Math.pow(f,2),c);return(-i(f)+h1>0?-1:1)*((y-w)*S)/E}):(i=f=>{const p=Math.exp(-f*r),g=(f-e)*r+1;return-h1+p*g},a=f=>{const p=Math.exp(-f*r),g=(e-f)*(r*r);return p*g});const u=5/r,d=MR(i,a,u);if(r=Us(r),isNaN(d))return{stiffness:Fe.stiffness,damping:Fe.damping,duration:r};{const f=Math.pow(d,2)*n;return{stiffness:f,damping:c*2*Math.sqrt(n*f),duration:r}}}const _R=12;function MR(r,t,e){let n=e;for(let i=1;i<_R;i++)n=n-r(n)/t(n);return n}function I1(r,t){return r*Math.sqrt(1-t*t)}const DR=["duration","bounce"],LR=["stiffness","damping","mass"];function OC(r,t){return t.some(e=>r[e]!==void 0)}function RR(r){let t={velocity:Fe.velocity,stiffness:Fe.stiffness,damping:Fe.damping,mass:Fe.mass,isResolvedFromDuration:!1,...r};if(!OC(r,LR)&&OC(r,DR))if(t.velocity=0,r.visualDuration){const e=r.visualDuration,n=2*Math.PI/(e*1.2),i=n*n,a=2*Er(.05,1,1-(r.bounce||0))*Math.sqrt(i);t={...t,mass:Fe.mass,stiffness:i,damping:a}}else{const e=PR({...r,velocity:0});t={...t,...e,mass:Fe.mass},t.isResolvedFromDuration=!0}return t}function u0(r=Fe.visualDuration,t=Fe.bounce){const e=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:t}:r;let{restSpeed:n,restDelta:i}=e;const a=e.keyframes[0],c=e.keyframes[e.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:p,duration:g,velocity:y,isResolvedFromDuration:w}=RR({...e,velocity:-ps(e.velocity||0)}),S=y||0,E=f/(2*Math.sqrt(d*p)),C=c-a,k=ps(Math.sqrt(d/p)),M=Math.abs(C)<5;n||(n=M?Fe.restSpeed.granular:Fe.restSpeed.default),i||(i=M?Fe.restDelta.granular:Fe.restDelta.default);let _;if(E<1){const D=I1(k,E);_=F=>{const j=Math.exp(-E*k*F);return c-j*((S+E*k*C)/D*Math.sin(D*F)+C*Math.cos(D*F))}}else if(E===1)_=D=>c-Math.exp(-k*D)*(C+(S+k*C)*D);else{const D=k*Math.sqrt(E*E-1);_=F=>{const j=Math.exp(-E*k*F),U=Math.min(D*F,300);return c-j*((S+E*k*C)*Math.sinh(U)+D*C*Math.cosh(U))/D}}const L={calculatedDuration:w&&g||null,next:D=>{const F=_(D);if(w)u.done=D>=g;else{let j=D===0?S:0;E<1&&(j=D===0?Us(S):Jk(_,D,F));const U=Math.abs(j)<=n,G=Math.abs(c-F)<=i;u.done=U&&G}return u.value=u.done?c:F,u},toString:()=>{const D=Math.min(WA(L),c0),F=Zk(j=>L.next(D*j).value,D,30);return D+"ms "+F},toTransition:()=>{}};return L}u0.applyToOptions=r=>{const t=TR(r,100,u0);return r.ease=t.ease,r.duration=Us(t.duration),r.type="keyframes",r};function N1({keyframes:r,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:c,min:u,max:d,restDelta:f=.5,restSpeed:p}){const g=r[0],y={done:!1,value:g},w=U=>u!==void 0&&U<u||d!==void 0&&U>d,S=U=>u===void 0?d:d===void 0||Math.abs(u-U)<Math.abs(d-U)?u:d;let E=e*t;const C=g+E,k=c===void 0?C:c(C);k!==C&&(E=k-g);const M=U=>-E*Math.exp(-U/n),_=U=>k+M(U),L=U=>{const G=M(U),q=_(U);y.done=Math.abs(G)<=f,y.value=y.done?k:q};let D,F;const j=U=>{w(y.value)&&(D=U,F=u0({keyframes:[y.value,S(y.value)],velocity:Jk(_,U,y.value),damping:i,stiffness:a,restDelta:f,restSpeed:p}))};return j(0),{calculatedDuration:null,next:U=>{let G=!1;return!F&&D===void 0&&(G=!0,L(U),j(U)),D!==void 0&&U>=D?F.next(U-D):(!G&&L(U),y)}}}function FR(r,t,e){const n=[],i=e||Po.mix||Qk,a=r.length-1;for(let c=0;c<a;c++){let u=i(r[c],r[c+1]);if(t){const d=Array.isArray(t)?t[c]||ms:t;u=Hm(d,u)}n.push(u)}return n}function IR(r,t,{clamp:e=!0,ease:n,mixer:i}={}){const a=r.length;if(OA(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const c=r[0]===r[1];r[0]>r[a-1]&&(r=[...r].reverse(),t=[...t].reverse());const u=FR(t,n,i),d=u.length,f=p=>{if(c&&p<r[0])return t[0];let g=0;if(d>1)for(;g<r.length-2&&!(p<r[g+1]);g++);const y=Bf(r[g],r[g+1],p);return u[g](y)};return e?p=>f(Er(r[0],r[a-1],p)):f}function NR(r,t){const e=r[r.length-1];for(let n=1;n<=t;n++){const i=Bf(0,t,n);r.push(Pe(e,1,i))}}function OR(r){const t=[0];return NR(t,r.length-1),t}function BR(r,t){return r.map(e=>e*t)}function jR(r,t){return r.map(()=>t||Vk).splice(0,r.length-1)}function If({duration:r=300,keyframes:t,times:e,ease:n="easeInOut"}){const i=qL(n)?n.map(DC):DC(n),a={done:!1,value:t[0]},c=BR(e&&e.length===t.length?e:OR(t),r),u=IR(c,t,{ease:Array.isArray(i)?i:jR(t,i)});return{calculatedDuration:r,next:d=>(a.value=u(d),a.done=d>=r,a)}}const VR=r=>r!==null;function GA(r,{repeat:t,repeatType:e="loop"},n,i=1){const a=r.filter(VR),u=i<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!u||n===void 0?a[u]:n}const zR={decay:N1,inertia:N1,tween:If,keyframes:If,spring:u0};function tP(r){typeof r.type=="string"&&(r.type=zR[r.type])}class XA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const UR=r=>r/100;class YA extends XA{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:e}=this.options;e&&e.updatedAt!==Yn.now()&&this.tick(Yn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;tP(t);const{type:e=If,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:c=0}=t;let{keyframes:u}=t;const d=e||If;d!==If&&typeof u[0]!="number"&&(this.mixKeyframes=Hm(UR,Qk(u[0],u[1])),u=[0,100]);const f=d({...t,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=WA(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:p,repeat:g,repeatType:y,repeatDelay:w,type:S,onUpdate:E,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const k=this.currentTime-f*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?k<0:k>i;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,L=n;if(g){const U=Math.min(this.currentTime,i)/u;let G=Math.floor(U),q=U%1;!q&&U>=1&&(q=1),q===1&&G--,G=Math.min(G,g+1),!!(G%2)&&(y==="reverse"?(q=1-q,w&&(q-=w/u)):y==="mirror"&&(L=c)),_=Er(0,1,q)*u}const D=M?{done:!1,value:p[0]}:L.next(_);a&&(D.value=a(D.value));let{done:F}=D;!M&&d!==null&&(F=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return j&&S!==N1&&(D.value=GA(p,this.options,C,this.speed)),E&&E(D.value),j&&this.finish(),D}then(t,e){return this.finished.then(t,e)}get duration(){return ps(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ps(t)}get time(){return ps(this.currentTime)}set time(t){var e;t=Us(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Yn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ps(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:t=CR,startTime:e}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(a=(i=this.options).onPlay)==null||a.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function HR(r){for(let t=1;t<r.length;t++)r[t]??(r[t]=r[t-1])}const El=r=>r*180/Math.PI,O1=r=>{const t=El(Math.atan2(r[1],r[0]));return B1(t)},$R={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:O1,rotateZ:O1,skewX:r=>El(Math.atan(r[1])),skewY:r=>El(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},B1=r=>(r=r%360,r<0&&(r+=360),r),BC=O1,jC=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),VC=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),WR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:jC,scaleY:VC,scale:r=>(jC(r)+VC(r))/2,rotateX:r=>B1(El(Math.atan2(r[6],r[5]))),rotateY:r=>B1(El(Math.atan2(-r[2],r[0]))),rotateZ:BC,rotate:BC,skewX:r=>El(Math.atan(r[4])),skewY:r=>El(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function j1(r){return r.includes("scale")?1:0}function V1(r,t){if(!r||r==="none")return j1(t);const e=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(e)n=WR,i=e;else{const u=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=$R,i=u}if(!i)return j1(t);const a=n[t],c=i[1].split(",").map(XR);return typeof a=="function"?a(c):c[a]}const GR=(r,t)=>{const{transform:e="none"}=getComputedStyle(r);return V1(e,t)};function XR(r){return parseFloat(r.trim())}const gd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yd=new Set(gd),zC=r=>r===md||r===ft,YR=new Set(["x","y","z"]),KR=gd.filter(r=>!YR.has(r));function qR(r){const t=[];return KR.forEach(e=>{const n=r.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Ka={width:({x:r},{paddingLeft:t="0",paddingRight:e="0"})=>r.max-r.min-parseFloat(t)-parseFloat(e),height:({y:r},{paddingTop:t="0",paddingBottom:e="0"})=>r.max-r.min-parseFloat(t)-parseFloat(e),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:(r,{transform:t})=>V1(t,"x"),y:(r,{transform:t})=>V1(t,"y")};Ka.translateX=Ka.x;Ka.translateY=Ka.y;const Bc=new Set;let z1=!1,U1=!1,H1=!1;function eP(){if(U1){const r=Array.from(Bc).filter(n=>n.needsMeasurement),t=new Set(r.map(n=>n.element)),e=new Map;t.forEach(n=>{const i=qR(n);i.length&&(e.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=e.get(n);i&&i.forEach(([a,c])=>{var u;(u=n.getValue(a))==null||u.set(c)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}U1=!1,z1=!1,Bc.forEach(r=>r.complete(H1)),Bc.clear()}function nP(){Bc.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(U1=!0)})}function QR(){H1=!0,nP(),eP(),H1=!1}class KA{constructor(t,e,n,i,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Bc.add(this),z1||(z1=!0,me.read(nP),me.resolveKeyframes(eP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;if(t[0]===null){const a=i==null?void 0:i.get(),c=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const u=n.readValue(e,c);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=c),i&&a===void 0&&i.set(t[0])}HR(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Bc.delete(this)}cancel(){this.state==="scheduled"&&(Bc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ZR=r=>r.startsWith("--");function JR(r,t,e){ZR(t)?r.style.setProperty(t,e):r.style[t]=e}const tF={};function iP(r,t){const e=Mk(r);return()=>tF[t]??e()}const eF=iP(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),sP=iP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),df=([r,t,e,n])=>`cubic-bezier(${r}, ${t}, ${e}, ${n})`,UC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:df([0,.65,.55,1]),circOut:df([.55,0,1,.45]),backIn:df([.31,.01,.66,-.59]),backOut:df([.33,1.53,.69,.99])};function rP(r,t){if(r)return typeof r=="function"?sP()?Zk(r,t):"ease-out":zk(r)?df(r):Array.isArray(r)?r.map(e=>rP(e,t)||UC.easeOut):UC[r]}function nF(r,t,e,{delay:n=0,duration:i=300,repeat:a=0,repeatType:c="loop",ease:u="easeOut",times:d}={},f=void 0){const p={[t]:e};d&&(p.offset=d);const g=rP(u,i);Array.isArray(g)&&(p.easing=g);const y={delay:n,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),r.animate(p,y)}function oP(r){return typeof r=="function"&&"applyToOptions"in r}function iF({type:r,...t}){return oP(r)&&sP()?r.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class aP extends XA{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:i,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=t,OA(typeof t.type!="string");const f=iF(t);this.animation=nF(e,n,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=GA(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):JR(e,n,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n,i;const t=(e=this.options)==null?void 0:e.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((i=(n=this.animation).commitStyles)==null||i.call(n))}get duration(){var e,n;const t=((n=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:n.call(e).duration)||0;return ps(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ps(t)}get time(){return ps(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Us(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&eF()?(this.animation.timeline=t,ms):e(this)}}const lP={anticipate:Ok,backInOut:Nk,circInOut:jk};function sF(r){return r in lP}function rF(r){typeof r.ease=="string"&&sF(r.ease)&&(r.ease=lP[r.ease])}const d1=10;class oF extends aP{constructor(t){rF(t),tP(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:i,element:a,...c}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new YA({...c,autoplay:!1}),d=Math.max(d1,Yn.now()-this.startTime),f=Er(0,d1,d-d1);e.setWithVelocity(u.sample(Math.max(0,d-f)).value,u.sample(d).value,f),u.stop()}}const HC=(r,t)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Hs.test(r)||r==="0")&&!r.startsWith("url("));function aF(r){const t=r[0];if(r.length===1)return!0;for(let e=0;e<r.length;e++)if(r[e]!==t)return!0}function lF(r,t,e,n){const i=r[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=r[r.length-1],c=HC(i,t),u=HC(a,t);return!c||!u?!1:aF(r)||(e==="spring"||oP(e))&&n}function $1(r){r.duration=0,r.type="keyframes"}const cF=new Set(["opacity","clipPath","filter","transform"]),uF=Mk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hF(r){var p;const{motionValue:t,name:e,repeatDelay:n,repeatType:i,damping:a,type:c}=r;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return uF()&&e&&cF.has(e)&&(e!=="transform"||!f)&&!d&&!n&&i!=="mirror"&&a!==0&&c!=="inertia"}const dF=40;class fF extends XA{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:c="loop",keyframes:u,name:d,motionValue:f,element:p,...g}){var S;super(),this.stop=()=>{var E,C;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=Yn.now();const y={autoplay:t,delay:e,type:n,repeat:i,repeatDelay:a,repeatType:c,name:d,motionValue:f,element:p,...g},w=(p==null?void 0:p.KeyframeResolver)||KA;this.keyframeResolver=new w(u,(E,C,k)=>this.onKeyframesResolved(E,C,y,!k),d,f,p),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(t,e,n,i){var C,k;this.keyframeResolver=void 0;const{name:a,type:c,velocity:u,delay:d,isHandoff:f,onUpdate:p}=n;this.resolvedAt=Yn.now(),lF(t,a,c,u)||((Po.instantAnimations||!d)&&(p==null||p(GA(t,n,e))),t[0]=t[t.length-1],$1(n),n.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>dF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},w=!f&&hF(y),S=(k=(C=y.motionValue)==null?void 0:C.owner)==null?void 0:k.current,E=w?new oF({...y,element:S}):new YA(y);E.finished.then(()=>{this.notifyFinished()}).catch(ms),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),QR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function cP(r,t,e,n=0,i=1){const a=Array.from(r).sort((f,p)=>f.sortNodePosition(p)).indexOf(t),c=r.size,u=(c-1)*n;return typeof e=="function"?e(a,c):i===1?a*n:u-a*n}const pF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mF(r){const t=pF.exec(r);if(!t)return[,];const[,e,n,i]=t;return[`--${e??n}`,i]}function uP(r,t,e=1){const[n,i]=mF(r);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const c=a.trim();return kk(c)?parseFloat(c):c}return zA(i)?uP(i,t,e+1):i}const gF={type:"spring",stiffness:500,damping:25,restSpeed:10},yF=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),vF={type:"keyframes",duration:.8},wF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xF=(r,{keyframes:t})=>t.length>2?vF:yd.has(r)?r.startsWith("scale")?yF(t[1]):gF:wF,AF=r=>r!==null;function bF(r,{repeat:t,repeatType:e="loop"},n){const i=r.filter(AF),a=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[a]}function hP(r,t){if(r!=null&&r.inherit&&t){const{inherit:e,...n}=r;return{...t,...n}}return r}function qA(r,t){const e=(r==null?void 0:r[t])??(r==null?void 0:r.default)??r;return e!==r?hP(e,r):e}function SF({when:r,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:c,repeatDelay:u,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const QA=(r,t,e,n={},i,a)=>c=>{const u=qA(n,r)||{},d=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-Us(d);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:y=>{t.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:r,motionValue:t,element:a?void 0:i};SF(u)||Object.assign(p,xF(r,p)),p.duration&&(p.duration=Us(p.duration)),p.repeatDelay&&(p.repeatDelay=Us(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&($1(p),p.delay===0&&(g=!0)),(Po.instantAnimations||Po.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(g=!0,$1(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,g&&!a&&t.get()!==void 0){const y=bF(p.keyframes,u);if(y!==void 0){me.update(()=>{p.onUpdate(y),p.onComplete()});return}}return u.isSync?new YA(p):new fF(p)};function $C(r){const t=[{},{}];return r==null||r.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function ZA(r,t,e,n){if(typeof t=="function"){const[i,a]=$C(n);t=t(e!==void 0?e:r.custom,i,a)}if(typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"){const[i,a]=$C(n);t=t(e!==void 0?e:r.custom,i,a)}return t}function Bu(r,t,e){const n=r.getProps();return ZA(n,t,e!==void 0?e:n.custom,r)}const dP=new Set(["width","height","top","left","right","bottom",...gd]),WC=30,EF=r=>!isNaN(parseFloat(r));class CF{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var a;const i=Yn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Yn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=EF(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new BA);const n=this.events[t].add(e);return t==="change"?()=>{n(),me.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>WC)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,WC);return Dk(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dd(r,t){return new CF(r,t)}const W1=r=>Array.isArray(r);function TF(r,t,e){r.hasValue(t)?r.getValue(t).set(e):r.addValue(t,dd(e))}function kF(r){return W1(r)?r[r.length-1]||0:r}function PF(r,t){const e=Bu(r,t);let{transitionEnd:n={},transition:i={},...a}=e||{};a={...a,...n};for(const c in a){const u=kF(a[c]);TF(r,c,u)}}const jn=r=>!!(r&&r.getVelocity);function _F(r){return!!(jn(r)&&r.add)}function G1(r,t){const e=r.getValue("willChange");if(_F(e))return e.add(t);if(!e&&Po.WillChange){const n=new Po.WillChange("auto");r.addValue("willChange",n),n.add(t)}}function JA(r){return r.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const MF="framerAppearId",fP="data-"+JA(MF);function pP(r){return r.props[fP]}function DF({protectedKeys:r,needsAnimating:t},e){const n=r.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function mP(r,t,{delay:e=0,transitionOverride:n,type:i}={}){let{transition:a,transitionEnd:c,...u}=t;const d=r.getDefaultTransition();a=a?hP(a,d):d;const f=a==null?void 0:a.reduceMotion;n&&(a=n);const p=[],g=i&&r.animationState&&r.animationState.getState()[i];for(const y in u){const w=r.getValue(y,r.latestValues[y]??null),S=u[y];if(S===void 0||g&&DF(g,y))continue;const E={delay:e,...qA(a||{},y)},C=w.get();if(C!==void 0&&!w.isAnimating&&!Array.isArray(S)&&S===C&&!E.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const L=pP(r);if(L){const D=window.MotionHandoffAnimation(L,y,me);D!==null&&(E.startTime=D,k=!0)}}G1(r,y);const M=f??r.shouldReduceMotion;w.start(QA(y,w,S,M&&dP.has(y)?{type:!1}:E,r,k));const _=w.animation;_&&p.push(_)}if(c){const y=()=>me.update(()=>{c&&PF(r,c)});p.length?Promise.all(p).then(y):y()}return p}function X1(r,t,e={}){var d;const n=Bu(r,t,e.type==="exit"?(d=r.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(i=e.transitionOverride);const a=n?()=>Promise.all(mP(r,n,e)):()=>Promise.resolve(),c=r.variantChildren&&r.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=i;return LF(r,t,f,p,g,y,e)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,p]=u==="beforeChildren"?[a,c]:[c,a];return f().then(()=>p())}else return Promise.all([a(),c(e.delay)])}function LF(r,t,e=0,n=0,i=0,a=1,c){const u=[];for(const d of r.variantChildren)d.notify("AnimationStart",t),u.push(X1(d,t,{...c,delay:e+(typeof n=="function"?0:n)+cP(r.variantChildren,d,n,i,a)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(u)}function RF(r,t,e={}){r.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(a=>X1(r,a,e));n=Promise.all(i)}else if(typeof t=="string")n=X1(r,t,e);else{const i=typeof t=="function"?Bu(r,t,e.custom):t;n=Promise.all(mP(r,i,e))}return n.then(()=>{r.notify("AnimationComplete",t)})}const FF={test:r=>r==="auto",parse:r=>r},gP=r=>t=>t.test(r),yP=[md,ft,Sr,Qo,cR,lR,FF],GC=r=>yP.find(gP(r));function IF(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||_k(r):!0}const NF=new Set(["brightness","contrast","saturate","opacity"]);function OF(r){const[t,e]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[n]=e.match(UA)||[];if(!n)return r;const i=e.replace(n,"");let a=NF.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+i+")"}const BF=/\b([a-z-]*)\(.*?\)/gu,Y1={...Hs,getAnimatableNone:r=>{const t=r.match(BF);return t?t.map(OF).join(" "):r}},K1={...Hs,getAnimatableNone:r=>{const t=Hs.parse(r);return Hs.createTransformer(r)(t.map(n=>typeof n=="number"?0:typeof n=="object"?{...n,alpha:1}:n))}},XC={...md,transform:Math.round},jF={rotate:Qo,rotateX:Qo,rotateY:Qo,rotateZ:Qo,scale:ly,scaleX:ly,scaleY:ly,scaleZ:ly,skew:Qo,skewX:Qo,skewY:Qo,distance:ft,translateX:ft,translateY:ft,translateZ:ft,x:ft,y:ft,z:ft,perspective:ft,transformPerspective:ft,opacity:jf,originX:RC,originY:RC,originZ:ft},tb={borderWidth:ft,borderTopWidth:ft,borderRightWidth:ft,borderBottomWidth:ft,borderLeftWidth:ft,borderRadius:ft,borderTopLeftRadius:ft,borderTopRightRadius:ft,borderBottomRightRadius:ft,borderBottomLeftRadius:ft,width:ft,maxWidth:ft,height:ft,maxHeight:ft,top:ft,right:ft,bottom:ft,left:ft,inset:ft,insetBlock:ft,insetBlockStart:ft,insetBlockEnd:ft,insetInline:ft,insetInlineStart:ft,insetInlineEnd:ft,padding:ft,paddingTop:ft,paddingRight:ft,paddingBottom:ft,paddingLeft:ft,paddingBlock:ft,paddingBlockStart:ft,paddingBlockEnd:ft,paddingInline:ft,paddingInlineStart:ft,paddingInlineEnd:ft,margin:ft,marginTop:ft,marginRight:ft,marginBottom:ft,marginLeft:ft,marginBlock:ft,marginBlockStart:ft,marginBlockEnd:ft,marginInline:ft,marginInlineStart:ft,marginInlineEnd:ft,fontSize:ft,backgroundPositionX:ft,backgroundPositionY:ft,...jF,zIndex:XC,fillOpacity:jf,strokeOpacity:jf,numOctaves:XC},VF={...tb,color:Ge,backgroundColor:Ge,outlineColor:Ge,fill:Ge,stroke:Ge,borderColor:Ge,borderTopColor:Ge,borderRightColor:Ge,borderBottomColor:Ge,borderLeftColor:Ge,filter:Y1,WebkitFilter:Y1,mask:K1,WebkitMask:K1},vP=r=>VF[r],zF=new Set([Y1,K1]);function wP(r,t){let e=vP(r);return zF.has(e)||(e=Hs),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const UF=new Set(["auto","none","0"]);function HF(r,t,e){let n=0,i;for(;n<r.length&&!i;){const a=r[n];typeof a=="string"&&!UF.has(a)&&Vf(a).values.length&&(i=r[n]),n++}if(i&&e)for(const a of t)r[a]=wP(e,i)}class $F extends KA{constructor(t,e,n,i,a){super(t,e,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let g=t[p];if(typeof g=="string"&&(g=g.trim(),zA(g))){const y=uP(g,e.current);y!==void 0&&(t[p]=y),p===t.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!dP.has(n)||t.length!==2)return;const[i,a]=t,c=GC(i),u=GC(a),d=LC(i),f=LC(a);if(d!==f&&Ka[n]){this.needsMeasurement=!0;return}if(c!==u)if(zC(c)&&zC(u))for(let p=0;p<t.length;p++){const g=t[p];typeof g=="string"&&(t[p]=parseFloat(g))}else Ka[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||IF(t[i]))&&n.push(i);n.length&&HF(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ka[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var u;const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,c=n[a];n[a]=Ka[e](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const WF=new Set(["opacity","clipPath","filter","transform"]);function xP(r,t,e){if(r==null)return[];if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const i=(e==null?void 0:e[r])??n.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r).filter(n=>n!=null)}const AP=(r,t)=>t&&typeof r=="number"?t.transform(r):r;function q1(r){return Pk(r)&&"offsetHeight"in r}const{schedule:eb}=Uk(queueMicrotask,!1),ks={x:!1,y:!1};function bP(){return ks.x||ks.y}function GF(r){return r==="x"||r==="y"?ks[r]?null:(ks[r]=!0,()=>{ks[r]=!1}):ks.x||ks.y?null:(ks.x=ks.y=!0,()=>{ks.x=ks.y=!1})}function SP(r,t){const e=xP(r),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[e,i,()=>n.abort()]}function XF(r){return!(r.pointerType==="touch"||bP())}function YF(r,t,e={}){const[n,i,a]=SP(r,e);return n.forEach(c=>{let u=!1,d=!1,f;const p=()=>{c.removeEventListener("pointerleave",S)},g=C=>{f&&(f(C),f=void 0),p()},y=C=>{u=!1,window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",y),d&&(d=!1,g(C))},w=()=>{u=!0,window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",y,i)},S=C=>{if(C.pointerType!=="touch"){if(u){d=!0;return}g(C)}},E=C=>{if(!XF(C))return;d=!1;const k=t(c,C);typeof k=="function"&&(f=k,c.addEventListener("pointerleave",S,i))};c.addEventListener("pointerenter",E,i),c.addEventListener("pointerdown",w,i)}),a}const EP=(r,t)=>t?r===t?!0:EP(r,t.parentElement):!1,nb=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,KF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qF(r){return KF.has(r.tagName)||r.isContentEditable===!0}const QF=new Set(["INPUT","SELECT","TEXTAREA"]);function ZF(r){return QF.has(r.tagName)||r.isContentEditable===!0}const Ay=new WeakSet;function YC(r){return t=>{t.key==="Enter"&&r(t)}}function f1(r,t){r.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const JF=(r,t)=>{const e=r.currentTarget;if(!e)return;const n=YC(()=>{if(Ay.has(e))return;f1(e,"down");const i=YC(()=>{f1(e,"up")}),a=()=>f1(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function KC(r){return nb(r)&&!bP()}const qC=new WeakSet;function tI(r,t,e={}){const[n,i,a]=SP(r,e),c=u=>{const d=u.currentTarget;if(!KC(u)||qC.has(u))return;Ay.add(d),e.stopPropagation&&qC.add(u);const f=t(d,u),p=(w,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),Ay.has(d)&&Ay.delete(d),KC(w)&&typeof f=="function"&&f(w,{success:S})},g=w=>{p(w,d===window||d===document||e.useGlobalTarget||EP(d,w.target))},y=w=>{p(w,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",y,i)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),q1(u)&&(u.addEventListener("focus",f=>JF(f,i)),!qF(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function ib(r){return Pk(r)&&"ownerSVGElement"in r}const by=new WeakMap;let Zo;const CP=(r,t,e)=>(n,i)=>i&&i[0]?i[0][r+"Size"]:ib(n)&&"getBBox"in n?n.getBBox()[t]:n[e],eI=CP("inline","width","offsetWidth"),nI=CP("block","height","offsetHeight");function iI({target:r,borderBoxSize:t}){var e;(e=by.get(r))==null||e.forEach(n=>{n(r,{get width(){return eI(r,t)},get height(){return nI(r,t)}})})}function sI(r){r.forEach(iI)}function rI(){typeof ResizeObserver>"u"||(Zo=new ResizeObserver(sI))}function oI(r,t){Zo||rI();const e=xP(r);return e.forEach(n=>{let i=by.get(n);i||(i=new Set,by.set(n,i)),i.add(t),Zo==null||Zo.observe(n)}),()=>{e.forEach(n=>{const i=by.get(n);i==null||i.delete(t),i!=null&&i.size||Zo==null||Zo.unobserve(n)})}}const Sy=new Set;let Pu;function aI(){Pu=()=>{const r={get width(){return window.innerWidth},get height(){return window.innerHeight}};Sy.forEach(t=>t(r))},window.addEventListener("resize",Pu)}function lI(r){return Sy.add(r),Pu||aI(),()=>{Sy.delete(r),!Sy.size&&typeof Pu=="function"&&(window.removeEventListener("resize",Pu),Pu=void 0)}}function QC(r,t){return typeof r=="function"?lI(r):oI(r,t)}function cI(r){return ib(r)&&r.tagName==="svg"}const uI=[...yP,Ge,Hs],hI=r=>uI.find(gP(r)),ZC=()=>({translate:0,scale:1,origin:0,originPoint:0}),_u=()=>({x:ZC(),y:ZC()}),JC=()=>({min:0,max:0}),en=()=>({x:JC(),y:JC()}),dI=new WeakMap;function Y0(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function zf(r){return typeof r=="string"||Array.isArray(r)}const sb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rb=["initial",...sb];function K0(r){return Y0(r.animate)||rb.some(t=>zf(r[t]))}function TP(r){return!!(K0(r)||r.variants)}function fI(r,t,e){for(const n in t){const i=t[n],a=e[n];if(jn(i))r.addValue(n,i);else if(jn(a))r.addValue(n,dd(i,{owner:r}));else if(a!==i)if(r.hasValue(n)){const c=r.getValue(n);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=r.getStaticValue(n);r.addValue(n,dd(c!==void 0?c:i,{owner:r}))}}for(const n in e)t[n]===void 0&&r.removeValue(n);return t}const Q1={current:null},kP={current:!1},pI=typeof window<"u";function mI(){if(kP.current=!0,!!pI)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>Q1.current=r.matches;r.addEventListener("change",t),t()}else Q1.current=!1}const tT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let h0={};function PP(r){h0=r}function gI(){return h0}class yI{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:c,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=KA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Yn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,me.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=e.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=d,this.blockInitialAnimation=!!c,this.isControllingVariants=K0(e),this.isVariantNode=TP(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(e,{},this);for(const w in y){const S=y[w];f[w]!==void 0&&jn(S)&&S.set(f[w])}}mount(t){var e,n;if(this.hasBeenMounted)for(const i in this.initialValues)(e=this.values.get(i))==null||e.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=t,dI.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,a)=>this.bindToMotionValue(a,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(kP.current||mI(),this.shouldReduceMotion=Q1.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),qa(this.notifyUpdate),qa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),e.accelerate&&WF.has(t)&&this.current instanceof HTMLElement){const{factory:c,keyframes:u,times:d,ease:f,duration:p}=e.accelerate,g=new aP({element:this.current,name:t,keyframes:u,times:d,ease:f,duration:Us(p)}),y=c(g);this.valueSubscriptions.set(t,()=>{y(),g.cancel()});return}const n=yd.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&me.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in h0){const e=h0[t];if(!e)continue;const{isEnabled:n,Feature:i}=e;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):en()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<tT.length;n++){const i=tT[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,c=t[a];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=fI(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=dd(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(kk(n)||_k(n))?n=parseFloat(n):!hI(n)&&Hs.test(e)&&(n=wP(t,e)),this.setBaseTarget(t,jn(n)?n.get():n)),jn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var a;const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const c=ZA(this.props,e,(a=this.presenceContext)==null?void 0:a.custom);c&&(n=c[t])}if(e&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!jn(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new BA),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){eb.render(this.render)}}class _P extends yI{constructor(){super(...arguments),this.KeyframeResolver=$F}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;jn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class tl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function MP({top:r,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:r,max:n}}}function vI({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function wI(r,t){if(!t)return r;const e=t({x:r.left,y:r.top}),n=t({x:r.right,y:r.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function p1(r){return r===void 0||r===1}function Z1({scale:r,scaleX:t,scaleY:e}){return!p1(r)||!p1(t)||!p1(e)}function gl(r){return Z1(r)||DP(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function DP(r){return eT(r.x)||eT(r.y)}function eT(r){return r&&r!=="0%"}function d0(r,t,e){const n=r-e,i=t*n;return e+i}function nT(r,t,e,n,i){return i!==void 0&&(r=d0(r,i,n)),d0(r,e,n)+t}function J1(r,t=0,e=1,n,i){r.min=nT(r.min,t,e,n,i),r.max=nT(r.max,t,e,n,i)}function LP(r,{x:t,y:e}){J1(r.x,t.translate,t.scale,t.originPoint),J1(r.y,e.translate,e.scale,e.originPoint)}const iT=.999999999999,sT=1.0000000000001;function xI(r,t,e,n=!1){const i=e.length;if(!i)return;t.x=t.y=1;let a,c;for(let u=0;u<i;u++){a=e[u],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Du(r,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,LP(r,c)),n&&gl(a.latestValues)&&Du(r,a.latestValues))}t.x<sT&&t.x>iT&&(t.x=1),t.y<sT&&t.y>iT&&(t.y=1)}function Mu(r,t){r.min=r.min+t,r.max=r.max+t}function rT(r,t,e,n,i=.5){const a=Pe(r.min,r.max,i);J1(r,t,e,a,n)}function Du(r,t){rT(r.x,t.x,t.scaleX,t.scale,t.originX),rT(r.y,t.y,t.scaleY,t.scale,t.originY)}function RP(r,t){return MP(wI(r.getBoundingClientRect(),t))}function AI(r,t,e){const n=RP(r,e),{scroll:i}=t;return i&&(Mu(n.x,i.offset.x),Mu(n.y,i.offset.y)),n}const bI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SI=gd.length;function EI(r,t,e){let n="",i=!0;for(let a=0;a<SI;a++){const c=gd[a],u=r[c];if(u===void 0)continue;let d=!0;if(typeof u=="number")d=u===(c.startsWith("scale")?1:0);else{const f=parseFloat(u);d=c.startsWith("scale")?f===1:f===0}if(!d||e){const f=AP(u,tb[c]);if(!d){i=!1;const p=bI[c]||c;n+=`${p}(${f}) `}e&&(t[c]=f)}}return n=n.trim(),e?n=e(t,i?"":n):i&&(n="none"),n}function ob(r,t,e){const{style:n,vars:i,transformOrigin:a}=r;let c=!1,u=!1;for(const d in t){const f=t[d];if(yd.has(d)){c=!0;continue}else if($k(d)){i[d]=f;continue}else{const p=AP(f,tb[d]);d.startsWith("origin")?(u=!0,a[d]=p):n[d]=p}}if(t.transform||(c||e?n.transform=EI(t,r.transform,e):n.transform&&(n.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;n.transformOrigin=`${d} ${f} ${p}`}}function FP(r,{style:t,vars:e},n,i){const a=r.style;let c;for(c in t)a[c]=t[c];i==null||i.applyProjectionStyles(a,n);for(c in e)a.setProperty(c,e[c])}function oT(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const of={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(ft.test(r))r=parseFloat(r);else return r;const e=oT(r,t.target.x),n=oT(r,t.target.y);return`${e}% ${n}%`}},CI={correct:(r,{treeScale:t,projectionDelta:e})=>{const n=r,i=Hs.parse(r);if(i.length>5)return n;const a=Hs.createTransformer(r),c=typeof i[0]!="number"?1:0,u=e.x.scale*t.x,d=e.y.scale*t.y;i[0+c]/=u,i[1+c]/=d;const f=Pe(u,d,.5);return typeof i[2+c]=="number"&&(i[2+c]/=f),typeof i[3+c]=="number"&&(i[3+c]/=f),a(i)}},tx={borderRadius:{...of,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:of,borderTopRightRadius:of,borderBottomLeftRadius:of,borderBottomRightRadius:of,boxShadow:CI};function IP(r,{layout:t,layoutId:e}){return yd.has(r)||r.startsWith("origin")||(t||e!==void 0)&&(!!tx[r]||r==="opacity")}function ab(r,t,e){var c;const n=r.style,i=t==null?void 0:t.style,a={};if(!n)return a;for(const u in n)(jn(n[u])||i&&jn(i[u])||IP(u,r)||((c=e==null?void 0:e.getValue(u))==null?void 0:c.liveStyle)!==void 0)&&(a[u]=n[u]);return a}function TI(r){return window.getComputedStyle(r)}class kI extends _P{constructor(){super(...arguments),this.type="html",this.renderInstance=FP}readValueFromInstance(t,e){var n;if(yd.has(e))return(n=this.projection)!=null&&n.isProjecting?j1(e):GR(t,e);{const i=TI(t),a=($k(e)?i.getPropertyValue(e):i[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return RP(t,e)}build(t,e,n){ob(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return ab(t,e,n)}}const PI={offset:"stroke-dashoffset",array:"stroke-dasharray"},_I={offset:"strokeDashoffset",array:"strokeDasharray"};function MI(r,t,e=1,n=0,i=!0){r.pathLength=1;const a=i?PI:_I;r[a.offset]=`${-n}`,r[a.array]=`${t} ${e}`}const DI=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function NP(r,{attrX:t,attrY:e,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:c=0,...u},d,f,p){if(ob(r,u,f),d){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:g,style:y}=r;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox);for(const w of DI)g[w]!==void 0&&(y[w]=g[w],delete g[w]);t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),n!==void 0&&(g.scale=n),i!==void 0&&MI(g,i,a,c,!1)}const OP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),BP=r=>typeof r=="string"&&r.toLowerCase()==="svg";function LI(r,t,e,n){FP(r,t,void 0,n);for(const i in t.attrs)r.setAttribute(OP.has(i)?i:JA(i),t.attrs[i])}function jP(r,t,e){const n=ab(r,t,e);for(const i in r)if(jn(r[i])||jn(t[i])){const a=gd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=r[i]}return n}class RI extends _P{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=en}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(yd.has(e)){const n=vP(e);return n&&n.default||0}return e=OP.has(e)?e:JA(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return jP(t,e,n)}build(t,e,n){NP(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,i){LI(t,e,n,i)}mount(t){this.isSVGTag=BP(t.tagName),super.mount(t)}}const FI=rb.length;function VP(r){if(!r)return;if(!r.isControllingVariants){const e=r.parent?VP(r.parent)||{}:{};return r.props.initial!==void 0&&(e.initial=r.props.initial),e}const t={};for(let e=0;e<FI;e++){const n=rb[e],i=r.props[n];(zf(i)||i===!1)&&(t[n]=i)}return t}function zP(r,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==r.length)return!1;for(let n=0;n<e;n++)if(t[n]!==r[n])return!1;return!0}const II=[...sb].reverse(),NI=sb.length;function OI(r){return t=>Promise.all(t.map(({animation:e,options:n})=>RF(r,e,n)))}function BI(r){let t=OI(r),e=aT(),n=!0;const i=d=>(f,p)=>{var y;const g=Bu(r,p,d==="exit"?(y=r.presenceContext)==null?void 0:y.custom:void 0);if(g){const{transition:w,transitionEnd:S,...E}=g;f={...f,...E,...S}}return f};function a(d){t=d(r)}function c(d){const{props:f}=r,p=VP(r.parent)||{},g=[],y=new Set;let w={},S=1/0;for(let C=0;C<NI;C++){const k=II[C],M=e[k],_=f[k]!==void 0?f[k]:p[k],L=zf(_),D=k===d?M.isActive:null;D===!1&&(S=C);let F=_===p[k]&&_!==f[k]&&L;if(F&&n&&r.manuallyAnimateOnMount&&(F=!1),M.protectedKeys={...w},!M.isActive&&D===null||!_&&!M.prevProp||Y0(_)||typeof _=="boolean")continue;if(k==="exit"&&M.isActive&&D!==!0){M.prevResolvedValues&&(w={...w,...M.prevResolvedValues});continue}const j=jI(M.prevProp,_);let U=j||k===d&&M.isActive&&!F&&L||C>S&&L,G=!1;const q=Array.isArray(_)?_:[_];let J=q.reduce(i(k),{});D===!1&&(J={});const{prevResolvedValues:vt={}}=M,wt={...vt,...J},yt=tt=>{U=!0,y.has(tt)&&(G=!0,y.delete(tt)),M.needsAnimating[tt]=!0;const X=r.getValue(tt);X&&(X.liveStyle=!1)};for(const tt in wt){const X=J[tt],st=vt[tt];if(w.hasOwnProperty(tt))continue;let et=!1;W1(X)&&W1(st)?et=!zP(X,st):et=X!==st,et?X!=null?yt(tt):y.add(tt):X!==void 0&&y.has(tt)?yt(tt):M.protectedKeys[tt]=!0}M.prevProp=_,M.prevResolvedValues=J,M.isActive&&(w={...w,...J}),n&&r.blockInitialAnimation&&(U=!1);const At=F&&j;U&&(!At||G)&&g.push(...q.map(tt=>{const X={type:k};if(typeof tt=="string"&&n&&!At&&r.manuallyAnimateOnMount&&r.parent){const{parent:st}=r,et=Bu(st,tt);if(st.enteringChildren&&et){const{delayChildren:B}=et.transition||{};X.delay=cP(st.enteringChildren,r,B)}}return{animation:tt,options:X}}))}if(y.size){const C={};if(typeof f.initial!="boolean"){const k=Bu(r,Array.isArray(f.initial)?f.initial[0]:f.initial);k&&k.transition&&(C.transition=k.transition)}y.forEach(k=>{const M=r.getBaseTarget(k),_=r.getValue(k);_&&(_.liveStyle=!0),C[k]=M??null}),g.push({animation:C})}let E=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!r.manuallyAnimateOnMount&&(E=!1),n=!1,E?t(g):Promise.resolve()}function u(d,f){var g;if(e[d].isActive===f)return Promise.resolve();(g=r.variantChildren)==null||g.forEach(y=>{var w;return(w=y.animationState)==null?void 0:w.setActive(d,f)}),e[d].isActive=f;const p=c(d);for(const y in e)e[y].protectedKeys={};return p}return{animateChanges:c,setActive:u,setAnimateFunction:a,getState:()=>e,reset:()=>{e=aT()}}}function jI(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!zP(t,r):!1}function ml(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aT(){return{animate:ml(!0),whileInView:ml(),whileHover:ml(),whileTap:ml(),whileDrag:ml(),whileFocus:ml(),exit:ml()}}function lT(r,t){r.min=t.min,r.max=t.max}function Cs(r,t){lT(r.x,t.x),lT(r.y,t.y)}function cT(r,t){r.translate=t.translate,r.scale=t.scale,r.originPoint=t.originPoint,r.origin=t.origin}const UP=1e-4,VI=1-UP,zI=1+UP,HP=.01,UI=0-HP,HI=0+HP;function Kn(r){return r.max-r.min}function $I(r,t,e){return Math.abs(r-t)<=e}function uT(r,t,e,n=.5){r.origin=n,r.originPoint=Pe(t.min,t.max,r.origin),r.scale=Kn(e)/Kn(t),r.translate=Pe(e.min,e.max,r.origin)-r.originPoint,(r.scale>=VI&&r.scale<=zI||isNaN(r.scale))&&(r.scale=1),(r.translate>=UI&&r.translate<=HI||isNaN(r.translate))&&(r.translate=0)}function Nf(r,t,e,n){uT(r.x,t.x,e.x,n?n.originX:void 0),uT(r.y,t.y,e.y,n?n.originY:void 0)}function hT(r,t,e){r.min=e.min+t.min,r.max=r.min+Kn(t)}function WI(r,t,e){hT(r.x,t.x,e.x),hT(r.y,t.y,e.y)}function dT(r,t,e){r.min=t.min-e.min,r.max=r.min+Kn(t)}function f0(r,t,e){dT(r.x,t.x,e.x),dT(r.y,t.y,e.y)}function fT(r,t,e,n,i){return r-=t,r=d0(r,1/e,n),i!==void 0&&(r=d0(r,1/i,n)),r}function GI(r,t=0,e=1,n=.5,i,a=r,c=r){if(Sr.test(t)&&(t=parseFloat(t),t=Pe(c.min,c.max,t/100)-c.min),typeof t!="number")return;let u=Pe(a.min,a.max,n);r===a&&(u-=t),r.min=fT(r.min,t,e,u,i),r.max=fT(r.max,t,e,u,i)}function pT(r,t,[e,n,i],a,c){GI(r,t[e],t[n],t[i],t.scale,a,c)}const XI=["x","scaleX","originX"],YI=["y","scaleY","originY"];function mT(r,t,e,n){pT(r.x,t,XI,e?e.x:void 0,n?n.x:void 0),pT(r.y,t,YI,e?e.y:void 0,n?n.y:void 0)}function gT(r){return r.translate===0&&r.scale===1}function $P(r){return gT(r.x)&&gT(r.y)}function yT(r,t){return r.min===t.min&&r.max===t.max}function KI(r,t){return yT(r.x,t.x)&&yT(r.y,t.y)}function vT(r,t){return Math.round(r.min)===Math.round(t.min)&&Math.round(r.max)===Math.round(t.max)}function WP(r,t){return vT(r.x,t.x)&&vT(r.y,t.y)}function wT(r){return Kn(r.x)/Kn(r.y)}function xT(r,t){return r.translate===t.translate&&r.scale===t.scale&&r.originPoint===t.originPoint}function Js(r){return[r("x"),r("y")]}function qI(r,t,e){let n="";const i=r.x.translate/t.x,a=r.y.translate/t.y,c=(e==null?void 0:e.z)||0;if((i||a||c)&&(n=`translate3d(${i}px, ${a}px, ${c}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:y,skewX:w,skewY:S}=e;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),g&&(n+=`rotateX(${g}deg) `),y&&(n+=`rotateY(${y}deg) `),w&&(n+=`skewX(${w}deg) `),S&&(n+=`skewY(${S}deg) `)}const u=r.x.scale*t.x,d=r.y.scale*t.y;return(u!==1||d!==1)&&(n+=`scale(${u}, ${d})`),n||"none"}const GP=["TopLeft","TopRight","BottomLeft","BottomRight"],QI=GP.length,AT=r=>typeof r=="string"?parseFloat(r):r,bT=r=>typeof r=="number"||ft.test(r);function ZI(r,t,e,n,i,a){i?(r.opacity=Pe(0,e.opacity??1,JI(n)),r.opacityExit=Pe(t.opacity??1,0,tN(n))):a&&(r.opacity=Pe(t.opacity??1,e.opacity??1,n));for(let c=0;c<QI;c++){const u=`border${GP[c]}Radius`;let d=ST(t,u),f=ST(e,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||bT(d)===bT(f)?(r[u]=Math.max(Pe(AT(d),AT(f),n),0),(Sr.test(f)||Sr.test(d))&&(r[u]+="%")):r[u]=f}(t.rotate||e.rotate)&&(r.rotate=Pe(t.rotate||0,e.rotate||0,n))}function ST(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const JI=XP(0,.5,Bk),tN=XP(.5,.95,ms);function XP(r,t,e){return n=>n<r?0:n>t?1:e(Bf(r,t,n))}function eN(r,t,e){const n=jn(r)?r:dd(r);return n.start(QA("",n,t,e)),n.animation}function Uf(r,t,e,n={passive:!0}){return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e)}const nN=(r,t)=>r.depth-t.depth;class iN{constructor(){this.children=[],this.isDirty=!1}add(t){NA(this.children,t),this.isDirty=!0}remove(t){a0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(nN),this.isDirty=!1,this.children.forEach(t)}}function sN(r,t){const e=Yn.now(),n=({timestamp:i})=>{const a=i-e;a>=t&&(qa(n),r(a-t))};return me.setup(n,!0),()=>qa(n)}function Ey(r){return jn(r)?r.get():r}class rN{constructor(){this.members=[]}add(t){NA(this.members,t);for(let e=this.members.length-1;e>=0;e--){const n=this.members[e];if(n===t||n===this.lead||n===this.prevLead)continue;const i=n.instance;i&&i.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&a0(this.members,n)}t.scheduleRender()}remove(t){if(a0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let n;for(let i=e;i>=0;i--){const a=this.members[i],c=a.instance;if(a.isPresent!==!1&&(!c||c.isConnected!==!1)){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const i=n.options.layoutDependency,a=t.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const d=n.instance;d&&d.isConnected===!1&&!n.snapshot||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:u}=t.options;u===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Cy={hasAnimatedSinceResize:!0,hasEverUpdated:!1},m1=["","X","Y","Z"],oN=1e3;let aN=0;function g1(r,t,e,n){const{latestValues:i}=t;i[r]&&(e[r]=i[r],t.setStaticValue(r,0),n&&(n[r]=0))}function YP(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:t}=r.options;if(!t)return;const e=pP(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:a}=r.options;window.MotionCancelOptimisedAnimation(e,"transform",me,!(i||a))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&YP(n)}function KP({attachResizeListener:r,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(c={},u=t==null?void 0:t()){this.id=aN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(uN),this.nodes.forEach(pN),this.nodes.forEach(mN),this.nodes.forEach(hN)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new iN)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new BA),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const d=this.eventHandlers.get(c);d&&d.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=ib(c)&&!cI(c),this.instance=c;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),r){let p,g=0;const y=()=>this.root.updateBlockedByResize=!1;me.read(()=>{g=window.innerWidth}),r(c,()=>{const w=window.innerWidth;w!==g&&(g=w,this.root.updateBlockedByResize=!0,p&&p(),p=sN(y,250),Cy.hasAnimatedSinceResize&&(Cy.hasAnimatedSinceResize=!1,this.nodes.forEach(TT)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||xN,{onLayoutAnimationStart:E,onLayoutAnimationComplete:C}=f.getProps(),k=!this.targetLayout||!WP(this.targetLayout,w),M=!g&&y;if(this.options.layoutRoot||this.resumeFrom||M||g&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...qA(S,"layout"),onPlay:E,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(p,M)}else g||TT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gN),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&YP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ET);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(CT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(fN),this.nodes.forEach(lN),this.nodes.forEach(cN)):this.nodes.forEach(CT),this.clearAllSnapshots();const u=Yn.now();Sn.delta=Er(0,1e3/60,u-Sn.timestamp),Sn.timestamp=u,Sn.isProcessing=!0,a1.update.process(Sn),a1.preRender.process(Sn),a1.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dN),this.sharedNodes.forEach(yN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Kn(this.snapshot.measuredBox.x)&&!Kn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=en(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!$P(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||gl(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return c&&(d=this.removeTransform(d)),AN(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:c}=this.options;if(!c)return en();const u=c.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(bN))){const{scroll:p}=this.root;p&&(Mu(u.x,p.offset.x),Mu(u.y,p.offset.y))}return u}removeElementScroll(c){var d;const u=en();if(Cs(u,c),(d=this.scroll)!=null&&d.wasRoot)return u;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Cs(u,c),Mu(u.x,g.offset.x),Mu(u.y,g.offset.y))}return u}applyTransform(c,u=!1){const d=en();Cs(d,c);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Du(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),gl(p.latestValues)&&Du(d,p.latestValues)}return gl(this.latestValues)&&Du(d,this.latestValues),d}removeTransform(c){const u=en();Cs(u,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!gl(f.latestValues))continue;Z1(f.latestValues)&&f.updateSnapshot();const p=en(),g=f.measurePageBox();Cs(p,g),mT(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return gl(this.latestValues)&&mT(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var w;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!this.layout||!(p||g))return;this.resolvedRelativeTargetAt=Sn.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=en(),this.targetWithTransforms=en()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cs(this.target,this.layout.layoutBox),LP(this.target,this.targetDelta)):Cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Z1(this.parent.latestValues)||DP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,u,d){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),f0(this.relativeTargetOrigin,u,d),Cs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var S;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Cs(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;xI(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=en());const{target:w}=c;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cT(this.prevProjectionDelta.x,this.projectionDelta.x),cT(this.prevProjectionDelta.y,this.projectionDelta.y)),Nf(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!xT(this.projectionDelta.x,this.prevProjectionDelta.x)||!xT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_u(),this.projectionDelta=_u(),this.projectionDeltaWithTransform=_u()}setAnimationOrigin(c,u=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},g=_u();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=en(),w=d?d.source:void 0,S=this.layout?this.layout.source:void 0,E=w!==S,C=this.getStack(),k=!C||C.members.length<=1,M=!!(E&&!k&&this.options.crossfade===!0&&!this.path.some(wN));this.animationProgress=0;let _;this.mixTargetDelta=L=>{const D=L/1e3;kT(g.x,c.x,D),kT(g.y,c.y,D),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(f0(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vN(this.relativeTarget,this.relativeTargetOrigin,y,D),_&&KI(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=en()),Cs(_,this.relativeTarget)),E&&(this.animationValues=p,ZI(p,f,this.latestValues,D,M,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,d,f;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(qa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=me.update(()=>{Cy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=dd(0)),this.motionValue.jump(0,!1),this.currentAnimation=eN(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:p}=c;if(!(!u||!d||!f)){if(this!==c&&this.layout&&f&&qP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||en();const g=Kn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+g;const y=Kn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+y}Cs(u,d),Du(u,p),Nf(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new rN),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&g1("z",c,f,this.animationValues);for(let p=0;p<m1.length;p++)g1(`rotate${m1[p]}`,c,f,this.animationValues),g1(`skew${m1[p]}`,c,f,this.animationValues);c.render();for(const p in f)c.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Ey(u==null?void 0:u.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Ey(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!gl(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=qI(this.projectionDeltaWithTransform,this.treeScale,p);d&&(g=d(p,g)),c.transform=g;const{x:y,y:w}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,f.animationValues?c.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in tx){if(p[S]===void 0)continue;const{correct:E,applyTo:C,isCSSVariable:k}=tx[S],M=g==="none"?p[S]:E(p[S],f);if(C){const _=C.length;for(let L=0;L<_;L++)c[C[L]]=M}else k?this.options.visualElement.renderState.vars[S]=M:c[S]=M}this.options.layoutId&&(c.pointerEvents=f===this?Ey(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(ET),this.root.sharedNodes.clear()}}}function lN(r){r.updateLayout()}function cN(r){var e;const t=((e=r.resumeFrom)==null?void 0:e.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:a}=r.options,c=t.source!==r.layout.source;a==="size"?Js(g=>{const y=c?t.measuredBox[g]:t.layoutBox[g],w=Kn(y);y.min=n[g].min,y.max=y.min+w}):qP(a,t.layoutBox,n)&&Js(g=>{const y=c?t.measuredBox[g]:t.layoutBox[g],w=Kn(n[g]);y.max=y.min+w,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[g].max=r.relativeTarget[g].min+w)});const u=_u();Nf(u,n,t.layoutBox);const d=_u();c?Nf(d,r.applyTransform(i,!0),t.measuredBox):Nf(d,n,t.layoutBox);const f=!$P(u);let p=!1;if(!r.resumeFrom){const g=r.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:w}=g;if(y&&w){const S=en();f0(S,t.layoutBox,y.layoutBox);const E=en();f0(E,n,w.layoutBox),WP(S,E)||(p=!0),g.options.layoutRoot&&(r.relativeTarget=E,r.relativeTargetOrigin=S,r.relativeParent=g)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function uN(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function hN(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function dN(r){r.clearSnapshot()}function ET(r){r.clearMeasurements()}function CT(r){r.isLayoutDirty=!1}function fN(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function TT(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function pN(r){r.resolveTargetDelta()}function mN(r){r.calcProjection()}function gN(r){r.resetSkewAndRotation()}function yN(r){r.removeLeadSnapshot()}function kT(r,t,e){r.translate=Pe(t.translate,0,e),r.scale=Pe(t.scale,1,e),r.origin=t.origin,r.originPoint=t.originPoint}function PT(r,t,e,n){r.min=Pe(t.min,e.min,n),r.max=Pe(t.max,e.max,n)}function vN(r,t,e,n){PT(r.x,t.x,e.x,n),PT(r.y,t.y,e.y,n)}function wN(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const xN={duration:.45,ease:[.4,0,.1,1]},_T=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),MT=_T("applewebkit/")&&!_T("chrome/")?Math.round:ms;function DT(r){r.min=MT(r.min),r.max=MT(r.max)}function AN(r){DT(r.x),DT(r.y)}function qP(r,t,e){return r==="position"||r==="preserve-aspect"&&!$I(wT(t),wT(e),.2)}function bN(r){var t;return r!==r.root&&((t=r.scroll)==null?void 0:t.wasRoot)}const SN=KP({attachResizeListener:(r,t)=>Uf(r,"resize",t),measureScroll:()=>{var r,t;return{x:document.documentElement.scrollLeft||((r=document.body)==null?void 0:r.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),y1={current:void 0},QP=KP({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!y1.current){const r=new SN({});r.mount(window),r.setOptions({layoutScroll:!0}),y1.current=r}return y1.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),lb=Z.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function LT(r,t){if(typeof r=="function")return r(t);r!=null&&(r.current=t)}function EN(...r){return t=>{let e=!1;const n=r.map(i=>{const a=LT(i,t);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():LT(r[i],null)}}}}function CN(...r){return Z.useCallback(EN(...r),r)}class TN extends Z.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=e.offsetParent,i=q1(n)&&n.offsetWidth||0,a=q1(n)&&n.offsetHeight||0,c=this.props.sizeRef.current;c.height=e.offsetHeight||0,c.width=e.offsetWidth||0,c.top=e.offsetTop,c.left=e.offsetLeft,c.right=i-c.width-c.left,c.bottom=a-c.height-c.top}return null}componentDidUpdate(){}render(){return this.props.children}}function kN({children:r,isPresent:t,anchorX:e,anchorY:n,root:i,pop:a}){var y;const c=Z.useId(),u=Z.useRef(null),d=Z.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=Z.useContext(lb),p=((y=r.props)==null?void 0:y.ref)??(r==null?void 0:r.ref),g=CN(u,p);return Z.useInsertionEffect(()=>{const{width:w,height:S,top:E,left:C,right:k,bottom:M}=d.current;if(t||a===!1||!u.current||!w||!S)return;const _=e==="left"?`left: ${C}`:`right: ${k}`,L=n==="bottom"?`bottom: ${M}`:`top: ${E}`;u.current.dataset.motionPopId=c;const D=document.createElement("style");f&&(D.nonce=f);const F=i??document.head;return F.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${S}px !important;
            ${_}px !important;
            ${L}px !important;
          }
        `),()=>{F.contains(D)&&F.removeChild(D)}},[t]),I.jsx(TN,{isPresent:t,childRef:u,sizeRef:d,pop:a,children:a===!1?r:Z.cloneElement(r,{ref:g})})}const PN=({children:r,initial:t,isPresent:e,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:c,anchorX:u,anchorY:d,root:f})=>{const p=IA(_N),g=Z.useId();let y=!0,w=Z.useMemo(()=>(y=!1,{id:g,initial:t,isPresent:e,custom:i,onExitComplete:S=>{p.set(S,!0);for(const E of p.values())if(!E)return;n&&n()},register:S=>(p.set(S,!1),()=>p.delete(S))}),[e,p,n]);return a&&y&&(w={...w}),Z.useMemo(()=>{p.forEach((S,E)=>p.set(E,!1))},[e]),Z.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),r=I.jsx(kN,{pop:c==="popLayout",isPresent:e,anchorX:u,anchorY:d,root:f,children:r}),I.jsx(X0.Provider,{value:w,children:r})};function _N(){return new Map}function ZP(r=!0){const t=Z.useContext(X0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,a=Z.useId();Z.useEffect(()=>{if(r)return i(a)},[r]);const c=Z.useCallback(()=>r&&n&&n(a),[a,n,r]);return!e&&n?[!1,c]:[!0]}const cy=r=>r.key||"";function RT(r){const t=[];return Z.Children.forEach(r,e=>{Z.isValidElement(e)&&t.push(e)}),t}const jc=({children:r,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:c=!1,anchorX:u="left",anchorY:d="top",root:f})=>{const[p,g]=ZP(c),y=Z.useMemo(()=>RT(r),[r]),w=c&&!p?[]:y.map(cy),S=Z.useRef(!0),E=Z.useRef(y),C=IA(()=>new Map),k=Z.useRef(new Set),[M,_]=Z.useState(y),[L,D]=Z.useState(y);Tk(()=>{S.current=!1,E.current=y;for(let U=0;U<L.length;U++){const G=cy(L[U]);w.includes(G)?(C.delete(G),k.current.delete(G)):C.get(G)!==!0&&C.set(G,!1)}},[L,w.length,w.join("-")]);const F=[];if(y!==M){let U=[...y];for(let G=0;G<L.length;G++){const q=L[G],J=cy(q);w.includes(J)||(U.splice(G,0,q),F.push(q))}return a==="wait"&&F.length&&(U=F),D(RT(U)),_(y),null}const{forceRender:j}=Z.useContext(FA);return I.jsx(I.Fragment,{children:L.map(U=>{const G=cy(U),q=c&&!p?!1:y===L||w.includes(G),J=()=>{if(k.current.has(G))return;if(k.current.add(G),C.has(G))C.set(G,!0);else return;let vt=!0;C.forEach(wt=>{wt||(vt=!1)}),vt&&(j==null||j(),D(E.current),c&&(g==null||g()),n&&n())};return I.jsx(PN,{isPresent:q,initial:!S.current||e?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:f,onExitComplete:q?void 0:J,anchorX:u,anchorY:d,children:U},G)})})},JP=Z.createContext({strict:!1}),FT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let IT=!1;function MN(){if(IT)return;const r={};for(const t in FT)r[t]={isEnabled:e=>FT[t].some(n=>!!e[n])};PP(r),IT=!0}function t_(){return MN(),gI()}function DN(r){const t=t_();for(const e in r)t[e]={...t[e],...r[e]};PP(t)}const LN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function p0(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||LN.has(r)}let e_=r=>!p0(r);function RN(r){typeof r=="function"&&(e_=t=>t.startsWith("on")?!p0(t):r(t))}try{RN(require("@emotion/is-prop-valid").default)}catch{}function FN(r,t,e){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(e_(i)||e===!0&&p0(i)||!t&&!p0(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}const q0=Z.createContext({});function IN(r,t){if(K0(r)){const{initial:e,animate:n}=r;return{initial:e===!1||zf(e)?e:void 0,animate:zf(n)?n:void 0}}return r.inherit!==!1?t:{}}function NN(r){const{initial:t,animate:e}=IN(r,Z.useContext(q0));return Z.useMemo(()=>({initial:t,animate:e}),[NT(t),NT(e)])}function NT(r){return Array.isArray(r)?r.join(" "):r}const cb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function n_(r,t,e){for(const n in t)!jn(t[n])&&!IP(n,e)&&(r[n]=t[n])}function ON({transformTemplate:r},t){return Z.useMemo(()=>{const e=cb();return ob(e,t,r),Object.assign({},e.vars,e.style)},[t])}function BN(r,t){const e=r.style||{},n={};return n_(n,e,r),Object.assign(n,ON(r,t)),n}function jN(r,t){const e={},n=BN(r,t);return r.drag&&r.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(e.tabIndex=0),e.style=n,e}const i_=()=>({...cb(),attrs:{}});function VN(r,t,e,n){const i=Z.useMemo(()=>{const a=i_();return NP(a,t,BP(n),r.transformTemplate,r.style),{...a.attrs,style:{...a.style}}},[t]);if(r.style){const a={};n_(a,r.style,r),i.style={...a,...i.style}}return i}const zN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ub(r){return typeof r!="string"||r.includes("-")?!1:!!(zN.indexOf(r)>-1||/[A-Z]/u.test(r))}function UN(r,t,e,{latestValues:n},i,a=!1,c){const d=(c??ub(r)?VN:jN)(t,n,i,r),f=FN(t,typeof r=="string",a),p=r!==Z.Fragment?{...f,...d,ref:e}:{},{children:g}=t,y=Z.useMemo(()=>jn(g)?g.get():g,[g]);return Z.createElement(r,{...p,children:y})}function HN({scrapeMotionValuesFromProps:r,createRenderState:t},e,n,i){return{latestValues:$N(e,n,i,r),renderState:t()}}function $N(r,t,e,n){const i={},a=n(r,{});for(const y in a)i[y]=Ey(a[y]);let{initial:c,animate:u}=r;const d=K0(r),f=TP(r);t&&f&&!d&&r.inherit!==!1&&(c===void 0&&(c=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||c===!1;const g=p?u:c;if(g&&typeof g!="boolean"&&!Y0(g)){const y=Array.isArray(g)?g:[g];for(let w=0;w<y.length;w++){const S=ZA(r,y[w]);if(S){const{transitionEnd:E,transition:C,...k}=S;for(const M in k){let _=k[M];if(Array.isArray(_)){const L=p?_.length-1:0;_=_[L]}_!==null&&(i[M]=_)}for(const M in E)i[M]=E[M]}}}return i}const s_=r=>(t,e)=>{const n=Z.useContext(q0),i=Z.useContext(X0),a=()=>HN(r,t,n,i);return e?a():IA(a)},WN=s_({scrapeMotionValuesFromProps:ab,createRenderState:cb}),GN=s_({scrapeMotionValuesFromProps:jP,createRenderState:i_}),XN=Symbol.for("motionComponentSymbol");function YN(r,t,e){const n=Z.useRef(e);Z.useInsertionEffect(()=>{n.current=e});const i=Z.useRef(null);return Z.useCallback(a=>{var u;a&&((u=r.onMount)==null||u.call(r,a)),t&&(a?t.mount(a):t.unmount());const c=n.current;if(typeof c=="function")if(a){const d=c(a);typeof d=="function"&&(i.current=d)}else i.current?(i.current(),i.current=null):c(a);else c&&(c.current=a)},[t])}const r_=Z.createContext({});function vu(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function KN(r,t,e,n,i,a){var _,L;const{visualElement:c}=Z.useContext(q0),u=Z.useContext(JP),d=Z.useContext(X0),f=Z.useContext(lb),p=f.reducedMotion,g=f.skipAnimations,y=Z.useRef(null),w=Z.useRef(!1);n=n||u.renderer,!y.current&&n&&(y.current=n(r,{visualState:t,parent:c,props:e,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p,skipAnimations:g,isSVG:a}),w.current&&y.current&&(y.current.manuallyAnimateOnMount=!0));const S=y.current,E=Z.useContext(r_);S&&!S.projection&&i&&(S.type==="html"||S.type==="svg")&&qN(y.current,e,i,E);const C=Z.useRef(!1);Z.useInsertionEffect(()=>{S&&C.current&&S.update(e,d)});const k=e[fP],M=Z.useRef(!!k&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,k))&&((L=window.MotionHasOptimisedAnimation)==null?void 0:L.call(window,k)));return Tk(()=>{w.current=!0,S&&(C.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),M.current&&S.animationState&&S.animationState.animateChanges())}),Z.useEffect(()=>{S&&(!M.current&&S.animationState&&S.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)==null||D.call(window,k)}),M.current=!1),S.enteringChildren=void 0)}),S}function qN(r,t,e,n){const{layoutId:i,layout:a,drag:c,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=t;r.projection=new e(r.latestValues,t["data-framer-portal-id"]?void 0:o_(r.parent)),r.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!c||u&&vu(u),visualElement:r,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:d,layoutRoot:f})}function o_(r){if(r)return r.options.allowProjection!==!1?r.projection:o_(r.parent)}function v1(r,{forwardMotionProps:t=!1,type:e}={},n,i){n&&DN(n);const a=e?e==="svg":ub(r),c=a?GN:WN;function u(f,p){let g;const y={...Z.useContext(lb),...f,layoutId:QN(f)},{isStatic:w}=y,S=NN(f),E=c(f,w);if(!w&&Ck){ZN();const C=JN(y);g=C.MeasureLayout,S.visualElement=KN(r,E,y,i,C.ProjectionNode,a)}return I.jsxs(q0.Provider,{value:S,children:[g&&S.visualElement?I.jsx(g,{visualElement:S.visualElement,...y}):null,UN(r,f,YN(E,S.visualElement,p),E,w,t,a)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const d=Z.forwardRef(u);return d[XN]=r,d}function QN({layoutId:r}){const t=Z.useContext(FA).id;return t&&r!==void 0?t+"-"+r:r}function ZN(r,t){Z.useContext(JP).strict}function JN(r){const t=t_(),{drag:e,layout:n}=t;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(r)||n!=null&&n.isEnabled(r)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function tO(r,t){if(typeof Proxy>"u")return v1;const e=new Map,n=(a,c)=>v1(a,c,r,t),i=(a,c)=>n(a,c);return new Proxy(i,{get:(a,c)=>c==="create"?n:(e.has(c)||e.set(c,v1(c,void 0,r,t)),e.get(c))})}const eO=(r,t)=>t.isSVG??ub(r)?new RI(t):new kI(t,{allowProjection:r!==Z.Fragment});class nO extends tl{constructor(t){super(t),t.animationState||(t.animationState=BI(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Y0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let iO=0;class sO extends tl{constructor(){super(...arguments),this.id=iO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const rO={animation:{Feature:nO},exit:{Feature:sO}};function Gm(r){return{point:{x:r.pageX,y:r.pageY}}}const oO=r=>t=>nb(t)&&r(t,Gm(t));function Of(r,t,e,n){return Uf(r,t,oO(e),n)}const a_=({current:r})=>r?r.ownerDocument.defaultView:null,OT=(r,t)=>Math.abs(r-t);function aO(r,t){const e=OT(r.x,t.x),n=OT(r.y,t.y);return Math.sqrt(e**2+n**2)}const BT=new Set(["auto","scroll"]);class l_{constructor(t,e,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=w=>{this.handleScroll(w.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=x1(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,E=aO(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!E)return;const{point:C}=w,{timestamp:k}=Sn;this.history.push({...C,timestamp:k});const{onStart:M,onMove:_}=this.handlers;S||(M&&M(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,w)},this.handlePointerMove=(w,S)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=w1(S,this.transformPagePoint),me.update(this.updatePoint,!0)},this.handlePointerUp=(w,S)=>{this.end();const{onEnd:E,onSessionEnd:C,resumeAnimation:k}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=x1(w.type==="pointercancel"?this.lastMoveEventInfo:w1(S,this.transformPagePoint),this.history);this.startEvent&&E&&E(w,M),C&&C(w,M)},!nb(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=c,this.contextWindow=i||window;const d=Gm(t),f=w1(d,this.transformPagePoint),{point:p}=f,{timestamp:g}=Sn;this.history=[{...p,timestamp:g}];const{onSessionStart:y}=e;y&&y(t,x1(f,this.history)),this.removeListeners=Hm(Of(this.contextWindow,"pointermove",this.handlePointerMove),Of(this.contextWindow,"pointerup",this.handlePointerUp),Of(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(BT.has(n.overflowX)||BT.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,i=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},a={x:i.x-e.x,y:i.y-e.y};a.x===0&&a.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(t,i),me.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),qa(this.updatePoint)}}function w1(r,t){return t?{point:t(r.point)}:r}function jT(r,t){return{x:r.x-t.x,y:r.y-t.y}}function x1({point:r},t){return{point:r,delta:jT(r,c_(t)),offset:jT(r,lO(t)),velocity:cO(t,.1)}}function lO(r){return r[0]}function c_(r){return r[r.length-1]}function cO(r,t){if(r.length<2)return{x:0,y:0};let e=r.length-1,n=null;const i=c_(r);for(;e>=0&&(n=r[e],!(i.timestamp-n.timestamp>Us(t)));)e--;if(!n)return{x:0,y:0};n===r[0]&&r.length>2&&i.timestamp-n.timestamp>Us(t)*2&&(n=r[1]);const a=ps(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const c={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function uO(r,{min:t,max:e},n){return t!==void 0&&r<t?r=n?Pe(t,r,n.min):Math.max(r,t):e!==void 0&&r>e&&(r=n?Pe(e,r,n.max):Math.min(r,e)),r}function VT(r,t,e){return{min:t!==void 0?r.min+t:void 0,max:e!==void 0?r.max+e-(r.max-r.min):void 0}}function hO(r,{top:t,left:e,bottom:n,right:i}){return{x:VT(r.x,e,i),y:VT(r.y,t,n)}}function zT(r,t){let e=t.min-r.min,n=t.max-r.max;return t.max-t.min<r.max-r.min&&([e,n]=[n,e]),{min:e,max:n}}function dO(r,t){return{x:zT(r.x,t.x),y:zT(r.y,t.y)}}function fO(r,t){let e=.5;const n=Kn(r),i=Kn(t);return i>n?e=Bf(t.min,t.max-n,r.min):n>i&&(e=Bf(r.min,r.max-i,t.min)),Er(0,1,e)}function pO(r,t){const e={};return t.min!==void 0&&(e.min=t.min-r.min),t.max!==void 0&&(e.max=t.max-r.min),e}const ex=.35;function mO(r=ex){return r===!1?r=0:r===!0&&(r=ex),{x:UT(r,"left","right"),y:UT(r,"top","bottom")}}function UT(r,t,e){return{min:HT(r,t),max:HT(r,e)}}function HT(r,t){return typeof r=="number"?r:r[t]||0}const gO=new WeakMap;class yO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=en(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{e&&this.snapToCursor(Gm(g).point),this.stopAnimation()},c=(g,y)=>{const{drag:w,dragPropagation:S,onDragStart:E}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=GF(w),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Js(k=>{let M=this.getAxisMotionValue(k).get()||0;if(Sr.test(M)){const{projection:_}=this.visualElement;if(_&&_.layout){const L=_.layout.layoutBox[k];L&&(M=Kn(L)*(parseFloat(M)/100))}}this.originPoint[k]=M}),E&&me.update(()=>E(g,y),!1,!0),G1(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},u=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:E,onDrag:C}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:k}=y;if(S&&this.currentDirection===null){this.currentDirection=wO(k),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",y.point,k),this.updateAxis("y",y.point,k),this.visualElement.render(),C&&me.update(()=>C(g,y),!1,!0)},d=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:g}=this.getProps();(g||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new l_(t,{onSessionStart:a,onStart:c,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:a_(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,i=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&me.postRender(()=>u(n,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:i}=this.getProps();if(!n||!uy(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let c=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(c=uO(c,this.constraints[t],this.elastic[t])),a.set(c)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;t&&vu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=hO(n.layoutBox,t):this.constraints=!1,this.elastic=mO(e),i!==this.constraints&&!vu(t)&&n&&this.constraints&&!this.hasMutatedConstraints&&Js(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=pO(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!vu(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=AI(n,i.root,this.visualElement.getTransformPagePoint());let c=dO(i.layout.layoutBox,a);if(e){const u=e(vI(c));this.hasMutatedConstraints=!!u,u&&(c=MP(u))}return c}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=Js(p=>{if(!uy(p,e,this.currentDirection))return;let g=d&&d[p]||{};c&&(g={min:0,max:0});const y=i?200:1e6,w=i?40:1e7,S={type:"inertia",velocity:n?t[p]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,S)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return G1(this.visualElement,t),n.start(QA(t,n,0,e,this.visualElement,!1))}stopAnimation(){Js(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[e];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Js(e=>{const{drag:n}=this.getProps();if(!uy(e,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(e);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[e],d=a.get()||0;a.set(t[e]-Pe(c,u,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!vu(e)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Js(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const d=u.get();i[c]=fO({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),Js(c=>{if(!uy(c,t,null))return;const u=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];u.set(Pe(d,f,i[c]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;gO.set(this.visualElement,this);const t=this.visualElement.current,e=Of(t,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps(),y=f.target,w=y!==t&&ZF(y);p&&g&&!w&&this.start(f)});let n;const i=()=>{const{dragConstraints:f}=this.getProps();vu(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),n||(n=vO(t,f.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,c=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),me.read(i);const u=Uf(window,"resize",()=>this.scalePositionWithinConstraints()),d=a.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Js(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())}));return()=>{u(),e(),c(),d&&d(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:c=ex,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:c,dragMomentum:u}}}function $T(r){let t=!0;return()=>{if(t){t=!1;return}r()}}function vO(r,t,e){const n=QC(r,$T(e)),i=QC(t,$T(e));return()=>{n(),i()}}function uy(r,t,e){return(t===!0||t===r)&&(e===null||e===r)}function wO(r,t=10){let e=null;return Math.abs(r.y)>t?e="y":Math.abs(r.x)>t&&(e="x"),e}class xO extends tl{constructor(t){super(t),this.removeGroupControls=ms,this.removeListeners=ms,this.controls=new yO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ms}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const A1=r=>(t,e)=>{r&&me.update(()=>r(t,e),!1,!0)};class AO extends tl{constructor(){super(...arguments),this.removePointerDownListener=ms}onPointerDown(t){this.session=new l_(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:a_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:A1(t),onStart:A1(e),onMove:A1(n),onEnd:(a,c)=>{delete this.session,i&&me.postRender(()=>i(a,c))}}}mount(){this.removePointerDownListener=Of(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let b1=!1;class bO extends Z.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=t;a&&(e.group&&e.group.add(a),n&&n.register&&i&&n.register(a),b1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Cy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:i,isPresent:a}=this.props,{projection:c}=n;return c&&(c.isPresent=a,t.layoutDependency!==e&&c.setOptions({...c.options,layoutDependency:e}),b1=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==a?c.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?c.promote():c.relegate()||me.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),eb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:i}=t;b1=!0,i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function u_(r){const[t,e]=ZP(),n=Z.useContext(FA);return I.jsx(bO,{...r,layoutGroup:n,switchLayoutGroup:Z.useContext(r_),isPresent:t,safeToRemove:e})}const SO={pan:{Feature:AO},drag:{Feature:xO,ProjectionNode:QP,MeasureLayout:u_}};function WT(r,t,e){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,a=n[i];a&&me.postRender(()=>a(t,Gm(t)))}class EO extends tl{mount(){const{current:t}=this.node;t&&(this.unmount=YF(t,(e,n)=>(WT(this.node,n,"Start"),i=>WT(this.node,i,"End"))))}unmount(){}}class CO extends tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hm(Uf(this.node.current,"focus",()=>this.onFocus()),Uf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GT(r,t,e){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),a=n[i];a&&me.postRender(()=>a(t,Gm(t)))}class TO extends tl{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:e,propagate:n}=this.node.props;this.unmount=tI(t,(i,a)=>(GT(this.node,a,"Start"),(c,{success:u})=>GT(this.node,c,u?"End":"Cancel")),{useGlobalTarget:e,stopPropagation:(n==null?void 0:n.tap)===!1})}unmount(){}}const nx=new WeakMap,S1=new WeakMap,kO=r=>{const t=nx.get(r.target);t&&t(r)},PO=r=>{r.forEach(kO)};function _O({root:r,...t}){const e=r||document;S1.has(e)||S1.set(e,{});const n=S1.get(e),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(PO,{root:r,...t})),n[i]}function MO(r,t,e){const n=_O(t);return nx.set(r,e),n.observe(r),()=>{nx.delete(r),n.unobserve(r)}}const DO={some:0,all:1};class LO extends tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:i="some",once:a}=t,c={root:e?e.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:DO[i]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=f?p:g;y&&y(d)};return MO(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(RO(t,e))&&this.startObserver()}unmount(){}}function RO({viewport:r={}},{viewport:t={}}={}){return e=>r[e]!==t[e]}const FO={inView:{Feature:LO},tap:{Feature:TO},focus:{Feature:CO},hover:{Feature:EO}},IO={layout:{ProjectionNode:QP,MeasureLayout:u_}},NO={...rO,...FO,...SO,...IO},te=tO(NO,eO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BO=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),XT=r=>{const t=BO(r);return t.charAt(0).toUpperCase()+t.slice(1)},h_=(...r)=>r.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=Z.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:c,...u},d)=>Z.createElement("svg",{ref:d,...jO,width:t,height:t,stroke:r,strokeWidth:n?Number(e)*24/Number(t):e,className:h_("lucide",i),...u},[...c.map(([f,p])=>Z.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(r,t)=>{const e=Z.forwardRef(({className:n,...i},a)=>Z.createElement(VO,{ref:a,iconNode:t,className:h_(`lucide-${OO(XT(r))}`,`lucide-${r}`,n),...i}));return e.displayName=XT(r),e};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],UO=le("arrow-right",zO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$O=le("book-open",HO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],YT=le("chevron-down",WO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],XO=le("chevron-left",GO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],d_=le("circle-check",YO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qO=le("circle",KO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],ZO=le("eraser",QO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tB=le("file-text",JO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],nB=le("grid-3x3",eB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],sB=le("highlighter",iB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M7 22a5 5 0 0 1-2-4",key:"umushi"}],["path",{d:"M3.3 14A6.8 6.8 0 0 1 2 10c0-4.4 4.5-8 10-8s10 3.6 10 8-4.5 8-10 8a12 12 0 0 1-5-1",key:"146dds"}],["path",{d:"M5 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",key:"bq3ynw"}]],oB=le("lasso",rB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],f_=le("message-square-text",aB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],cB=le("mic-off",lB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],hb=le("mic",uB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M5 12h14",key:"1ays0h"}]],dB=le("minus",hB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pB=le("pen",fB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],gB=le("pencil",mB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],vB=le("redo-2",yB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],xB=le("signal",wB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Q0=le("sparkles",AB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],SB=le("square",bB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],CB=le("type",EB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],kB=le("undo-2",TB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],KT=le("upload",PB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],MB=le("wifi",_B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],LB=le("x",DB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],FB=le("zoom-in",RB);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],NB=le("zoom-out",IB),OB=["#1C1C1E","#EF4444","#3B82F6","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280"],BB=[{label:"XS",value:1},{label:"S",value:2},{label:"M",value:4},{label:"L",value:8}];function jB({currentTool:r,currentColor:t,strokeSize:e,onToolChange:n,onColorChange:i,onStrokeSizeChange:a,onUndo:c,onRedo:u,onClear:d,noteTitle:f,activeScene:p,onTranscript:g}){const[y,w]=Z.useState(!1),S=[{id:"select",icon:oB,label:"Select"},{id:"pen",icon:pB,label:"Pen"},{id:"pencil",icon:gB,label:"Pencil"},{id:"highlighter",icon:sB,label:"Highlighter"},{id:"eraser",icon:ZO,label:"Eraser"},{id:"text",icon:CB,label:"Text"}],E=p===1?"Upload":p===4?"Session Review":f;return I.jsxs("div",{className:"h-14 bg-white border-b border-[#E5E5EA] flex items-center px-3 gap-2 relative z-10 shadow-sm",children:[I.jsxs("div",{className:"flex items-center gap-2 mr-2 min-w-0",children:[I.jsx("span",{className:"text-[#1C1C1E] font-semibold truncate max-w-[180px]",style:{fontFamily:"Inter",fontSize:14},children:E}),I.jsx(YT,{size:13,className:"text-[#8E8E93] flex-shrink-0"})]}),I.jsx("div",{className:"w-px h-8 bg-[#E5E5EA] flex-shrink-0"}),I.jsx("div",{className:"flex items-center gap-0.5 bg-[#F2F2F7] rounded-xl p-1 flex-shrink-0",children:S.map(C=>I.jsx("button",{onClick:()=>n(C.id),title:C.label,className:`relative w-8 h-8 rounded-lg flex items-center justify-center transition-all ${r===C.id?"bg-white shadow-sm":"hover:bg-white/60"}`,children:I.jsx(C.icon,{size:15,style:{color:r===C.id?C.id==="eraser"?"#6366F1":t:"#6B7280"}})},C.id))}),I.jsx("div",{className:"w-px h-8 bg-[#E5E5EA] flex-shrink-0"}),I.jsx("div",{className:"flex items-center gap-0.5 bg-[#F2F2F7] rounded-xl p-1 flex-shrink-0",children:[{id:"line",icon:dB},{id:"circle",icon:qO},{id:"rect",icon:SB}].map(C=>I.jsx("button",{onClick:()=>n(C.id),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${r===C.id?"bg-white shadow-sm":"hover:bg-white/50"}`,children:I.jsx(C.icon,{size:14,style:{color:r===C.id?t:"#6B7280"}})},C.id))}),I.jsx("div",{className:"w-px h-8 bg-[#E5E5EA] flex-shrink-0"}),I.jsxs("div",{className:"relative flex-shrink-0",children:[I.jsxs("button",{onClick:()=>w(!y),className:"flex items-center gap-1.5 bg-[#F2F2F7] rounded-xl px-2.5 py-1.5 hover:bg-[#E5E5EA] transition-colors",children:[I.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:t}}),I.jsx(YT,{size:11,className:"text-[#8E8E93]"})]}),I.jsx(jc,{children:y&&I.jsx(te.div,{initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},className:"absolute top-full mt-2 left-0 bg-white rounded-2xl shadow-xl border border-[#E5E5EA] p-3 z-50",children:I.jsx("div",{className:"grid grid-cols-4 gap-2",children:OB.map(C=>I.jsx("button",{onClick:()=>{i(C),w(!1)},className:"w-7 h-7 rounded-full transition-transform hover:scale-110",style:{backgroundColor:C}},C))})})})]}),I.jsx("div",{className:"flex items-center gap-0.5 bg-[#F2F2F7] rounded-xl px-1.5 py-1 flex-shrink-0",children:BB.map(C=>I.jsx("button",{onClick:()=>a(C.value),className:`w-7 h-7 rounded-lg flex items-center justify-center transition-all ${e===C.value?"bg-white shadow-sm":"hover:bg-white/50"}`,children:I.jsx("div",{className:"rounded-full",style:{width:C.value+1,height:C.value+1,backgroundColor:e===C.value?t:"#9CA3AF"}})},C.value))}),I.jsx("div",{className:"w-px h-8 bg-[#E5E5EA] flex-shrink-0"}),I.jsxs("div",{className:"flex items-center gap-0.5 bg-[#F2F2F7] rounded-xl p-1 flex-shrink-0",children:[I.jsx("button",{onClick:c,className:"w-8 h-8 rounded-lg flex items-center justify-center hover:bg-white/60",children:I.jsx(kB,{size:15,className:"text-[#6B7280]"})}),I.jsx("button",{onClick:u,className:"w-8 h-8 rounded-lg flex items-center justify-center hover:bg-white/60",children:I.jsx(vB,{size:15,className:"text-[#6B7280]"})})]}),I.jsx("div",{className:"w-px h-8 bg-[#E5E5EA] flex-shrink-0"}),I.jsx("button",{className:"flex items-center gap-1 bg-[#F2F2F7] rounded-xl px-2.5 py-1.5 hover:bg-[#E5E5EA] flex-shrink-0",children:I.jsx(nB,{size:13,className:"text-[#6B7280]"})}),I.jsx("button",{onClick:d,className:"flex items-center gap-1 bg-[#F2F2F7] rounded-xl px-2.5 py-1.5 hover:bg-red-50 transition-colors text-xs text-[#6B7280] hover:text-[#EF4444] flex-shrink-0",style:{fontFamily:"Inter"},children:"Clear"}),I.jsx("div",{className:"flex-1"}),I.jsxs("div",{className:"flex items-center gap-0.5 bg-[#F2F2F7] rounded-xl p-1 flex-shrink-0",children:[I.jsx("button",{className:"w-7 h-7 rounded-lg flex items-center justify-center hover:bg-white/60",children:I.jsx(NB,{size:13,className:"text-[#6B7280]"})}),I.jsx("span",{className:"text-xs text-[#8E8E93] px-1",style:{fontFamily:"Inter"},children:"100%"}),I.jsx("button",{className:"w-7 h-7 rounded-lg flex items-center justify-center hover:bg-white/60",children:I.jsx(FB,{size:13,className:"text-[#6B7280]"})})]}),(p===2||p===3)&&I.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 bg-[#F2F2F7] hover:bg-[#EEF2FF] border border-transparent hover:border-[#C7D2FE] rounded-xl px-3 py-1.5 transition-all text-xs text-[#6B7280] hover:text-[#6366F1] font-medium flex-shrink-0",style:{fontFamily:"Inter"},children:[I.jsx(f_,{size:13}),"Transcript"]})]})}const VB={2:{title:"Scene 2  Problem 1 Voiceover Script",entries:[{role:"student",text:"Let me try some examples first... 1 squared is 1, 3 squared is 9, 5 squared is 25... they all seem to be odd. It looks like it's always true, but I don't know how to formally prove this."},{role:"ai",text:"Take a look at what I've written next to your examples  do you notice a pattern in how each of those odd numbers is expressed?"},{role:"student",text:"Oh  they all fit the form 2k plus 1... so any odd number can be written as 2k plus 1 for some integer k."},{role:"ai",text:"Exactly. Can you use that representation to construct a general proof?"},{role:"student",text:"So... let n be any odd integer. Then n equals 2k plus 1. Squaring it gives 4k squared plus 4k plus 1, which I can factor as 2 times 2k squared plus 2k, plus 1. That's of the form 2m plus 1, so n squared is odd!"},{role:"ai",text:"Perfect  you've shown that for any odd integer n, n squared must also be odd. That's a complete direct proof!"}]},3:{title:"Scene 3  Problem 2 Voiceover Script",entries:[{role:"student",text:"Okay, mn is even so mn equals 2k, and m is odd so m equals 2p plus 1. Let me solve for n... n equals 2k divided by 2p plus 1. Hmm, that doesn't simplify to an integer. I'm stuck."},{role:"ai",text:"Good observation  you noticed that this direct approach isn't working. When direct proofs get complicated like this, what other proof strategies do you know of?"},{role:"student",text:"I know there's proof by contradiction, but I've kind of forgotten how it works exactly."},{role:"ai",text:"With proof by contradiction, you start by assuming the opposite of what you want to prove, and show that leads to something impossible. Here, what are you trying to prove?"},{role:"student",text:"That n is even... so I'd assume n is odd. Then n equals 2q plus 1. Let me multiply mn out..."},{role:"ai",text:"Keep going  expand that product all the way and see what you can conclude about its parity."},{role:"student",text:"So mn equals 2p plus 1 times 2q plus 1, which expands to 4pq plus 2p plus 2q plus 1, equals 2 times 2pq plus p plus q, plus 1. That's odd! But mn is supposed to be EVEN  contradiction! So n can't be odd, therefore n must be even!"},{role:"ai",text:"Excellent! You've completed the proof by contradiction. You assumed n was odd, derived that mn would have to be odd, but that contradicts the given that mn is even. Therefore n must be even."}]}};function zB({isOpen:r,onClose:t,scene:e}){const n=VB[e];return I.jsx(jc,{children:r&&I.jsxs(I.Fragment,{children:[I.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[100]"}),I.jsxs(te.div,{initial:{opacity:0,scale:.95,y:-16},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-16},transition:{type:"spring",stiffness:350,damping:28},className:"absolute top-16 right-4 z-[101] w-96 bg-white rounded-3xl shadow-2xl border border-[#E5E5EA] overflow-hidden",style:{maxHeight:"calc(100% - 100px)"},children:[I.jsxs("div",{className:"bg-gradient-to-r from-[#6366F1] to-[#8B5CF6] px-5 py-4 flex items-center gap-3",children:[I.jsx("div",{className:"w-8 h-8 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0",children:I.jsx(f_,{size:16,color:"white"})}),I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("p",{className:"text-white font-semibold text-sm",style:{fontFamily:"Inter"},children:n?n.title:"Session Transcript"}),I.jsx("p",{className:"text-white/60 text-xs",style:{fontFamily:"Inter"},children:"Voiceover reference script"})]}),I.jsx("button",{onClick:t,className:"w-7 h-7 rounded-xl bg-white/10 hover:bg-white/25 flex items-center justify-center transition-colors",children:I.jsx(LB,{size:14,color:"white"})})]}),I.jsx("div",{className:"overflow-y-auto p-4 space-y-3",style:{maxHeight:420},children:n?n.entries.map((i,a)=>I.jsxs("div",{className:`flex gap-2.5 ${i.role==="student"?"flex-row-reverse":""}`,children:[I.jsx("div",{className:`w-6 h-6 rounded-xl flex items-center justify-center flex-shrink-0 mt-0.5 ${i.role==="ai"?"bg-gradient-to-br from-[#6366F1] to-[#8B5CF6]":"bg-[#F2F2F7] border border-[#E5E5EA]"}`,children:i.role==="ai"?I.jsx(Q0,{size:11,color:"white"}):I.jsx(hb,{size:11,className:"text-[#6B7280]"})}),I.jsxs("div",{className:`rounded-2xl px-3 py-2 text-xs leading-relaxed max-w-[82%] ${i.role==="ai"?"bg-[#F2F2F7] text-[#1C1C1E] rounded-tl-sm":"bg-[#EEF2FF] text-[#3730A3] rounded-tr-sm border border-[#C7D2FE]"}`,style:{fontFamily:"Inter"},children:[I.jsx("span",{className:`font-semibold text-[10px] block mb-1 ${i.role==="ai"?"text-[#6366F1]":"text-[#4338CA]"}`,children:i.role==="ai"?"AI Tutor":"Student"}),i.text]})]},a)):I.jsx("div",{className:"text-center py-8",children:I.jsx("p",{className:"text-sm text-[#8E8E93]",style:{fontFamily:"Inter"},children:"No transcript available for this scene."})})}),I.jsxs("div",{className:"px-4 py-3 border-t border-[#F2F2F7] flex items-center justify-between",children:[I.jsx("p",{className:"text-[10px] text-[#8E8E93]",style:{fontFamily:"Inter"},children:n?`${n.entries.length} exchanges`:""}),I.jsx("p",{className:"text-[10px] text-[#8E8E93]",style:{fontFamily:"Inter"},children:"Use as voiceover reference"})]})]})]})})}const Xn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ix=[.001,0,0,.001,0,0],E1=1.35,ji={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ta={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Hf="pdfjs_internal_editor_",Lt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},UB={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},sx={TRIANGLES:1,LATTICE:2},Ze={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ty={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$e={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},wu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Z0={ERRORS:0,WARNINGS:1,INFOS:5},$f={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},af={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},HB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let J0=Z0.WARNINGS;function $B(r){Number.isInteger(r)&&(J0=r)}function WB(){return J0}function tv(r){J0>=Z0.INFOS&&console.info(`Info: ${r}`)}function _t(r){J0>=Z0.WARNINGS&&console.warn(`Warning: ${r}`)}function Yt(r){throw new Error(r)}function Xt(r,t){r||Yt(t)}function GB(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function p_(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"){if(e.addDefaultProtocol&&r.startsWith("www.")){const i=r.match(/\./g);(i==null?void 0:i.length)>=2&&(r=`http://${r}`)}if(e.tryConvertEncoding)try{r=ZB(r)}catch{}}const n=t?URL.parse(r,t):URL.parse(r);return GB(n)?n:null}function m_(r,t,e=!1){const n=URL.parse(r);return n?(n.hash=t,n.href):e&&p_(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Mt(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Hc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class qT extends Hc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class C1 extends Hc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class rx extends Hc{constructor(t){super(t,"InvalidPDFException")}}class m0 extends Hc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class XB extends Hc{constructor(t){super(t,"FormatError")}}class Qa extends Hc{constructor(t){super(t,"AbortException")}}function YB(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Yt("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<t;i+=e){const a=Math.min(i+e,t),c=r.subarray(i,a);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function ev(r){typeof r!="string"&&Yt("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function KB(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function qB(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function QB(){try{return new Function(""),!0}catch{return!1}}class sn{static get isLittleEndian(){return Mt(this,"isLittleEndian",qB())}static get isEvalSupported(){return Mt(this,"isEvalSupported",QB())}static get isOffscreenCanvasSupported(){return Mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Mt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Mt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Mt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Mt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Mt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const T1=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var Co,ky,ox;class rt{static makeHexColor(t,e,n){return`#${T1[t]}${T1[e]}${T1[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],a=t[n+1];t[n]=i*e[0]+a*e[2]+e[4],t[n+1]=i*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],a=e[1],c=e[2],u=e[3],d=e[4],f=e[5];for(let p=0;p<6;p+=2){const g=t[n+p],y=t[n+p+1];t[n+p]=g*i+y*c+d,t[n+p+1]=g*a+y*u+f}}static applyInverseTransform(t,e){const n=t[0],i=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,n){const i=e[0],a=e[1],c=e[2],u=e[3],d=e[4],f=e[5],p=t[0],g=t[1],y=t[2],w=t[3];let S=i*p+d,E=S,C=i*y+d,k=C,M=u*g+f,_=M,L=u*w+f,D=L;if(a!==0||c!==0){const F=a*p,j=a*y,U=c*g,G=c*w;S+=U,k+=U,C+=G,E+=G,M+=F,D+=F,L+=j,_+=j}n[0]=Math.min(n[0],S,C,E,k),n[1]=Math.min(n[1],M,L,_,D),n[2]=Math.max(n[2],S,C,E,k),n[3]=Math.max(n[3],M,L,_,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],a=t[2],c=t[3],u=n**2+i**2,d=n*a+i*c,f=a**2+c**2,p=(u+f)/2,g=Math.sqrt(p**2-(u*f-d**2));e[0]=Math.sqrt(p+g||1),e[1]=Math.sqrt(p-g||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>c?null:[n,a,i,c]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,a){a[0]=Math.min(a[0],t,n),a[1]=Math.min(a[1],e,i),a[2]=Math.max(a[2],t,n),a[3]=Math.max(a[3],e,i)}static bezierBoundingBox(t,e,n,i,a,c,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),T(this,Co,ox).call(this,t,n,a,u,e,i,c,d,3*(-t+3*(n-a)+u),6*(t-2*n+a),3*(n-t),f),T(this,Co,ox).call(this,t,n,a,u,e,i,c,d,3*(-e+3*(i-c)+d),6*(e-2*i+c),3*(i-e),f)}}Co=new WeakSet,ky=function(t,e,n,i,a,c,u,d,f,p){if(f<=0||f>=1)return;const g=1-f,y=f*f,w=y*f,S=g*(g*(g*t+3*f*e)+3*y*n)+w*i,E=g*(g*(g*a+3*f*c)+3*y*u)+w*d;p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],E),p[2]=Math.max(p[2],S),p[3]=Math.max(p[3],E)},ox=function(t,e,n,i,a,c,u,d,f,p,g,y){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&T(this,Co,ky).call(this,t,e,n,i,a,c,u,d,-g/p,y);return}const w=p**2-4*g*f;if(w<0)return;const S=Math.sqrt(w),E=2*f;T(this,Co,ky).call(this,t,e,n,i,a,c,u,d,(-p+S)/E,y),T(this,Co,ky).call(this,t,e,n,i,a,c,u,d,(-p-S)/E,y)},b(rt,Co);function ZB(r){return decodeURIComponent(escape(r))}let k1=null,QT=null;function JB(r){return k1||(k1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,QT=new Map([["","t"]])),r.replaceAll(k1,(t,e,n)=>e?e.normalize("NFKC"):QT.get(n))}function g_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),YB(r)}const Lu="pdfjs_internal_id_";function t3(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...a]=e;if(!r(n)&&!Number.isInteger(n)||!t(i))return!1;const c=a.length;let u=!0;switch(i.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of a)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function En(r,t,e){return Math.min(Math.max(r,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class Wf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(a){var d;if(!a)return;let c=null;const u=a.name;if(u==="#text")c=a.value;else if(Wf.shouldBuildText(u))(d=a==null?void 0:a.attributes)!=null&&d.textContent?c=a.attributes.textContent:a.value&&(c=a.value);else return;if(c!==null&&e.push({str:c}),!!a.children)for(const f of a.children)i(f)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class y_{static setupStorage(t,e,n,i,a){const c=i.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),a==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{i.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),a==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:a}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${i}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&a.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var g,y;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,a=t.intent||"display",c=document.createElement(i.name);i.attributes&&this.setAttributes({html:c,element:i,intent:a,linkService:n});const u=a!=="richText",d=t.div;if(d.append(c),t.viewport){const w=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=w}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const w=document.createTextNode(i.value);c.append(w),u&&Wf.shouldBuildText(i.name)&&f.push(w)}return{textDivs:f}}const p=[[i,-1,c]];for(;p.length>0;){const[w,S,E]=p.at(-1);if(S+1===w.children.length){p.pop();continue}const C=w.children[++p.at(-1)[1]];if(C===null)continue;const{name:k}=C;if(k==="#text"){const _=document.createTextNode(C.value);f.push(_),E.append(_);continue}const M=(g=C==null?void 0:C.attributes)!=null&&g.xmlns?document.createElementNS(C.attributes.xmlns,k):document.createElement(k);if(E.append(M),C.attributes&&this.setAttributes({html:M,element:C,storage:e,intent:a,linkService:n}),((y=C.children)==null?void 0:y.length)>0)p.push([C,-1,M]);else if(C.value){const _=document.createTextNode(C.value);u&&Wf.shouldBuildText(k)&&f.push(_),M.append(_)}}for(const w of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Nr="http://www.w3.org/2000/svg",xl=class xl{};$(xl,"CSS",96),$(xl,"PDF",72),$(xl,"PDF_TO_CSS_UNITS",xl.CSS/xl.PDF);let Za=xl;async function Xm(r,t="text"){if(ff(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class Ym{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:a=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=c,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,g,y,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,g=0,y=0,w=1;break;case 90:p=0,g=1,y=1,w=0;break;case 270:p=0,g=-1,y=-1,w=0;break;case 0:p=1,g=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,w=-w);let S,E,C,k;p===0?(S=Math.abs(f-t[1])*n+a,E=Math.abs(d-t[0])*n+c,C=(t[3]-t[1])*n,k=(t[2]-t[0])*n):(S=Math.abs(d-t[0])*n+a,E=Math.abs(f-t[1])*n+c,C=(t[2]-t[0])*n,k=(t[3]-t[1])*n),this.transform=[p*n,g*n,y*n,w*n,S-p*n*d-y*n*f,E-g*n*d-w*n*f],this.width=C,this.height=k}get rawDims(){const t=this.viewBox;return Mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new Ym({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(t,e){const n=[t,e];return rt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];rt.applyTransform(e,this.transform);const n=[t[2],t[3]];return rt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return rt.applyInverseTransform(n,this.transform),n}}class db extends Hc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function nv(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function fb(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function e3(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function n3(r,t="document.pdf"){if(typeof r!="string")return t;if(nv(r))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return t;const i=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},a=/\.pdf$/i,c=n.pathname.split("/").at(-1);if(a.test(c))return i(c);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(a.test(f))return i(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(a.test(f))return i(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return i(d[0])}return t}class ZT{constructor(){$(this,"started",Object.create(null));$(this,"times",[])}time(t){t in this.started&&_t(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||_t(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-i}ms
`);return t.join("")}}function ff(r,t){const e=t?URL.parse(r,t):URL.parse(r);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function ys(r){r.preventDefault()}function Ne(r){r.preventDefault(),r.stopPropagation()}function i3(r){console.log("Deprecated API usage: "+r)}var Kf;class g0{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;l(this,Kf)||x(this,Kf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,Kf).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(c+=p,u+=g):f==="+"&&(c-=p,u-=g),new Date(Date.UTC(n,i,a,c,u,d))}}Kf=new WeakMap,b(g0,Kf);function s3(r,{scale:t=1,rotation:e=0}){const{width:n,height:i}=r.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new Ym({viewBox:a,userUnit:1,scale:t,rotation:e})}function Km(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(_t(`Not a valid color format: "${r}"`),[0,0,0])}function r3(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,Km(n))}t.remove()}function ke(r){const{a:t,b:e,c:n,d:i,e:a,f:c}=r.getTransform();return[t,e,n,i,a,c]}function qs(r){const{a:t,b:e,c:n,d:i,e:a,f:c}=r.getTransform().invertSelf();return[t,e,n,i,a,c]}function Vc(r,t,e=!1,n=!0){if(t instanceof Ym){const{pageWidth:i,pageHeight:a}=t.rawDims,{style:c}=r,u=sn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${i}px`,f=`var(--total-scale-factor) * ${a}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,g=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=p,c.height=g):(c.width=g,c.height=p)}n&&r.setAttribute("data-main-rotation",t.rotation)}class Cr{constructor(){const{pixelRatio:t}=Cr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,a=-1){let c=1/0,u=1/0,d=1/0;n=Cr.capPixels(n,a),n>0&&(c=Math.sqrt(n/(t*e))),i!==-1&&(u=i/t,d=i/e);const f=Math.min(c,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const ax=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class o3{static get isDarkMode(){var t;return Mt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class a3{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Mt(this,"commentForegroundColor",Km(n))}}function l3(r,t,e,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return r=Math.round(r*n+i),t=Math.round(t*n+i),e=Math.round(e*n+i),[r,t,e]}function JT(r,t){const e=r[0]/255,n=r[1]/255,i=r[2]/255,a=Math.max(e,n,i),c=Math.min(e,n,i),u=(a+c)/2;if(a===c)t[0]=t[1]=0;else{const d=a-c;switch(t[1]=u<.5?d/(a+c):d/(2-a-c),a){case e:t[0]=((n-i)/d+(n<i?6:0))*60;break;case n:t[0]=((i-e)/d+2)*60;break;case i:t[0]=((e-n)/d+4)*60;break}}t[2]=u}function lx(r,t){const e=r[0],n=r[1],i=r[2],a=(1-Math.abs(2*i-1))*n,c=a*(1-Math.abs(e/60%2-1)),u=i-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=a+u,t[2]=u;break;case 2:t[0]=u,t[1]=a+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=a+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=a+u;break;case 5:case 6:t[0]=a+u,t[1]=u,t[2]=c+u;break}}function tk(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function ek(r,t,e){lx(r,e),e.map(tk);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];lx(t,e),e.map(tk);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const nk=new Map;function c3(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=nk.get(e);if(n)return n;const i=new Float32Array(9),a=i.subarray(0,3),c=i.subarray(3,6);JT(r,c);const u=i.subarray(6,9);JT(t,u);const d=u[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),ek(c,u,a)<f){let p,g;d?(p=c[2],g=1):(p=0,g=c[2]);const y=.005;for(;g-p>y;){const w=c[2]=(p+g)/2;d===ek(c,u,a)<f?p=w:g=w}c[2]=d?g:p}return lx(c,a),n=rt.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),nk.set(e,n),n}function v_({html:r,dir:t,className:e},n){const i=document.createDocumentFragment();if(typeof r=="string"){const a=document.createElement("p");a.dir=t||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let u=0,d=c.length;u<d;++u){const f=c[u];a.append(document.createTextNode(f)),u<d-1&&a.append(document.createElement("br"))}i.append(a)}else y_.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",e),n.append(i)}function w_(r){const t=new Path2D;if(!r)return t;for(let e=0,n=r.length;e<n;)switch(r[e++]){case af.moveTo:t.moveTo(r[e++],r[e++]);break;case af.lineTo:t.lineTo(r[e++],r[e++]);break;case af.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case af.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case af.closePath:t.closePath();break;default:_t(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}var zr,_s,Vu,ea,Tl,fd,x_,A_;const Vt=class Vt{constructor(){b(this,fd)}get pagesNumber(){return l(Vt,ea)}set pagesNumber(t){l(Vt,ea)!==t&&(x(Vt,ea,t),t===0&&(x(Vt,_s,null),x(Vt,zr,null)))}addListener(t){l(Vt,Tl).push(t)}removeListener(t){const e=l(Vt,Tl).indexOf(t);e>=0&&l(Vt,Tl).splice(e,1)}movePages(t,e,n){T(this,fd,A_).call(this,!0);const i=l(Vt,_s),a=l(Vt,zr);l(Vt,Vu).set(a);const c=e.length,u=new Uint32Array(c);let d=0;for(let w=0;w<c;w++){const S=e[w]-1;u[w]=i[S],S<n&&(d+=1)}const f=l(Vt,ea);let p=n-d;const g=f-c;p=En(p,0,g);for(let w=0,S=0;w<f;w++)t.has(w+1)||(i[S++]=i[w]);i.copyWithin(p+c,p,g),i.set(u,p);let y=!1;for(let w=0,S=f;w<S;w++){const E=i[w];y||(y=E!==w+1),a[E-1]=w+1}T(this,fd,x_).call(this),y||(this.pagesNumber=0)}hasBeenAltered(){return l(Vt,_s)!==null}getPageMappingForSaving(){return{pageIndices:l(Vt,zr)?l(Vt,zr).map(t=>t-1):null}}getPrevPageNumber(t){return l(Vt,Vu)[l(Vt,_s)[t-1]-1]}getPageNumber(t){var e;return((e=l(Vt,zr))==null?void 0:e[t-1])??t}getPageId(t){var e;return((e=l(Vt,_s))==null?void 0:e[t-1])??t}static get instance(){return Mt(this,"instance",new Vt)}getMapping(){return l(Vt,_s).subarray(0,this.pagesNumber)}};zr=new WeakMap,_s=new WeakMap,Vu=new WeakMap,ea=new WeakMap,Tl=new WeakMap,fd=new WeakSet,x_=function(){for(const t of l(Vt,Tl))t()},A_=function(t){if(l(Vt,_s))return;const e=l(Vt,ea),n=new Uint32Array(3*e),i=x(Vt,_s,n.subarray(0,e)),a=x(Vt,zr,n.subarray(e,2*e));if(t)for(let c=0;c<e;c++)i[c]=a[c]=c+1;x(Vt,Vu,n.subarray(2*e))},b(Vt,zr,null),b(Vt,_s,null),b(Vt,Vu,null),b(Vt,ea,0),b(Vt,Tl,[]);let Gf=Vt;var na,ia,Ji,ts,qf,sa,zu,Uu,Qf,P0,b_,kn,S_,E_,xu,pf;const jr=class jr{constructor(t){b(this,kn);b(this,na,null);b(this,ia,null);b(this,Ji);b(this,ts,null);b(this,qf,null);b(this,sa,null);b(this,zu,null);b(this,Uu,null);x(this,Ji,t),l(jr,Qf)||x(jr,Qf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=x(this,na,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,Ji)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ys,{signal:e}),t.addEventListener("pointerdown",T(jr,P0,b_),{signal:e}));const n=x(this,ts,document.createElement("div"));n.className="buttons",t.append(n);const i=l(this,Ji).toolbarPosition;if(i){const{style:a}=t,c=l(this,Ji)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*c}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return l(this,na)}hide(){var t;l(this,na).classList.add("hidden"),(t=l(this,ia))==null||t.hideDropdown()}show(){var t,e;l(this,na).classList.remove("hidden"),(t=l(this,qf))==null||t.shown(),(e=l(this,sa))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=l(this,Ji),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(jr,Qf)[t]),T(this,kn,xu).call(this,n)&&n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),l(this,ts).append(n)}async addAltText(t){const e=await t.render();T(this,kn,xu).call(this,e),l(this,ts).append(e,l(this,kn,pf)),x(this,qf,t)}addComment(t,e=null){if(l(this,sa))return;const n=t.renderForToolbar();if(!n)return;T(this,kn,xu).call(this,n);const i=x(this,zu,l(this,kn,pf));e?(l(this,ts).insertBefore(n,e),l(this,ts).insertBefore(i,e)):l(this,ts).append(n,i),x(this,sa,t),t.toolbar=this}addColorPicker(t){if(l(this,ia))return;x(this,ia,t);const e=t.renderButton();T(this,kn,xu).call(this,e),l(this,ts).append(e,l(this,kn,pf))}async addEditSignatureButton(t){const e=x(this,Uu,await t.renderEditButton(l(this,Ji)));T(this,kn,xu).call(this,e),l(this,ts).append(e,l(this,kn,pf))}removeButton(t){var e,n;switch(t){case"comment":(e=l(this,sa))==null||e.removeToolbarCommentButton(),x(this,sa,null),(n=l(this,zu))==null||n.remove(),x(this,zu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const i=l(this,ts).querySelector(n);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){l(this,Uu)&&(l(this,Uu).title=t)}remove(){var t;l(this,na).remove(),(t=l(this,ia))==null||t.destroy(),x(this,ia,null)}};na=new WeakMap,ia=new WeakMap,Ji=new WeakMap,ts=new WeakMap,qf=new WeakMap,sa=new WeakMap,zu=new WeakMap,Uu=new WeakMap,Qf=new WeakMap,P0=new WeakSet,b_=function(t){t.stopPropagation()},kn=new WeakSet,S_=function(t){l(this,Ji)._focusEventsAllowed=!1,Ne(t)},E_=function(t){l(this,Ji)._focusEventsAllowed=!0,Ne(t)},xu=function(t){const e=l(this,Ji)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",T(this,kn,S_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",T(this,kn,E_).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ys,{signal:e}),!0)},pf=function(){const t=document.createElement("div");return t.className="divider",t},b(jr,P0),b(jr,Qf,null);let cx=jr;var Zf,kl,Ur,_o,C_,T_,ux;class u3{constructor(t){b(this,_o);b(this,Zf,null);b(this,kl,null);b(this,Ur);x(this,Ur,t)}show(t,e,n){const[i,a]=T(this,_o,T_).call(this,e,n),{style:c}=l(this,kl)||x(this,kl,T(this,_o,C_).call(this));t.append(l(this,kl)),c.insetInlineEnd=`${100*i}%`,c.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,kl).remove()}}Zf=new WeakMap,kl=new WeakMap,Ur=new WeakMap,_o=new WeakSet,C_=function(){const t=x(this,kl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,Ur)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ys,{signal:e});const n=x(this,Zf,document.createElement("div"));return n.className="buttons",t.append(n),l(this,Ur).hasCommentManager()&&T(this,_o,ux).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,Ur).commentSelection("floating_button")}),T(this,_o,ux).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,Ur).highlightSelection("floating_button")}),t},T_=function(t,e){let n=0,i=0;for(const a of t){const c=a.y+a.height;if(c<n)continue;const u=a.x+(e?a.width:0);if(c>n){i=u,n=c;continue}e?u>i&&(i=u):u<i&&(i=u)}return[e?1-i:i,n]},ux=function(t,e,n,i){const a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);const c=document.createElement("span");a.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",n);const u=l(this,Ur)._signal;u instanceof AbortSignal&&!u.aborted&&(a.addEventListener("contextmenu",ys,{signal:u}),a.addEventListener("click",i,{signal:u})),l(this,Zf).append(a)};function k_(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}var Pl,_l,Hu,Ml;const ne=class ne{static initializeAndAddPointerId(t){(l(ne,_l)||x(ne,_l,new Set)).add(t)}static setPointer(t,e){l(ne,Pl)||x(ne,Pl,e),l(ne,Ml)??x(ne,Ml,t)}static setTimeStamp(t){x(ne,Hu,t)}static isSamePointerId(t){return l(ne,Pl)===t}static isSamePointerIdOrRemove(t){var e;return l(ne,Pl)===t?!0:((e=l(ne,_l))==null||e.delete(t),!1)}static isSamePointerType(t){return l(ne,Ml)===t}static isInitializedAndDifferentPointerType(t){return l(ne,Ml)!==null&&!ne.isSamePointerType(t)}static isSameTimeStamp(t){return l(ne,Hu)===t}static isUsingMultiplePointers(){var t;return((t=l(ne,_l))==null?void 0:t.size)>=1}static clearPointerType(){x(ne,Ml,null)}static clearPointerIds(){x(ne,Pl,NaN),x(ne,_l,null)}static clearTimeStamp(){x(ne,Hu,NaN)}};Pl=new WeakMap,_l=new WeakMap,Hu=new WeakMap,Ml=new WeakMap,b(ne,Pl,NaN),b(ne,_l,null),b(ne,Hu,NaN),b(ne,Ml,null);let Rn=ne;var _0;class h3{constructor(){b(this,_0,0)}get id(){return`${Hf}${Qe(this,_0)._++}`}}_0=new WeakMap;var $u,Jf,Fn,Wu,Py;const bb=class bb{constructor(){b(this,Wu);b(this,$u,g_());b(this,Jf,0);b(this,Fn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Mt(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:a}=t;return T(this,Wu,Py).call(this,`${e}_${n}_${i}_${a}`,t)}async getFromUrl(t){return T(this,Wu,Py).call(this,t,t)}async getFromBlob(t,e){const n=await e;return T(this,Wu,Py).call(this,t,n)}async getFromId(t){l(this,Fn)||x(this,Fn,new Map);const e=l(this,Fn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Fn)||x(this,Fn,new Map);let n=l(this,Fn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${l(this,$u)}_${Qe(this,Jf)._++}`,refCounter:1,isSvg:!1},l(this,Fn).set(t,n),l(this,Fn).set(n.id,n),n}getSvgUrl(t){const e=l(this,Fn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;l(this,Fn)||x(this,Fn,new Map);const e=l(this,Fn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,$u)}_`)}};$u=new WeakMap,Jf=new WeakMap,Fn=new WeakMap,Wu=new WeakSet,Py=async function(t,e){l(this,Fn)||x(this,Fn,new Map);let n=l(this,Fn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,$u)}_${Qe(this,Jf)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await Xm(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const a=bb._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},c.onload=async()=>{const g=n.svgUrl=c.result;u.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=c.onerror=p});c.readAsDataURL(i),await d}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){_t(i),n=null}return l(this,Fn).set(t,n),n&&l(this,Fn).set(n.id,n),n};let hx=bb;var je,ra,tp,Ce;class d3{constructor(t=128){b(this,je,[]);b(this,ra,!1);b(this,tp);b(this,Ce,-1);x(this,tp,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(i&&t(),l(this,ra))return;const d={cmd:t,undo:e,post:n,type:a};if(l(this,Ce)===-1){l(this,je).length>0&&(l(this,je).length=0),x(this,Ce,0),l(this,je).push(d);return}if(c&&l(this,je)[l(this,Ce)].type===a){u&&(d.undo=l(this,je)[l(this,Ce)].undo),l(this,je)[l(this,Ce)]=d;return}const f=l(this,Ce)+1;f===l(this,tp)?l(this,je).splice(0,1):(x(this,Ce,f),f<l(this,je).length&&l(this,je).splice(f)),l(this,je).push(d)}undo(){if(l(this,Ce)===-1)return;x(this,ra,!0);const{undo:t,post:e}=l(this,je)[l(this,Ce)];t(),e==null||e(),x(this,ra,!1),x(this,Ce,l(this,Ce)-1)}redo(){if(l(this,Ce)<l(this,je).length-1){x(this,Ce,l(this,Ce)+1),x(this,ra,!0);const{cmd:t,post:e}=l(this,je)[l(this,Ce)];t(),e==null||e(),x(this,ra,!1)}}hasSomethingToUndo(){return l(this,Ce)!==-1}hasSomethingToRedo(){return l(this,Ce)<l(this,je).length-1}cleanType(t){if(l(this,Ce)!==-1){for(let e=l(this,Ce);e>=0;e--)if(l(this,je)[e].type!==t){l(this,je).splice(e+1,l(this,Ce)-e),x(this,Ce,e);return}l(this,je).length=0,x(this,Ce,-1)}}destroy(){x(this,je,null)}}je=new WeakMap,ra=new WeakMap,tp=new WeakMap,Ce=new WeakMap;var M0,P_;class qm{constructor(t){b(this,M0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=sn.platform;for(const[n,i,a={}]of t)for(const c of n){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:i,options:a}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:i,options:a}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(T(this,M0,P_).call(this,e));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:c=[],checker:u=null}}=n;u&&!u(t,e)||(i.bind(t,...c,e)(),a||Ne(e))}}M0=new WeakSet,P_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const D0=class D0{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return r3(t),Mt(this,"_colors",t)}convert(t){const e=Km(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((a,c)=>a===e[c]))return D0._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?rt.makeHexColor(...e):t}};$(D0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let dx=D0;var Gu,xi,Xu,Te,Ve,Yu,es,Ku,ns,In,oa,aa,qu,la,tr,is,Dl,ep,np,Qu,ip,er,ca,Zu,ua,nr,L0,ha,Ju,sp,da,Ll,th,fa,rp,We,Qt,Hr,pa,ma,op,eh,ap,ga,ir,$r,lp,cp,ss,it,_y,fx,__,M_,mf,D_,L_,R_,px,F_,I_,N_,O_,Un,Or,B_,j_,mx,V_,gf,gx;const Fu=class Fu{constructor(t,e,n,i,a,c,u,d,f,p,g,y,w,S,E,C){b(this,it);b(this,Gu,new AbortController);b(this,xi,null);b(this,Xu,null);b(this,Te,new Map);b(this,Ve,new Map);b(this,Yu,null);b(this,es,null);b(this,Ku,null);b(this,ns,new d3);b(this,In,null);b(this,oa,null);b(this,aa,null);b(this,qu,0);b(this,la,new Set);b(this,tr,null);b(this,is,null);b(this,Dl,new Set);$(this,"_editorUndoBar",null);b(this,ep,!1);b(this,np,!1);b(this,Qu,!1);b(this,ip,null);b(this,er,null);b(this,ca,null);b(this,Zu,null);b(this,ua,!1);b(this,nr,null);b(this,L0,new h3);b(this,ha,!1);b(this,Ju,!1);b(this,sp,!1);b(this,da,null);b(this,Ll,null);b(this,th,null);b(this,fa,null);b(this,rp,null);b(this,We,Lt.NONE);b(this,Qt,new Set);b(this,Hr,null);b(this,pa,null);b(this,ma,null);b(this,op,null);b(this,eh,null);b(this,ap,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,ga,[0,0]);b(this,ir,null);b(this,$r,null);b(this,lp,null);b(this,cp,null);b(this,ss,null);const k=this._signal=l(this,Gu).signal;x(this,$r,t),x(this,lp,e),x(this,cp,n),x(this,Yu,i),x(this,In,a),x(this,pa,c),x(this,eh,d),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:k}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:k}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:k}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:k}),u._on("setpreference",this.onSetPreference.bind(this),{signal:k}),u._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:k}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:k}),window.addEventListener("pointerdown",()=>{x(this,Ju,!0)},{capture:!0,signal:k}),window.addEventListener("pointerup",()=>{x(this,Ju,!1)},{capture:!0,signal:k}),T(this,it,D_).call(this),T(this,it,O_).call(this),T(this,it,px).call(this),x(this,es,d.annotationStorage),x(this,ip,d.filterFactory),x(this,ma,f),x(this,Zu,p||null),x(this,ep,g),x(this,np,y),x(this,Qu,w),x(this,rp,S||null),this.viewParameters={realScale:Za.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=E||null,this._supportsPinchToZoom=C!==!1,a==null||a.setSidebarUiManager(this)}static get _keyboardManager(){const t=Fu.prototype,e=c=>l(c,$r).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new qm([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,$r).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,$r).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,n,i,a,c,u,d,f;(t=l(this,ss))==null||t.resolve(),x(this,ss,null),(e=l(this,Gu))==null||e.abort(),x(this,Gu,null),this._signal=null;for(const p of l(this,Ve).values())p.destroy();l(this,Ve).clear(),l(this,Te).clear(),l(this,Dl).clear(),(n=l(this,fa))==null||n.clear(),x(this,xi,null),l(this,Qt).clear(),l(this,ns).destroy(),(i=l(this,Yu))==null||i.destroy(),(a=l(this,In))==null||a.destroy(),(c=l(this,pa))==null||c.destroy(),(u=l(this,nr))==null||u.hide(),x(this,nr,null),(d=l(this,th))==null||d.destroy(),x(this,th,null),x(this,Xu,null),l(this,er)&&(clearTimeout(l(this,er)),x(this,er,null)),l(this,ir)&&(clearTimeout(l(this,ir)),x(this,ir,null)),(f=this._editorUndoBar)==null||f.destroy(),x(this,eh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,rp)}get useNewAltTextFlow(){return l(this,np)}get useNewAltTextWhenAddingImage(){return l(this,Qu)}get hcmFilter(){return Mt(this,"hcmFilter",l(this,ma)?l(this,ip).addHCMFilter(l(this,ma).foreground,l(this,ma).background):"none")}get direction(){return Mt(this,"direction",getComputedStyle(l(this,$r)).direction)}get _highlightColors(){return Mt(this,"_highlightColors",l(this,Zu)?new Map(l(this,Zu).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Mt(this,"highlightColors",null);const e=new Map,n=!!l(this,ma);for(const[i,a]of t){const c=i.endsWith("_HCM");if(n&&c){e.set(i.replace("_HCM",""),a);continue}!n&&!c&&e.set(i,a)}return Mt(this,"highlightColors",e)}get highlightColorNames(){return Mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,aa,t)}setMainHighlightColorPicker(t){x(this,th,t)}editAltText(t,e=!1){var n;(n=l(this,Yu))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!l(this,In)}editComment(t,e,n,i){var a;(a=l(this,In))==null||a.showDialog(this,t,e,n,i)}selectComment(t,e){const n=l(this,Ve).get(t),i=n==null?void 0:n.getEditorByUID(e);i==null||i.toggleComment(!0,!0)}updateComment(t){var e;(e=l(this,In))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=l(this,In))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=l(this,In))==null||e.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},i=()=>{var a;(a=this._editorUndoBar)==null||a.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:i,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){var i;(i=l(this,In))==null||i.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=l(this,In))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=l(this,In))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(l(this,Ve).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){var e;(e=l(this,pa))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,pa)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,Qu,e);break}}onPagesEdited({pagesMapper:t}){for(const i of l(this,Te).values())i.updatePageIndex(t.getPrevPageNumber(i.pageIndex+1)-1);const e=l(this,Ve),n=x(this,Ve,new Map);for(const[i,a]of e){const c=t.getPrevPageNumber(i+1)-1;if(c===-1){a.destroy();continue}n.set(c,a),a.updatePageIndex(c)}}onPageChanging({pageNumber:t}){x(this,qu,t-1)}focusMainContainer(){l(this,$r).focus()}findParent(t,e){for(const n of l(this,Ve).values()){const{x:i,y:a,width:c,height:u}=n.div.getBoundingClientRect();if(t>=i&&t<=i+c&&e>=a&&e<=a+u)return n}return null}disableUserSelect(t=!1){l(this,lp).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,Dl).add(t)}removeShouldRescale(t){l(this,Dl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Za.PDF_TO_CSS_UNITS;for(const n of l(this,Dl))n.onScaleChanging();(e=l(this,aa))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:c,focusOffset:u}=n,d=n.toString(),p=T(this,it,_y).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;n.empty();const y=T(this,it,fx).call(this,p),w=l(this,We)===Lt.NONE,S=()=>{const E=y==null?void 0:y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:i,anchorOffset:a,focusNode:c,focusOffset:u,text:d});w&&this.showAllEditors("highlight",!0,!0),e&&(E==null||E.editComment())};if(w){this.switchToMode(Lt.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!l(this,es))return null;const e=`${Hf}${t}`,n=l(this,es).getRawValue(e);return n&&l(this,es).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&l(this,es)&&!l(this,es).has(t.id)&&l(this,es).setValue(t.id,t)}a11yAlert(t,e=null){const n=l(this,cp);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,ua)&&(x(this,ua,!1),T(this,it,mf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,Qt))if(e.div.contains(t)){x(this,Ll,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,Ll))return;const[t,e]=l(this,Ll);x(this,Ll,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){T(this,it,px).call(this),this.setEditingState(!0)}removeEditListeners(){T(this,it,F_).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of l(this,is))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of l(this,is))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=l(this,xi))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of l(this,Qt)){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const c of l(this,is))if(c.isHandlingMimeForPasting(a.type)){c.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){_t(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const d of n){const f=await i.deserialize(d);if(!f)return;a.push(f)}const c=()=>{for(const d of a)T(this,it,mx).call(this,d);T(this,it,gx).call(this,a)},u=()=>{for(const d of a)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(a){_t(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,We)!==Lt.NONE&&!this.isEditorHandlingKeyboard&&Fu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,ua)&&(x(this,ua,!1),T(this,it,mf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(T(this,it,L_).call(this),T(this,it,I_).call(this),T(this,it,Un).call(this,{isEditing:l(this,We)!==Lt.NONE,isEmpty:T(this,it,gf).call(this),hasSomethingToUndo:l(this,ns).hasSomethingToUndo(),hasSomethingToRedo:l(this,ns).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,it,R_).call(this),T(this,it,N_).call(this),T(this,it,Un).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,is)){x(this,is,t);for(const e of l(this,is))T(this,it,Or).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,L0).id}get currentLayer(){return l(this,Ve).get(l(this,qu))}getLayer(t){return l(this,Ve).get(t)}get currentPageIndex(){return l(this,qu)}addLayer(t){l(this,Ve).set(t.pageIndex,t),l(this,ha)?t.enable():t.disable()}removeLayer(t){l(this,Ve).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,a=!1,c=!1){var u,d,f,p,g,y;if(l(this,We)!==t&&!(l(this,ss)&&(await l(this,ss).promise,!l(this,ss)))){if(x(this,ss,Promise.withResolvers()),(u=l(this,aa))==null||u.commitOrRemove(),l(this,We)===Lt.POPUP&&((d=l(this,In))==null||d.hideSidebar()),(f=l(this,In))==null||f.destroyPopup(),x(this,We,t),t===Lt.NONE){this.setEditingState(!1),T(this,it,j_).call(this);for(const w of l(this,Te).values())w.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),l(this,ss).resolve();return}for(const w of l(this,Te).values())w.addStandaloneCommentButton();t===Lt.SIGNATURE&&await((g=l(this,pa))==null?void 0:g.loadSignatures()),n&&Rn.clearPointerType(),this.setEditingState(!0),await T(this,it,B_).call(this),this.unselectAll();for(const w of l(this,Ve).values())w.updateMode(t);if(t===Lt.POPUP){l(this,Xu)||x(this,Xu,await l(this,eh).getAnnotationsByType(new Set(l(this,is).map(E=>E._editorType))));const w=new Set,S=[];for(const E of l(this,Te).values()){const{annotationElementId:C,hasComment:k,deleted:M}=E;C&&w.add(C),k&&!M&&S.push(E.getData())}for(const E of l(this,Xu)){const{id:C,popupRef:k,contentsObj:M}=E;k&&(M!=null&&M.str)&&!w.has(C)&&!l(this,la).has(C)&&S.push(E)}(y=l(this,In))==null||y.showSidebar(S)}if(!e){i&&this.addNewEditorFromKeyboard(),l(this,ss).resolve();return}for(const w of l(this,Te).values())w.uid===e?(this.setSelected(w),c?w.editComment():a?w.enterInEditMode():w.focus()):w.unselect();l(this,ss).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==l(this,We)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(l(this,is)){switch(t){case jt.CREATE:this.currentLayer.addNewEditor(e);return;case jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,op)||x(this,op,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of l(this,Qt))n.updateParams(t,e);else for(const n of l(this,is))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var a;for(const c of l(this,Te).values())c.editorType===t&&c.show(e);(((a=l(this,op))==null?void 0:a.get(jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&T(this,it,Or).call(this,[[jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,sp)!==t){x(this,sp,t);for(const e of l(this,Ve).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of l(this,Te).values())e.pageIndex===t&&(yield e)}getEditor(t){return l(this,Te).get(t)}addEditor(t){l(this,Te).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(l(this,er)&&clearTimeout(l(this,er)),x(this,er,setTimeout(()=>{this.focusMainContainer(),x(this,er,null)},0))),l(this,Te).delete(t.id),t.annotationElementId&&((e=l(this,fa))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,la).has(t.annotationElementId))&&((n=l(this,es))==null||n.remove(t.id))}addDeletedAnnotationElement(t){l(this,la).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,la).has(t)}removeDeletedAnnotationElement(t){l(this,la).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,xi)!==t&&(x(this,xi,t),t&&T(this,it,Or).call(this,t.propertiesToUpdate))}updateUI(t){l(this,it,V_)===t&&T(this,it,Or).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){T(this,it,Or).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,Qt).has(t)){l(this,Qt).delete(t),t.unselect(),T(this,it,Un).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Qt).add(t),t.select(),T(this,it,Or).call(this,t.propertiesToUpdate),T(this,it,Un).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=l(this,aa))==null||e.commitOrRemove();for(const n of l(this,Qt))n!==t&&n.unselect();l(this,Qt).clear(),l(this,Qt).add(t),t.select(),T(this,it,Or).call(this,t.propertiesToUpdate),T(this,it,Un).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,Qt).has(t)}get firstSelectedEditor(){return l(this,Qt).values().next().value}unselect(t){t.unselect(),l(this,Qt).delete(t),T(this,it,Un).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Qt).size!==0}get isEnterHandled(){return l(this,Qt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,ns).undo(),T(this,it,Un).call(this,{hasSomethingToUndo:l(this,ns).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,it,gf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,ns).redo(),T(this,it,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,ns).hasSomethingToRedo(),isEmpty:T(this,it,gf).call(this)})}addCommands(t){l(this,ns).add(t),T(this,it,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,it,gf).call(this)})}cleanUndoStack(t){l(this,ns).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,Qt)],n=()=>{var c;(c=this._editorUndoBar)==null||c.show(i,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},i=()=>{for(const c of e)T(this,it,mx).call(this,c)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=l(this,xi))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,xi)||this.hasSelection}selectAll(){for(const t of l(this,Qt))t.commit();T(this,it,gx).call(this,l(this,Te).values())}unselectAll(){var t;if(!(l(this,xi)&&(l(this,xi).commitOrRemove(),l(this,We)!==Lt.NONE))&&!((t=l(this,aa))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,Qt))e.unselect();l(this,Qt).clear(),T(this,it,Un).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,ga)[0]+=t,l(this,ga)[1]+=e;const[i,a]=l(this,ga),c=[...l(this,Qt)],u=1e3;l(this,ir)&&clearTimeout(l(this,ir)),x(this,ir,setTimeout(()=>{x(this,ir,null),l(this,ga)[0]=l(this,ga)[1]=0,this.addCommands({cmd:()=>{for(const d of c)l(this,Te).has(d.id)&&(d.translateInPage(i,a),d.translationDone())},undo:()=>{for(const d of c)l(this,Te).has(d.id)&&(d.translateInPage(-i,-a),d.translationDone())},mustExec:!1})},u));for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,tr,new Map);for(const t of l(this,Qt))l(this,tr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,tr))return!1;this.disableUserSelect(!1);const t=l(this,tr);x(this,tr,null);let e=!1;for(const[{x:i,y:a,pageIndex:c},u]of t)u.newX=i,u.newY=a,u.newPageIndex=c,e||(e=i!==u.savedX||a!==u.savedY||c!==u.savedPageIndex);if(!e)return!1;const n=(i,a,c,u)=>{if(l(this,Te).has(i.id)){const d=l(this,Ve).get(u);d?i._setParentAndPosition(d,a,c):(i.pageIndex=u,i.x=a,i.y=c)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:c,newPageIndex:u}]of t)n(i,a,c,u)},undo:()=>{for(const[i,{savedX:a,savedY:c,savedPageIndex:u}]of t)n(i,a,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,tr))for(const n of l(this,tr).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,Qt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,xi)===t}getActive(){return l(this,xi)}getMode(){return l(this,We)}isEditingMode(){return l(this,We)!==Lt.NONE}get imageManager(){return Mt(this,"imageManager",new hx)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,g,y)=>({x:(p-i)/c,y:1-(f+g-n)/a,width:y/c,height:g/a});break;case"180":u=(f,p,g,y)=>({x:1-(f+g-n)/a,y:1-(p+y-i)/c,width:g/a,height:y/c});break;case"270":u=(f,p,g,y)=>({x:1-(p+y-i)/c,y:(f-n)/a,width:y/c,height:g/a});break;default:u=(f,p,g,y)=>({x:(f-n)/a,y:(p-i)/c,width:g/a,height:y/c});break}const d=[];for(let f=0,p=e.rangeCount;f<p;f++){const g=e.getRangeAt(f);if(!g.collapsed)for(const{x:y,y:w,width:S,height:E}of g.getClientRects())S===0||E===0||d.push(u(y,w,S,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,Ku)||x(this,Ku,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,Ku))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=l(this,Ku))==null?void 0:i.get(t.data.id);if(!e)return;const n=l(this,es).getRawValue(e);n&&(l(this,We)===Lt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var a;const i=(a=l(this,fa))==null?void 0:a.get(t);i&&(i.setCanvas(e,n),l(this,fa).delete(t))}addMissingCanvas(t,e){(l(this,fa)||x(this,fa,new Map)).set(t,e)}};Gu=new WeakMap,xi=new WeakMap,Xu=new WeakMap,Te=new WeakMap,Ve=new WeakMap,Yu=new WeakMap,es=new WeakMap,Ku=new WeakMap,ns=new WeakMap,In=new WeakMap,oa=new WeakMap,aa=new WeakMap,qu=new WeakMap,la=new WeakMap,tr=new WeakMap,is=new WeakMap,Dl=new WeakMap,ep=new WeakMap,np=new WeakMap,Qu=new WeakMap,ip=new WeakMap,er=new WeakMap,ca=new WeakMap,Zu=new WeakMap,ua=new WeakMap,nr=new WeakMap,L0=new WeakMap,ha=new WeakMap,Ju=new WeakMap,sp=new WeakMap,da=new WeakMap,Ll=new WeakMap,th=new WeakMap,fa=new WeakMap,rp=new WeakMap,We=new WeakMap,Qt=new WeakMap,Hr=new WeakMap,pa=new WeakMap,ma=new WeakMap,op=new WeakMap,eh=new WeakMap,ap=new WeakMap,ga=new WeakMap,ir=new WeakMap,$r=new WeakMap,lp=new WeakMap,cp=new WeakMap,ss=new WeakMap,it=new WeakSet,_y=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},fx=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of l(this,Ve).values())if(n.hasTextLayer(t))return n;return null},__=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=T(this,it,_y).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(l(this,nr)||x(this,nr,new u3(this)),l(this,nr).show(n,i,this.direction==="ltr"))},M_=function(){var a,c,u;const t=document.getSelection();if(!t||t.isCollapsed){l(this,Hr)&&((a=l(this,nr))==null||a.hide(),x(this,Hr,null),T(this,it,Un).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,Hr))return;const i=T(this,it,_y).call(this,t).closest(".textLayer");if(!i){l(this,Hr)&&((c=l(this,nr))==null||c.hide(),x(this,Hr,null),T(this,it,Un).call(this,{hasSelectedText:!1}));return}if((u=l(this,nr))==null||u.hide(),x(this,Hr,e),T(this,it,Un).call(this,{hasSelectedText:!0}),!(l(this,We)!==Lt.HIGHLIGHT&&l(this,We)!==Lt.NONE)&&(l(this,We)===Lt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,ua,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=l(this,We)===Lt.HIGHLIGHT?T(this,it,fx).call(this,i):null;if(d==null||d.toggleDrawing(),l(this,Ju)){const f=new AbortController,p=this.combinedSignal(f),g=y=>{y.type==="pointerup"&&y.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),y.type==="pointerup"&&T(this,it,mf).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("blur",g,{signal:p})}else d==null||d.toggleDrawing(!0),T(this,it,mf).call(this,"main_toolbar")}},mf=function(t=""){l(this,We)===Lt.HIGHLIGHT?this.highlightSelection(t):l(this,ep)&&T(this,it,__).call(this)},D_=function(){document.addEventListener("selectionchange",T(this,it,M_).bind(this),{signal:this._signal})},L_=function(){if(l(this,ca))return;x(this,ca,new AbortController);const t=this.combinedSignal(l(this,ca));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},R_=function(){var t;(t=l(this,ca))==null||t.abort(),x(this,ca,null)},px=function(){if(l(this,da))return;x(this,da,new AbortController);const t=this.combinedSignal(l(this,da));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},F_=function(){var t;(t=l(this,da))==null||t.abort(),x(this,da,null)},I_=function(){if(l(this,oa))return;x(this,oa,new AbortController);const t=this.combinedSignal(l(this,oa));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},N_=function(){var t;(t=l(this,oa))==null||t.abort(),x(this,oa,null)},O_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Un=function(t){Object.entries(t).some(([n,i])=>l(this,ap)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,ap),t)}),l(this,We)===Lt.HIGHLIGHT&&t.hasSelectedEditor===!1&&T(this,it,Or).call(this,[[jt.HIGHLIGHT_FREE,!0]]))},Or=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},B_=async function(){if(!l(this,ha)){x(this,ha,!0);const t=[];for(const e of l(this,Ve).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,Te).values())e.enable()}},j_=function(){if(this.unselectAll(),l(this,ha)){x(this,ha,!1);for(const t of l(this,Ve).values())t.disable();for(const t of l(this,Te).values())t.disable()}},mx=function(t){const e=l(this,Ve).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},V_=function(){let t=null;for(t of l(this,Qt));return t},gf=function(){if(l(this,Te).size===0)return!0;if(l(this,Te).size===1)for(const t of l(this,Te).values())return t.isEmpty();return!1},gx=function(t){for(const e of l(this,Qt))e.unselect();l(this,Qt).clear();for(const e of t)e.isEmpty()||(l(this,Qt).add(e),e.select());T(this,it,Un).call(this,{hasSelectedEditor:this.hasSelection})},$(Fu,"TRANSLATE_SMALL",1),$(Fu,"TRANSLATE_BIG",10);let zc=Fu;var ln,sr,Ms,nh,rr,Ai,ih,or,oi,Wr,Rl,ar,ya,zs,yf,My;const Hn=class Hn{constructor(t){b(this,zs);b(this,ln,null);b(this,sr,!1);b(this,Ms,null);b(this,nh,null);b(this,rr,null);b(this,Ai,null);b(this,ih,!1);b(this,or,null);b(this,oi,null);b(this,Wr,null);b(this,Rl,null);b(this,ar,!1);x(this,oi,t),x(this,ar,t._uiManager.useNewAltTextFlow),l(Hn,ya)||x(Hn,ya,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Hn._l10n??(Hn._l10n=t)}async render(){const t=x(this,Ms,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,nh,document.createElement("span"));t.append(e),l(this,ar)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(Hn,ya).missing),e.setAttribute("data-l10n-id",l(Hn,ya)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,oi)._uiManager._signal;t.addEventListener("contextmenu",ys,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),l(this,oi)._uiManager.editAltText(l(this,oi)),l(this,ar)&&l(this,oi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,zs,yf)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(x(this,ih,!0),i(a))},{signal:n}),await T(this,zs,My).call(this),t}finish(){l(this,Ms)&&(l(this,Ms).focus({focusVisible:l(this,ih)}),x(this,ih,!1))}isEmpty(){return l(this,ar)?l(this,ln)===null:!l(this,ln)&&!l(this,sr)}hasData(){return l(this,ar)?l(this,ln)!==null||!!l(this,Wr):this.isEmpty()}get guessedText(){return l(this,Wr)}async setGuessedText(t){l(this,ln)===null&&(x(this,Wr,t),x(this,Rl,await Hn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),T(this,zs,My).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,ar)||l(this,ln)){(e=l(this,or))==null||e.remove(),x(this,or,null);return}if(!l(this,or)){const n=x(this,or,document.createElement("div"));n.className="noAltTextBadge",l(this,oi).div.append(n)}l(this,or).classList.toggle("hidden",!t)}serialize(t){let e=l(this,ln);return!t&&l(this,Wr)===e&&(e=l(this,Rl)),{altText:e,decorative:l(this,sr),guessedText:l(this,Wr),textWithDisclaimer:l(this,Rl)}}get data(){return{altText:l(this,ln),decorative:l(this,sr)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(x(this,Wr,n),x(this,Rl,i)),!(l(this,ln)===t&&l(this,sr)===e)&&(a||(x(this,ln,t),x(this,sr,e)),T(this,zs,My).call(this))}toggle(t=!1){l(this,Ms)&&(!t&&l(this,Ai)&&(clearTimeout(l(this,Ai)),x(this,Ai,null)),l(this,Ms).disabled=!t)}shown(){l(this,oi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,zs,yf)}})}destroy(){var t,e;(t=l(this,Ms))==null||t.remove(),x(this,Ms,null),x(this,nh,null),x(this,rr,null),(e=l(this,or))==null||e.remove(),x(this,or,null)}};ln=new WeakMap,sr=new WeakMap,Ms=new WeakMap,nh=new WeakMap,rr=new WeakMap,Ai=new WeakMap,ih=new WeakMap,or=new WeakMap,oi=new WeakMap,Wr=new WeakMap,Rl=new WeakMap,ar=new WeakMap,ya=new WeakMap,zs=new WeakSet,yf=function(){return l(this,ln)&&"added"||l(this,ln)===null&&this.guessedText&&"review"||"missing"},My=async function(){var i,a,c;const t=l(this,Ms);if(!t)return;if(l(this,ar)){if(t.classList.toggle("done",!!l(this,ln)),t.setAttribute("data-l10n-id",l(Hn,ya)[l(this,zs,yf)]),(i=l(this,nh))==null||i.setAttribute("data-l10n-id",l(Hn,ya)[`${l(this,zs,yf)}-label`]),!l(this,ln)){(a=l(this,rr))==null||a.remove();return}}else{if(!l(this,ln)&&!l(this,sr)){t.classList.remove("done"),(c=l(this,rr))==null||c.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,rr);if(!e){x(this,rr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,oi).id}`;const u=100,d=l(this,oi)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(l(this,Ai)),x(this,Ai,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Ai,setTimeout(()=>{x(this,Ai,null),l(this,rr).classList.add("show"),l(this,oi)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),t.addEventListener("mouseleave",()=>{var f;l(this,Ai)&&(clearTimeout(l(this,Ai)),x(this,Ai,null)),(f=l(this,rr))==null||f.classList.remove("show")},{signal:d})}l(this,sr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,ln)),e.parentNode||t.append(e);const n=l(this,oi).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},b(Hn,ya,null),$(Hn,"_l10n",null);let y0=Hn;var vn,rs,Fl,fe,up,va,os,wa,xa,Il,hp,yx;class hy{constructor(t){b(this,hp);b(this,vn,null);b(this,rs,null);b(this,Fl,!1);b(this,fe,null);b(this,up,null);b(this,va,null);b(this,os,null);b(this,wa,null);b(this,xa,!1);b(this,Il,null);x(this,fe,t)}renderForToolbar(){const t=x(this,rs,document.createElement("button"));return t.className="comment",T(this,hp,yx).call(this,t,!1)}renderForStandalone(){const t=x(this,vn,document.createElement("button"));t.className="annotationCommentButton";const e=l(this,fe).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(l(this,fe)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=l(this,fe).commentButtonColor;i&&(n.backgroundColor=i)}return T(this,hp,yx).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=l(this,vn)??l(this,rs))==null||t.focus()},0)}onUpdatedColor(){if(!l(this,vn))return;const t=l(this,fe).commentButtonColor;t&&(l(this,vn).style.backgroundColor=t),l(this,fe)._uiManager.updatePopupColor(l(this,fe))}get commentButtonWidth(){var t;return(((t=l(this,vn))==null?void 0:t.getBoundingClientRect().width)??0)/l(this,fe).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Il))return l(this,Il);if(!l(this,vn))return null;const{x:t,y:e,height:n}=l(this,vn).getBoundingClientRect(),{x:i,y:a,width:c,height:u}=l(this,fe).parent.boundingClientRect;return[(t-i)/c,(e+n-a)/u]}set commentPopupPositionInLayer(t){x(this,Il,t)}hasDefaultPopupPosition(){return l(this,Il)===null}removeStandaloneCommentButton(){var t;(t=l(this,vn))==null||t.remove(),x(this,vn,null)}removeToolbarCommentButton(){var t;(t=l(this,rs))==null||t.remove(),x(this,rs,null)}setCommentButtonStates({selected:t,hasPopup:e}){l(this,vn)&&(l(this,vn).classList.toggle("selected",t),l(this,vn).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=l(this,fe).commentButtonPosition;const{width:p,height:g,x:y,y:w}=l(this,fe);n=y+n*p,i=w+i*g}const a=l(this,fe).parent.boundingClientRect,{x:c,y:u,width:d,height:f}=a;l(this,fe)._uiManager.editComment(l(this,fe),c+n*d,u+i*f,{...t,parentDimensions:a})}finish(){l(this,rs)&&(l(this,rs).focus({focusVisible:l(this,Fl)}),x(this,Fl,!1))}isDeleted(){return l(this,xa)||l(this,os)===""}isEmpty(){return l(this,os)===null}hasBeenEdited(){return this.isDeleted()||l(this,os)!==l(this,up)}serialize(){return this.data}get data(){return{text:l(this,os),richText:l(this,va),date:l(this,wa),deleted:this.isDeleted()}}set data(t){if(t!==l(this,os)&&x(this,va,null),t===null){x(this,os,""),x(this,xa,!0);return}x(this,os,t),x(this,wa,new Date),x(this,xa,!1)}restoreData({text:t,richText:e,date:n}){x(this,os,t),x(this,va,e),x(this,wa,n),x(this,xa,!1)}setInitialText(t,e=null){x(this,up,t),this.data=t,x(this,wa,null),x(this,va,e)}shown(){}destroy(){var t,e;(t=l(this,rs))==null||t.remove(),x(this,rs,null),(e=l(this,vn))==null||e.remove(),x(this,vn,null),x(this,os,""),x(this,va,null),x(this,wa,null),x(this,fe,null),x(this,Fl,!1),x(this,xa,!1)}}vn=new WeakMap,rs=new WeakMap,Fl=new WeakMap,fe=new WeakMap,up=new WeakMap,va=new WeakMap,os=new WeakMap,wa=new WeakMap,xa=new WeakMap,Il=new WeakMap,hp=new WeakSet,yx=function(t,e){if(!l(this,fe)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[l(this,fe)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=l(this,fe)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",ys,{signal:n}),e&&(t.addEventListener("focusin",a=>{l(this,fe)._focusEventsAllowed=!1,Ne(a)},{capture:!0,signal:n}),t.addEventListener("focusout",a=>{l(this,fe)._focusEventsAllowed=!0,Ne(a)},{capture:!0,signal:n})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),t===l(this,rs)?this.edit():l(this,fe).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(x(this,Fl,!0),i(a))},{signal:n}),t.addEventListener("pointerenter",()=>{l(this,fe).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{l(this,fe).toggleComment(!1,!1)},{signal:n}),t};var sh,Nl,dp,fp,pp,mp,gp,Gr,Ol,Xr,Bl,Yr,Ja,z_,U_,H_;const Sb=class Sb{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:c=null,signal:u}){b(this,Ja);b(this,sh);b(this,Nl,!1);b(this,dp,null);b(this,fp);b(this,pp);b(this,mp);b(this,gp);b(this,Gr,null);b(this,Ol);b(this,Xr,null);b(this,Bl);b(this,Yr,null);x(this,sh,t),x(this,dp,n),x(this,fp,e),x(this,pp,i),x(this,mp,a),x(this,gp,c),x(this,Bl,new AbortController),x(this,Ol,AbortSignal.any([u,l(this,Bl).signal])),t.addEventListener("touchstart",T(this,Ja,z_).bind(this),{passive:!1,signal:l(this,Ol)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Cr.pixelRatio}destroy(){var t,e;(t=l(this,Bl))==null||t.abort(),x(this,Bl,null),(e=l(this,Gr))==null||e.abort(),x(this,Gr,null)}};sh=new WeakMap,Nl=new WeakMap,dp=new WeakMap,fp=new WeakMap,pp=new WeakMap,mp=new WeakMap,gp=new WeakMap,Gr=new WeakMap,Ol=new WeakMap,Xr=new WeakMap,Bl=new WeakMap,Yr=new WeakMap,Ja=new WeakSet,z_=function(t){var i,a,c;if((i=l(this,fp))!=null&&i.call(this))return;if(t.touches.length===1){if(l(this,Gr))return;const u=x(this,Gr,new AbortController),d=AbortSignal.any([l(this,Ol),u.signal]),f=l(this,sh),p={capture:!0,signal:d,passive:!1},g=y=>{var w;y.pointerType==="touch"&&((w=l(this,Gr))==null||w.abort(),x(this,Gr,null))};f.addEventListener("pointerdown",y=>{y.pointerType==="touch"&&(Ne(y),g(y))},p),f.addEventListener("pointerup",g,p),f.addEventListener("pointercancel",g,p);return}if(!l(this,Yr)){x(this,Yr,new AbortController);const u=AbortSignal.any([l(this,Ol),l(this,Yr).signal]),d=l(this,sh),f={signal:u,capture:!1,passive:!1};d.addEventListener("touchmove",T(this,Ja,U_).bind(this),f);const p=T(this,Ja,H_).bind(this);d.addEventListener("touchend",p,f),d.addEventListener("touchcancel",p,f),f.capture=!0,d.addEventListener("pointerdown",Ne,f),d.addEventListener("pointermove",Ne,f),d.addEventListener("pointercancel",Ne,f),d.addEventListener("pointerup",Ne,f),(a=l(this,pp))==null||a.call(this)}if(Ne(t),t.touches.length!==2||(c=l(this,dp))!=null&&c.call(this)){x(this,Xr,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),x(this,Xr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},U_=function(t){var L;if(!l(this,Xr)||t.touches.length!==2)return;Ne(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:a}=e,{screenX:c,screenY:u}=n,d=l(this,Xr),{touch0X:f,touch0Y:p,touch1X:g,touch1Y:y}=d,w=g-f,S=y-p,E=c-i,C=u-a,k=Math.hypot(E,C)||1,M=Math.hypot(w,S)||1;if(!l(this,Nl)&&Math.abs(M-k)<=Sb.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=a,d.touch1X=c,d.touch1Y=u,!l(this,Nl)){x(this,Nl,!0);return}const _=[(i+c)/2,(a+u)/2];(L=l(this,mp))==null||L.call(this,_,M,k)},H_=function(t){var e;t.touches.length>=2||(l(this,Yr)&&(l(this,Yr).abort(),x(this,Yr,null),(e=l(this,gp))==null||e.call(this)),l(this,Xr)&&(Ne(t),x(this,Xr,null),x(this,Nl,!1)))};let v0=Sb;var jl,Ds,Ae,Zt,Kr,rh,Aa,yp,wn,Vl,qr,as,ba,vp,zl,bi,wp,Ul,Qr,lr,oh,ah,ls,Hl,xp,R0,Et,vx,Ap,wx,Dy,$_,W_,xx,Ly,Ax,G_,X_,Y_,bx,K_,Sx,q_,Q_,Z_,Ex,vf;const Dt=class Dt{constructor(t){b(this,Et);b(this,jl,null);b(this,Ds,null);b(this,Ae,null);b(this,Zt,null);b(this,Kr,null);b(this,rh,!1);b(this,Aa,null);b(this,yp,"");b(this,wn,null);b(this,Vl,null);b(this,qr,null);b(this,as,null);b(this,ba,null);b(this,vp,"");b(this,zl,!1);b(this,bi,null);b(this,wp,!1);b(this,Ul,!1);b(this,Qr,!1);b(this,lr,null);b(this,oh,0);b(this,ah,0);b(this,ls,null);b(this,Hl,null);$(this,"isSelected",!1);$(this,"_isCopy",!1);$(this,"_editToolbar",null);$(this,"_initialOptions",Object.create(null));$(this,"_initialData",null);$(this,"_isVisible",!0);$(this,"_uiManager",null);$(this,"_focusEventsAllowed",!0);b(this,xp,!1);b(this,R0,Dt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Dt.prototype._resizeWithKeyboard,e=zc.TRANSLATE_SMALL,n=zc.TRANSLATE_BIG;return Mt(this,"_resizerKeyboardManager",new qm([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Dt.prototype._stopResizingWithKeyboard]]))}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new f3({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Dt._l10n??(Dt._l10n=t),Dt._l10nResizer||(Dt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Dt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Dt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,xp)}set _isDraggable(t){var e;x(this,xp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,R0)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(T(this,Et,vf).call(this),(e=l(this,as))==null||e.remove(),x(this,as,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,zl)?x(this,zl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[a,c]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/a,this.y=(e+i)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){T(this,Et,vx).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,bi)||x(this,bi,[this.x,this.y,this.width,this.height]),T(this,Et,vx).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,bi)||x(this,bi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=t/i,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,f]=this.getBaseTranslation();c+=d,u+=f;const{style:p}=n;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,bi)&&(l(this,bi)[0]!==this.x||l(this,bi)[1]!==this.y)}get _hasBeenResized(){return!!l(this,bi)&&(l(this,bi)[2]!==this.width||l(this,bi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Dt,i=n/t,a=n/e;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:a,y:c,width:u,height:d}=this;if(u*=n,d*=i,a*=n,c*=i,this._mustFixPosition)switch(t){case 0:a=En(a,0,n-u),c=En(c,0,i-d);break;case 90:a=En(a,0,n-d),c=En(c,u,i);break;case 180:a=En(a,u,n),c=En(c,d,i);break;case 270:a=En(a,d,n),c=En(c,0,i-u);break}this.x=a/=n,this.y=c/=i;const[f,p]=this.getBaseTranslation();a+=f,c+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return T(n=Dt,Ap,wx).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return T(n=Dt,Ap,wx).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,Ae))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Ul))return this._editToolbar;this._editToolbar=new cx(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=l(this,Ae))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Ae)||(y0.initialize(Dt._l10n),x(this,Ae,new y0(this)),l(this,jl)&&(l(this,Ae).data=l(this,jl),x(this,jl,null))),l(this,Ae)}get altTextData(){var t;return(t=l(this,Ae))==null?void 0:t.data}set altTextData(t){l(this,Ae)&&(l(this,Ae).data=t)}get guessedAltText(){var t;return(t=l(this,Ae))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,Ae))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,Ae))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,Ae)&&!l(this,Ae).isEmpty()}hasAltTextData(){var t;return((t=l(this,Ae))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=l(this,Zt))==null||t.focusButton()}addCommentButton(){return this.canAddComment?l(this,Zt)||x(this,Zt,new hy(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,Kr)){this._uiManager.isEditingMode()&&l(this,Kr).classList.remove("hidden");return}this.hasComment&&(x(this,Kr,l(this,Zt).renderForStandalone()),this.div.append(l(this,Kr)))}}removeStandaloneCommentButton(){l(this,Zt).removeStandaloneCommentButton(),x(this,Kr,null)}hideStandaloneCommentButton(){var t;(t=l(this,Kr))==null||t.classList.add("hidden")}get comment(){if(!l(this,Zt))return null;const{data:{richText:t,text:e,date:n,deleted:i}}=l(this,Zt);return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){l(this,Zt)||x(this,Zt,new hy(this)),typeof t=="object"&&t!==null?l(this,Zt).restoreData(t):l(this,Zt).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(l(this,Zt)||x(this,Zt,new hy(this)),l(this,Zt).setInitialText(t,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var t;return(t=l(this,Zt))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=l(this,Zt))==null?void 0:t.isDeleted()}get hasComment(){return!!l(this,Zt)&&!l(this,Zt).isEmpty()&&!l(this,Zt).isDeleted()}async editComment(t){l(this,Zt)||x(this,Zt,new hy(this)),l(this,Zt).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){l(this,Zt).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[a]=this.pageDimensions,[c]=this.pageTranslation,u=c+a+1,d=i-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){l(this,Zt).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var c;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,rh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),T(this,Et,Sx).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),k_(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Hl)||x(this,Hl,new v0({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:T(this,Et,G_).bind(this),onPinching:T(this,Et,X_).bind(this),onPinchEnd:T(this,Et,Y_).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(c=this._uiManager._editorUndoBar)==null||c.hide(),t}pointerdown(t){const{isMac:e}=sn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,zl,!0),this._isDraggable){T(this,Et,K_).call(this,t);return}T(this,Et,bx).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,lr)&&clearTimeout(l(this,lr)),x(this,lr,setTimeout(()=>{var t;x(this,lr,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[a,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/i,p=e/i,g=this.x*a,y=this.y*c,w=this.width*a,S=this.height*c;switch(n){case 0:return[g+f+u,c-y-p-S+d,g+f+w+u,c-y-p+d];case 90:return[g+p+u,c-y+f+d,g+p+S+u,c-y+f+w+d];case 180:return[g-f-w+u,c-y+p+d,g-f+u,c-y+p+S+d];case 270:return[g-p-S+u,c-y-f-w+d,g-p+u,c-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,a,c]=t,u=a-n,d=c-i;switch(this.rotation){case 0:return[n,e-c,u,d];case 90:return[n,e-i,d,u];case 180:return[a,e-i,u,d];case 270:return[a,e-c,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=l(this,Zt))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:a,richText:c},uid:u,pageIndex:d,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!a,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),x(this,Ul,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),x(this,Ul,!1),!0):!1}isInEditMode(){return l(this,Ul)}shouldGetKeyboardEvents(){return l(this,Qr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:c}=window;return e<c&&i>0&&t<a&&n>0}rebuild(){T(this,Et,Sx).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,x(i,jl,t.accessibilityData),i._isCopy=t.isCopy||!1;const[a,c]=i.pageDimensions,[u,d,f,p]=i.getRectInCurrentCoords(t.rect,c);return i.x=u/a,i.y=d/c,i.width=f/a,i.height=p/c,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=l(this,ba))==null||t.abort(),x(this,ba,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,lr)&&(clearTimeout(l(this,lr)),x(this,lr,null)),T(this,Et,vf).call(this),this.removeEditToolbar(),l(this,ls)){for(const i of l(this,ls).values())clearTimeout(i);x(this,ls,null)}this.parent=null,(e=l(this,Hl))==null||e.destroy(),x(this,Hl,null),(n=l(this,as))==null||n.remove(),x(this,as,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,Et,$_).call(this),l(this,wn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,a,c]=this.getPDFRect();return[Dt._round(n+(a-n)*t),Dt._round(i+(c-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,Zt).commentPopupPositionInLayer}set commentPopupPosition(t){l(this,Zt).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return l(this,Zt).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,Zt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=l(this,Zt))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,qr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,wn).children;if(!l(this,Ds)){x(this,Ds,Array.from(e));const c=T(this,Et,q_).bind(this),u=T(this,Et,Q_).bind(this),d=this._uiManager._signal;for(const f of l(this,Ds)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",T(this,Et,Z_).bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",Dt._l10nResizer[p])}}const n=l(this,Ds)[0];let i=0;for(const c of e){if(c===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ds).length/4);if(a!==i){if(a<i)for(let u=0;u<i-a;u++)l(this,wn).append(l(this,wn).firstElementChild);else if(a>i)for(let u=0;u<a-i;u++)l(this,wn).firstElementChild.before(l(this,wn).lastElementChild);let c=0;for(const u of e){const f=l(this,Ds)[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Dt._l10nResizer[f])}}T(this,Et,Ex).call(this,0),x(this,Qr,!0),l(this,wn).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Qr)&&T(this,Et,Ax).call(this,l(this,vp),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){T(this,Et,vf).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(n=l(this,Ae))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,i,a;this.isSelected&&(this.isSelected=!1,(t=l(this,wn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=l(this,Ae))==null||a.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,wp)}set isEditing(t){x(this,wp,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,ls)||x(this,ls,new Map);const{action:n}=t;let i=l(this,ls).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),l(this,ls).delete(n),l(this,ls).size===0&&x(this,ls,null)},Dt._telemetryTimeout),l(this,ls).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,rh,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,rh,!0)}updateFakeAnnotationElement(t){if(!l(this,as)&&!this.deleted){x(this,as,t.addFakeAnnotation(this));return}if(this.deleted){l(this,as).remove(),x(this,as,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,as).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};jl=new WeakMap,Ds=new WeakMap,Ae=new WeakMap,Zt=new WeakMap,Kr=new WeakMap,rh=new WeakMap,Aa=new WeakMap,yp=new WeakMap,wn=new WeakMap,Vl=new WeakMap,qr=new WeakMap,as=new WeakMap,ba=new WeakMap,vp=new WeakMap,zl=new WeakMap,bi=new WeakMap,wp=new WeakMap,Ul=new WeakMap,Qr=new WeakMap,lr=new WeakMap,oh=new WeakMap,ah=new WeakMap,ls=new WeakMap,Hl=new WeakMap,xp=new WeakMap,R0=new WeakMap,Et=new WeakSet,vx=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ap=new WeakSet,wx=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Dy=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},$_=function(){if(l(this,wn))return;x(this,wn,document.createElement("div")),l(this,wn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");l(this,wn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",T(this,Et,W_).bind(this,n),{signal:e}),i.addEventListener("contextmenu",ys,{signal:e}),i.tabIndex=-1}this.div.prepend(l(this,wn))},W_=function(t,e){var p;e.preventDefault();const{isMac:n}=sn.platform;if(e.button!==0||e.ctrlKey&&n)return;(p=l(this,Ae))==null||p.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,x(this,Vl,[e.screenX,e.screenY]);const a=new AbortController,c=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",T(this,Et,Ax).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",Ne,{passive:!1,signal:c}),window.addEventListener("contextmenu",ys,{signal:c}),x(this,qr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var g;a.abort(),this.parent.togglePointerEvents(!0),(g=l(this,Ae))==null||g.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=d,T(this,Et,Ly).call(this)};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})},xx=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Ly=function(){if(!l(this,qr))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=l(this,qr);x(this,qr,null);const a=this.x,c=this.y,u=this.width,d=this.height;a===t&&c===e&&u===n&&d===i||this.addCommands({cmd:T(this,Et,xx).bind(this,a,c,u,d),undo:T(this,Et,xx).bind(this,t,e,n,i),mustExec:!0})},Ax=function(t,e){const[n,i]=this.parentDimensions,a=this.x,c=this.y,u=this.width,d=this.height,f=Dt.MIN_SIZE/n,p=Dt.MIN_SIZE/i,g=T(this,Et,Dy).call(this,this.rotation),y=(ot,tt)=>[g[0]*ot+g[2]*tt,g[1]*ot+g[3]*tt],w=T(this,Et,Dy).call(this,360-this.rotation),S=(ot,tt)=>[w[0]*ot+w[2]*tt,w[1]*ot+w[3]*tt];let E,C,k=!1,M=!1;switch(t){case"topLeft":k=!0,E=(ot,tt)=>[0,0],C=(ot,tt)=>[ot,tt];break;case"topMiddle":E=(ot,tt)=>[ot/2,0],C=(ot,tt)=>[ot/2,tt];break;case"topRight":k=!0,E=(ot,tt)=>[ot,0],C=(ot,tt)=>[0,tt];break;case"middleRight":M=!0,E=(ot,tt)=>[ot,tt/2],C=(ot,tt)=>[0,tt/2];break;case"bottomRight":k=!0,E=(ot,tt)=>[ot,tt],C=(ot,tt)=>[0,0];break;case"bottomMiddle":E=(ot,tt)=>[ot/2,tt],C=(ot,tt)=>[ot/2,0];break;case"bottomLeft":k=!0,E=(ot,tt)=>[0,tt],C=(ot,tt)=>[ot,0];break;case"middleLeft":M=!0,E=(ot,tt)=>[0,tt/2],C=(ot,tt)=>[ot,tt/2];break}const _=E(u,d),L=C(u,d);let D=y(...L);const F=Dt._round(a+D[0]),j=Dt._round(c+D[1]);let U=1,G=1,q,J;if(e.fromKeyboard)({deltaX:q,deltaY:J}=e);else{const{screenX:ot,screenY:tt}=e,[X,st]=l(this,Vl);[q,J]=this.screenToPageTranslation(ot-X,tt-st),l(this,Vl)[0]=ot,l(this,Vl)[1]=tt}if([q,J]=S(q/n,J/i),k){const ot=Math.hypot(u,d);U=G=Math.max(Math.min(Math.hypot(L[0]-_[0]-q,L[1]-_[1]-J)/ot,1/u,1/d),f/u,p/d)}else M?U=En(Math.abs(L[0]-_[0]-q),f,1)/u:G=En(Math.abs(L[1]-_[1]-J),p,1)/d;const vt=Dt._round(u*U),wt=Dt._round(d*G);D=y(...C(vt,wt));const yt=F-D[0],At=j-D[1];l(this,bi)||x(this,bi,[this.x,this.y,this.width,this.height]),this.width=vt,this.height=wt,this.x=yt,this.y=At,this.setDims(),this.fixAndSetPosition(),this._onResizing()},G_=function(){var t;x(this,qr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,Ae))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},X_=function(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const c=T(this,Et,Dy).call(this,this.rotation),u=(F,j)=>[c[0]*F+c[2]*j,c[1]*F+c[3]*j],[d,f]=this.parentDimensions,p=this.x,g=this.y,y=this.width,w=this.height,S=Dt.MIN_SIZE/d,E=Dt.MIN_SIZE/f;a=Math.max(Math.min(a,1/y,1/w),S/y,E/w);const C=Dt._round(y*a),k=Dt._round(w*a);if(C===y&&k===w)return;l(this,bi)||x(this,bi,[p,g,y,w]);const M=u(y/2,w/2),_=Dt._round(p+M[0]),L=Dt._round(g+M[1]),D=u(C/2,k/2);this.x=_-D[0],this.y=L-D[1],this.width=C,this.height=k,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Y_=function(){var t;(t=l(this,Ae))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),T(this,Et,Ly).call(this)},bx=function(t){const{isMac:e}=sn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},K_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),c={capture:!0,passive:!1,signal:a},u=f=>{i.abort(),x(this,Aa,null),x(this,zl,!1),this._uiManager.endDragSession()||T(this,Et,bx).call(this,f),n&&this._onStopDragging()};e&&(x(this,oh,t.clientX),x(this,ah,t.clientY),x(this,Aa,t.pointerId),x(this,yp,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:y}=f;if(y!==l(this,Aa)){Ne(f);return}const[w,S]=this.screenToPageTranslation(p-l(this,oh),g-l(this,ah));x(this,oh,p),x(this,ah,g),this._uiManager.dragSelectedEditors(w,S)},c),window.addEventListener("touchmove",Ne,c),window.addEventListener("pointerdown",f=>{f.pointerType===l(this,yp)&&(l(this,Hl)||f.isPrimary)&&u(f),Ne(f)},c));const d=f=>{if(!l(this,Aa)||l(this,Aa)===f.pointerId){u(f);return}Ne(f)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},Sx=function(){if(l(this,ba)||!this.div)return;x(this,ba,new AbortController);const t=this._uiManager.combinedSignal(l(this,ba));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},q_=function(t){Dt._resizerKeyboardManager.exec(this,t)},Q_=function(t){var e;l(this,Qr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,wn)&&T(this,Et,vf).call(this)},Z_=function(t){x(this,vp,l(this,Qr)?t:"")},Ex=function(t){if(l(this,Ds))for(const e of l(this,Ds))e.tabIndex=t},vf=function(){x(this,Qr,!1),T(this,Et,Ex).call(this,-1),T(this,Et,Ly).call(this)},b(Dt,Ap),$(Dt,"_l10n",null),$(Dt,"_l10nResizer",null),$(Dt,"_borderLineWidth",-1),$(Dt,"_colorManager",new dx),$(Dt,"_zIndex",1),$(Dt,"_telemetryTimeout",1e3);let pe=Dt;class f3 extends pe{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ik=3285377520,Qi=4294901760,Qs=65535;class J_{constructor(t){this.h1=t?t&4294967295:ik,this.h2=t?t&4294967295:ik}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let E=0,C=t.length;E<C;E++){const k=t.charCodeAt(E);k<=255?e[n++]=k:(e[n++]=k>>>8,e[n++]=k&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,c=new Uint32Array(e.buffer,0,i);let u=0,d=0,f=this.h1,p=this.h2;const g=3432918353,y=461845907,w=g&Qs,S=y&Qs;for(let E=0;E<i;E++)E&1?(u=c[E],u=u*g&Qi|u*w&Qs,u=u<<15|u>>>17,u=u*y&Qi|u*S&Qs,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[E],d=d*g&Qi|d*w&Qs,d=d<<15|d>>>17,d=d*y&Qi|d*S&Qs,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,a){case 3:u^=e[i*4+2]<<16;case 2:u^=e[i*4+1]<<8;case 1:u^=e[i*4],u=u*g&Qi|u*w&Qs,u=u<<15|u>>>17,u=u*y&Qi|u*S&Qs,i&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Qi|t*36045&Qs,e=e*4283543511&Qi|((e<<16|t>>>16)*2950163797&Qi)>>>16,t^=e>>>1,t=t*444984403&Qi|t*60499&Qs,e=e*3301882366&Qi|((e<<16|t>>>16)*3120437893&Qi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Cx=Object.freeze({map:null,hash:"",transfer:void 0});var $l,Wl,Zr,xn,F0,t2;class pb{constructor(){b(this,F0);b(this,$l,!1);b(this,Wl,null);b(this,Zr,null);b(this,xn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=l(this,xn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return l(this,xn).get(t)}remove(t){const e=l(this,xn).get(t);if(e!==void 0&&(e instanceof pe&&l(this,Zr).delete(e.annotationElementId),l(this,xn).delete(t),l(this,xn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of l(this,xn).values())if(n instanceof pe)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=l(this,xn).get(t);let i=!1;if(n!==void 0)for(const[a,c]of Object.entries(e))n[a]!==c&&(i=!0,n[a]=c);else i=!0,l(this,xn).set(t,e);i&&T(this,F0,t2).call(this),e instanceof pe&&((l(this,Zr)||x(this,Zr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return l(this,xn).has(t)}get size(){return l(this,xn).size}resetModified(){l(this,$l)&&(x(this,$l,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new e2(this)}get serializable(){if(l(this,xn).size===0)return Cx;const t=new Map,e=new J_,n=[],i=Object.create(null);let a=!1;for(const[c,u]of l(this,xn)){const d=u instanceof pe?u.serialize(!1,i):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Cx}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const a of l(this,xn).values()){if(!(a instanceof pe)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const c=a.telemetryFinalData;if(!c)continue;const{type:u}=c;e.has(u)||e.set(u,Object.getPrototypeOf(a).constructor),t||(t=Object.create(null));const d=t[u]||(t[u]=new Map);for(const[f,p]of Object.entries(c)){if(f==="type")continue;let g=d.get(f);g||(g=new Map,d.set(f,g));const y=g.get(p)??0;g.set(p,y+1)}}if((i>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:n}),!t)return null;for(const[a,c]of e)t[a]=c.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){x(this,Wl,null)}updateEditor(t,e){var i;const n=(i=l(this,Zr))==null?void 0:i.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=l(this,Zr))==null?void 0:e.get(t))||null}get modifiedIds(){if(l(this,Wl))return l(this,Wl);const t=[];if(l(this,Zr))for(const e of l(this,Zr).values())e.serialize()&&t.push(e.annotationElementId);return x(this,Wl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,xn).entries()}}$l=new WeakMap,Wl=new WeakMap,Zr=new WeakMap,xn=new WeakMap,F0=new WeakSet,t2=function(){l(this,$l)||(x(this,$l,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var bp;class e2 extends pb{constructor(e){super();b(this,bp);const{map:n,hash:i,transfer:a}=e.serializable,c=structuredClone(n,a?{transfer:a}:null);x(this,bp,{map:c,hash:i,transfer:a})}get print(){Yt("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,bp)}get modifiedIds(){return Mt(this,"modifiedIds",{ids:new Set,hash:""})}}bp=new WeakMap;var lh;class p3{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){b(this,lh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,lh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||l(this,lh).has(t.loadedName))){if(Xt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:c}=t,u=new FontFace(i,a,c);this.addNativeFontFace(u);try{await u.load(),l(this,lh).add(i),n==null||n(t)}catch{_t(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw _t(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Mt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Mt(this,"isSyncFontLoadingSupported",Xn||sn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Xt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Mt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(L,D){return L.charCodeAt(D)<<24|L.charCodeAt(D+1)<<16|L.charCodeAt(D+2)<<8|L.charCodeAt(D+3)&255}function i(L,D,F,j){const U=L.substring(0,D),G=L.substring(D+F);return U+j+G}let a,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(L,D){if(++f>30){_t("Load test font never loaded."),D();return}if(d.font="30px "+L,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,L,D))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=i(y,976,g.length,g);const S=16,E=1482184792;let C=n(y,S);for(a=0,c=g.length-3;a<c;a+=4)C=C-E+n(g,a)|0;a<g.length&&(C=C-E+n(g+"XXX",a)|0),y=i(y,S,4,KB(C));const k=`url(data:font/opentype;base64,${btoa(y)});`,M=`@font-face {font-family:"${g}";src:${k}}`;this.insertRule(M);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const L of[t.loadedName,g]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=L,_.append(D)}this._document.body.append(_),p(g,()=>{_.remove(),e.complete()})}}lh=new WeakMap;var ie;class m3{constructor(t,e=null,n,i){b(this,ie);this.compiledGlyphs=Object.create(null),x(this,ie,t),this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(c){_t(`getPathGenerator - ignoring character: "${c}".`)}const a=w_(i==null?void 0:i.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}get black(){return l(this,ie).black}get bold(){return l(this,ie).bold}get disableFontFace(){return l(this,ie).disableFontFace??!1}set disableFontFace(t){Mt(this,"disableFontFace",!!t)}get fontExtraProperties(){return l(this,ie).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,ie).isInvalidPDFjsFont}get isType3Font(){return l(this,ie).isType3Font}get italic(){return l(this,ie).italic}get missingFile(){return l(this,ie).missingFile}get remeasure(){return l(this,ie).remeasure}get vertical(){return l(this,ie).vertical}get ascent(){return l(this,ie).ascent}get defaultWidth(){return l(this,ie).defaultWidth}get descent(){return l(this,ie).descent}get bbox(){return l(this,ie).bbox}set bbox(t){Mt(this,"bbox",t)}get fontMatrix(){return l(this,ie).fontMatrix}get fallbackName(){return l(this,ie).fallbackName}get loadedName(){return l(this,ie).loadedName}get mimetype(){return l(this,ie).mimetype}get name(){return l(this,ie).name}get data(){return l(this,ie).data}clearData(){l(this,ie).clearData()}get cssFontInfo(){return l(this,ie).cssFontInfo}get systemFontInfo(){return l(this,ie).systemFontInfo}get defaultVMetrics(){return l(this,ie).defaultVMetrics}}ie=new WeakMap;var ch,uh,Sp,hh,Ry;const Iu=class Iu{constructor(t){b(this,hh);b(this,ch);b(this,uh);b(this,Sp);x(this,ch,t),x(this,uh,new DataView(l(this,ch))),x(this,Sp,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const f of Iu.strings){const p=e.encode(t[f]);n[f]=p,i+=4+p.length}const a=new ArrayBuffer(i),c=new Uint8Array(a),u=new DataView(a);let d=0;for(const f of Iu.strings){const p=n[f],g=p.length;u.setUint32(d,g),c.set(p,d+4),d+=4+g}return Xt(d===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return T(this,hh,Ry).call(this,0)}get fontWeight(){return T(this,hh,Ry).call(this,1)}get italicAngle(){return T(this,hh,Ry).call(this,2)}};ch=new WeakMap,uh=new WeakMap,Sp=new WeakMap,hh=new WeakSet,Ry=function(t){Xt(t<Iu.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=l(this,uh).getUint32(e)+4;const n=l(this,uh).getUint32(e);return l(this,Sp).decode(new Uint8Array(l(this,ch),e+4,n))},$(Iu,"strings",["fontFamily","fontWeight","italicAngle"]);let w0=Iu;var Sa,cr,Gl,Xl,wf;const Nu=class Nu{constructor(t){b(this,Xl);b(this,Sa);b(this,cr);b(this,Gl);x(this,Sa,t),x(this,cr,new DataView(l(this,Sa))),x(this,Gl,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const y of Nu.strings){const w=e.encode(t[y]);n[y]=w,i+=4+w.length}i+=4;let a,c,u=1+i;t.style&&(a=e.encode(t.style.style),c=e.encode(t.style.weight),u+=4+a.length+4+c.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let g=0;p.setUint8(g++,t.guessFallback?1:0),p.setUint32(g,0),g+=4,i=0;for(const y of Nu.strings){const w=n[y],S=w.length;i+=4+S,p.setUint32(g,S),f.set(w,g+4),g+=4+S}return p.setUint32(g-i-4,i),t.style&&(p.setUint32(g,a.length),f.set(a,g+4),g+=4+a.length,p.setUint32(g,c.length),f.set(c,g+4),g+=4+c.length),Xt(g<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(g)}get guessFallback(){return l(this,cr).getUint8(0)!==0}get css(){return T(this,Xl,wf).call(this,0)}get loadedName(){return T(this,Xl,wf).call(this,1)}get baseFontName(){return T(this,Xl,wf).call(this,2)}get src(){return T(this,Xl,wf).call(this,3)}get style(){let t=1;t+=4+l(this,cr).getUint32(t);const e=l(this,cr).getUint32(t),n=l(this,Gl).decode(new Uint8Array(l(this,Sa),t+4,e));t+=4+e;const i=l(this,cr).getUint32(t),a=l(this,Gl).decode(new Uint8Array(l(this,Sa),t+4,i));return{style:n,weight:a}}};Sa=new WeakMap,cr=new WeakMap,Gl=new WeakMap,Xl=new WeakSet,wf=function(t){Xt(t<Nu.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=l(this,cr).getUint32(e)+4;const n=l(this,cr).getUint32(e);return l(this,Gl).decode(new Uint8Array(l(this,Sa),e+4,n))},$(Nu,"strings",["css","loadedName","baseFontName","src"]);let x0=Nu;var dh,fh,ph,mh,Si,ur,Ep,se,Ie,Ts,Fy,xf;const Rt=class Rt{constructor({data:t,extra:e}){b(this,Ie);b(this,ur);b(this,Ep);b(this,se);x(this,ur,t),x(this,Ep,new TextDecoder),x(this,se,new DataView(l(this,ur))),e&&Object.assign(this,e)}get black(){return T(this,Ie,Ts).call(this,0)}get bold(){return T(this,Ie,Ts).call(this,1)}get disableFontFace(){return T(this,Ie,Ts).call(this,2)}get fontExtraProperties(){return T(this,Ie,Ts).call(this,3)}get isInvalidPDFjsFont(){return T(this,Ie,Ts).call(this,4)}get isType3Font(){return T(this,Ie,Ts).call(this,5)}get italic(){return T(this,Ie,Ts).call(this,6)}get missingFile(){return T(this,Ie,Ts).call(this,7)}get remeasure(){return T(this,Ie,Ts).call(this,8)}get vertical(){return T(this,Ie,Ts).call(this,9)}get ascent(){return T(this,Ie,Fy).call(this,0)}get defaultWidth(){return T(this,Ie,Fy).call(this,1)}get descent(){return T(this,Ie,Fy).call(this,2)}get bbox(){let t=l(Rt,fh);if(l(this,se).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<4;i++)n.push(l(this,se).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=l(Rt,ph);if(l(this,se).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<6;i++)n.push(l(this,se).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=l(Rt,mh);if(l(this,se).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<3;i++)n.push(l(this,se).getInt16(t,!0)),t+=2;return n}get fallbackName(){return T(this,Ie,xf).call(this,0)}get loadedName(){return T(this,Ie,xf).call(this,1)}get mimetype(){return T(this,Ie,xf).call(this,2)}get name(){return T(this,Ie,xf).call(this,3)}get data(){let t=l(Rt,Si);const e=l(this,se).getUint32(t);t+=4+e;const n=l(this,se).getUint32(t);t+=4+n;const i=l(this,se).getUint32(t);t+=4+i;const a=l(this,se).getUint32(t);if(a!==0)return new Uint8Array(l(this,ur),t+4,a)}clearData(){let t=l(Rt,Si);const e=l(this,se).getUint32(t);t+=4+e;const n=l(this,se).getUint32(t);t+=4+n;const i=l(this,se).getUint32(t);t+=4+i;const a=l(this,se).getUint32(t);new Uint8Array(l(this,ur),t+4,a).fill(0),l(this,se).setUint32(t,0)}get cssFontInfo(){let t=l(Rt,Si);const e=l(this,se).getUint32(t);t+=4+e;const n=l(this,se).getUint32(t);t+=4+n;const i=l(this,se).getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(l(this,ur),t+4,i)),new w0(a.buffer)}get systemFontInfo(){let t=l(Rt,Si);const e=l(this,se).getUint32(t);t+=4+e;const n=l(this,se).getUint32(t);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(l(this,ur),t+4,n)),new x0(i.buffer)}static write(t){const e=t.systemFontInfo?x0.write(t.systemFontInfo):null,n=t.cssFontInfo?w0.write(t.cssFontInfo):null,i=new TextEncoder,a={};let c=0;for(const E of Rt.strings)a[E]=i.encode(t[E]),c+=4+a[E].length;const u=l(Rt,Si)+4+c+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),p=new DataView(d);let g=0;const y=Rt.bools.length;let w=0,S=0;for(let E=0;E<y;E++){const C=t[Rt.bools[E]];w|=(C===void 0?0:C?2:1)<<S,S+=2,(S===8||E===y-1)&&(p.setUint8(g++,w),w=0,S=0)}Xt(g===l(Rt,dh),"FontInfo.write: Boolean properties offset mismatch");for(const E of Rt.numbers)p.setFloat64(g,t[E]),g+=8;if(Xt(g===l(Rt,fh),"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(g++,4);for(const E of t.bbox)p.setInt16(g,E,!0),g+=2}else p.setUint8(g++,0),g+=8;if(Xt(g===l(Rt,ph),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(g++,6);for(const E of t.fontMatrix)p.setFloat64(g,E,!0),g+=8}else p.setUint8(g++,0),g+=48;if(Xt(g===l(Rt,mh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(g++,1);for(const E of t.defaultVMetrics)p.setInt16(g,E,!0),g+=2}else p.setUint8(g++,0),g+=6;Xt(g===l(Rt,Si),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(l(Rt,Si),0),g+=4;for(const E of Rt.strings){const C=a[E],k=C.length;p.setUint32(g,k),f.set(C,g+4),g+=4+k}if(p.setUint32(l(Rt,Si),g-l(Rt,Si)-4),!e)p.setUint32(g,0),g+=4;else{const E=e.byteLength;p.setUint32(g,E),Xt(g+4+E<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),g+4),g+=4+E}if(!n)p.setUint32(g,0),g+=4;else{const E=n.byteLength;p.setUint32(g,E),Xt(g+4+E<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),g+4),g+=4+E}return t.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,t.data.length),f.set(t.data,g+4),g+=4+t.data.length),Xt(g<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(g)}};dh=new WeakMap,fh=new WeakMap,ph=new WeakMap,mh=new WeakMap,Si=new WeakMap,ur=new WeakMap,Ep=new WeakMap,se=new WeakMap,Ie=new WeakSet,Ts=function(t){Xt(t<Rt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,i=l(this,se).getUint8(e)>>n&3;return i===0?void 0:i===2},Fy=function(t){return Xt(t<Rt.numbers.length,"Invalid number index"),l(this,se).getFloat64(l(Rt,dh)+t*8)},xf=function(t){Xt(t<Rt.strings.length,"Invalid string index");let e=l(Rt,Si)+4;for(let a=0;a<t;a++)e+=l(this,se).getUint32(e)+4;const n=l(this,se).getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(l(this,ur),e+4,n)),l(this,Ep).decode(i)},$(Rt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),$(Rt,"numbers",["ascent","defaultWidth","descent"]),$(Rt,"strings",["fallbackName","loadedName","mimetype","name"]),b(Rt,dh,Math.ceil(Rt.bools.length*2/8)),b(Rt,fh,l(Rt,dh)+Rt.numbers.length*8),b(Rt,ph,l(Rt,fh)+1+8),b(Rt,mh,l(Rt,ph)+1+48),b(Rt,Si,l(Rt,mh)+1+6);let Tx=Rt;var Cp,Tp,kp,Pp,_p,Mp,Dp,Lp;const de=class de{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,i=[],a=[],c=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],c=t[3],e===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],i=t[2],a=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(i.length/2),g=Math.floor(a.length/3),y=c.length,w=u.length;let S=0;for(const D of u)S+=1,S=Math.ceil(S/4)*4,S+=4+D.coords.length*4,S+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(S+=4);const E=20+p*8+g*3+y*8+(n?16:0)+(f?3:0)+S,C=new ArrayBuffer(E),k=new DataView(C),M=new Uint8Array(C);k.setUint8(l(de,Cp),e),k.setUint8(l(de,Tp),n?1:0),k.setUint8(l(de,kp),f?1:0),k.setUint8(l(de,Pp),d),k.setUint32(l(de,_p),p,!0),k.setUint32(l(de,Mp),g,!0),k.setUint32(l(de,Dp),y,!0),k.setUint32(l(de,Lp),w,!0);let _=20;new Float32Array(C,_,p*2).set(i),_+=p*8,M.set(a,_),_+=g*3;for(const[D,F]of c)k.setFloat32(_,D,!0),_+=4,k.setUint32(_,parseInt(F.slice(1),16),!0),_+=4;if(n)for(const D of n)k.setFloat32(_,D,!0),_+=4;f&&(M.set(f,_),_+=3);for(let D=0;D<u.length;D++){const F=u[D];k.setUint8(_,F.type),_+=1,_=Math.ceil(_/4)*4,k.setUint32(_,F.coords.length,!0),_+=4,new Int32Array(C,_,F.coords.length).set(F.coords),_+=F.coords.length*4,k.setUint32(_,F.colors.length,!0),_+=4,new Int32Array(C,_,F.colors.length).set(F.colors),_+=F.colors.length*4,F.verticesPerRow!==void 0&&(k.setUint32(_,F.verticesPerRow,!0),_+=4)}return C}getIR(){const t=this.view,e=this.data[l(de,Cp)],n=!!this.data[l(de,Tp)],i=!!this.data[l(de,kp)],a=t.getUint32(l(de,_p),!0),c=t.getUint32(l(de,Mp),!0),u=t.getUint32(l(de,Dp),!0),d=t.getUint32(l(de,Lp),!0);let f=20;const p=new Float32Array(this.buffer,f,a*2);f+=a*8;const g=new Uint8Array(this.buffer,f,c*3);f+=c*3;const y=[];for(let C=0;C<u;++C){const k=t.getFloat32(f,!0);f+=4;const M=t.getUint32(f,!0);f+=4,y.push([k,`#${M.toString(16).padStart(6,"0")}`])}let w=null;if(n){w=[];for(let C=0;C<4;++C)w.push(t.getFloat32(f,!0)),f+=4}let S=null;i&&(S=new Uint8Array(this.buffer,f,3),f+=3);const E=[];for(let C=0;C<d;++C){const k=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const M=t.getUint32(f,!0);f+=4;const _=new Int32Array(this.buffer,f,M);f+=M*4;const L=t.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,L);f+=L*4;const F={type:k,coords:_,colors:D};k===sx.LATTICE&&(F.verticesPerRow=t.getUint32(f,!0),f+=4),E.push(F)}if(e===1)return["RadialAxial","axial",w,y,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",w,y,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const C=this.data[l(de,Pp)];let k=null;if(p.length>0){let M=p[0],_=p[0],L=p[1],D=p[1];for(let F=0;F<p.length;F+=2){const j=p[F],U=p[F+1];M=M>j?j:M,L=L>U?U:L,_=_<j?j:_,D=D<U?U:D}k=[M,L,_,D]}return["Mesh",C,p,g,E,k,w,S]}throw new Error(`Unsupported pattern kind: ${e}`)}};Cp=new WeakMap,Tp=new WeakMap,kp=new WeakMap,Pp=new WeakMap,_p=new WeakMap,Mp=new WeakMap,Dp=new WeakMap,Lp=new WeakMap,b(de,Cp,0),b(de,Tp,1),b(de,kp,2),b(de,Pp,3),b(de,_p,4),b(de,Mp,8),b(de,Dp,12),b(de,Lp,16);let kx=de;var gh;class g3{constructor(t){b(this,gh);x(this,gh,t)}static write(t){let e,n;return sn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return sn.isFloat16ArraySupported?new Float16Array(l(this,gh)):new Float32Array(l(this,gh))}}gh=new WeakMap;function y3(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Xn)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function v3(r){if(Xn&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return ev(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function dy(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const Px=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,w3=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",x3=t3.bind(null,Px,w3);var Jr,I0;class A3{constructor(){b(this,Jr,new Map);b(this,I0,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};l(this,I0).then(()=>{for(const[i]of l(this,Jr))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);i=()=>a.removeEventListener("abort",c),a.addEventListener("abort",c)}l(this,Jr).set(e,i)}removeEventListener(t,e){const n=l(this,Jr).get(e);n==null||n(),l(this,Jr).delete(e)}terminate(){for(const[,t]of l(this,Jr))t==null||t();l(this,Jr).clear()}}Jr=new WeakMap,I0=new WeakMap;const fy={DATA:1,ERROR:2},He={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function sk(){}function si(r){if(r instanceof Qa||r instanceof rx||r instanceof qT||r instanceof m0||r instanceof C1)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Qa(r.message);case"InvalidPDFException":return new rx(r.message);case"PasswordException":return new qT(r.message,r.code);case"ResponseException":return new m0(r.message,r.status,r.missing);case"UnknownErrorException":return new C1(r.message,r.details)}return new C1(r.message,r.toString())}var yh,gs,n2,i2,s2,Iy;class Af{constructor(t,e,n){b(this,gs);b(this,yh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",T(this,gs,n2).bind(this),{signal:l(this,yh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(c){a.reject(c)}return a.promise}sendWithStream(t,e,n,i){const a=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:a,data:e,desiredSize:f.desiredSize},i),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,d.postMessage({sourceName:c,targetName:u,stream:He.PULL,streamId:a,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Xt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:He.CANCEL,streamId:a,reason:si(f)}),p.promise}},n)}destroy(){var t;(t=l(this,yh))==null||t.abort(),x(this,yh,null)}}yh=new WeakMap,gs=new WeakSet,n2=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){T(this,gs,s2).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===fy.DATA)i.resolve(t.data);else if(t.callback===fy.ERROR)i.reject(si(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(c){a.postMessage({sourceName:n,targetName:i,callback:fy.DATA,callbackId:t.callbackId,data:c})},function(c){a.postMessage({sourceName:n,targetName:i,callback:fy.ERROR,callbackId:t.callbackId,reason:si(c)})});return}if(t.streamId){T(this,gs,i2).call(this,t);return}e(t.data)},i2=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,g){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:He.ENQUEUE,streamId:e,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:He.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){Xt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:He.ERROR,streamId:e,reason:si(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:He.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:He.START_COMPLETE,streamId:e,reason:si(f)})})},s2=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case He.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(si(t.reason));break;case He.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(si(t.reason));break;case He.PULL:if(!u){a.postMessage({sourceName:n,targetName:i,stream:He.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||sk).then(function(){a.postMessage({sourceName:n,targetName:i,stream:He.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:He.PULL_COMPLETE,streamId:e,reason:si(f)})});break;case He.ENQUEUE:if(Xt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case He.CLOSE:if(Xt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),T(this,gs,Iy).call(this,c,e);break;case He.ERROR:Xt(c,"error should have stream controller"),c.controller.error(si(t.reason)),T(this,gs,Iy).call(this,c,e);break;case He.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(si(t.reason)),T(this,gs,Iy).call(this,c,e);break;case He.CANCEL:if(!u)break;const d=si(t.reason);Promise.try(u.onCancel||sk,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:He.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:n,targetName:i,stream:He.CANCEL_COMPLETE,streamId:e,reason:si(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Iy=async function(t,e){var n,i,a;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var Rp;class r2{constructor({enableHWA:t=!1}){b(this,Rp,!1);x(this,Rp,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,Rp)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Yt("Abstract method `_createCanvas` called.")}}Rp=new WeakMap;class b3 extends r2{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class o2{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class rk extends o2{async _fetch(t){const e=await Xm(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):ev(e)}}class a2{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,a){return"none"}destroy(t=!1){}}var Yl,vh,to,eo,Nn,Kl,ql,lt,Ln,bf,Au,Ny,bu,l2,_x,Su,Sf,Ef,Mx,Cf;class S3 extends a2{constructor({docId:e,ownerDocument:n=globalThis.document}){super();b(this,lt);b(this,Yl);b(this,vh);b(this,to);b(this,eo);b(this,Nn);b(this,Kl);b(this,ql,0);x(this,eo,e),x(this,Nn,n)}addFilter(e){if(!e)return"none";let n=l(this,lt,Ln).get(e);if(n)return n;const[i,a,c]=T(this,lt,Ny).call(this,e),u=e.length===1?i:`${i}${a}${c}`;if(n=l(this,lt,Ln).get(u),n)return l(this,lt,Ln).set(e,n),n;const d=`g_${l(this,eo)}_transfer_map_${Qe(this,ql)._++}`,f=T(this,lt,bu).call(this,d);l(this,lt,Ln).set(e,f),l(this,lt,Ln).set(u,f);const p=T(this,lt,Su).call(this,d);return T(this,lt,Ef).call(this,i,a,c,p),f}addHCMFilter(e,n){var S;const i=`${e}-${n}`,a="base";let c=l(this,lt,bf).get(a);if((c==null?void 0:c.key)===i||(c?((S=c.filter)==null||S.remove(),c.key=i,c.url="none",c.filter=null):(c={key:i,url:"none",filter:null},l(this,lt,bf).set(a,c)),!e||!n))return c.url;const u=T(this,lt,Cf).call(this,e);e=rt.makeHexColor(...u);const d=T(this,lt,Cf).call(this,n);if(n=rt.makeHexColor(...d),l(this,lt,Au).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const f=new Array(256);for(let E=0;E<=255;E++){const C=E/255;f[E]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const p=f.join(","),g=`g_${l(this,eo)}_hcm_filter`,y=c.filter=T(this,lt,Su).call(this,g);T(this,lt,Ef).call(this,p,p,p,y),T(this,lt,_x).call(this,y);const w=(E,C)=>{const k=u[E]/255,M=d[E]/255,_=new Array(C+1);for(let L=0;L<=C;L++)_[L]=k+L/C*(M-k);return _.join(",")};return T(this,lt,Ef).call(this,w(0,5),w(1,5),w(2,5),y),c.url=T(this,lt,bu).call(this,g),c.url}addAlphaFilter(e){let n=l(this,lt,Ln).get(e);if(n)return n;const[i]=T(this,lt,Ny).call(this,[e]),a=`alpha_${i}`;if(n=l(this,lt,Ln).get(a),n)return l(this,lt,Ln).set(e,n),n;const c=`g_${l(this,eo)}_alpha_map_${Qe(this,ql)._++}`,u=T(this,lt,bu).call(this,c);l(this,lt,Ln).set(e,u),l(this,lt,Ln).set(a,u);const d=T(this,lt,Su).call(this,c);return T(this,lt,Mx).call(this,i,d),u}addLuminosityFilter(e){let n=l(this,lt,Ln).get(e||"luminosity");if(n)return n;let i,a;if(e?([i]=T(this,lt,Ny).call(this,[e]),a=`luminosity_${i}`):a="luminosity",n=l(this,lt,Ln).get(a),n)return l(this,lt,Ln).set(e,n),n;const c=`g_${l(this,eo)}_luminosity_map_${Qe(this,ql)._++}`,u=T(this,lt,bu).call(this,c);l(this,lt,Ln).set(e,u),l(this,lt,Ln).set(a,u);const d=T(this,lt,Su).call(this,c);return T(this,lt,l2).call(this,d),e&&T(this,lt,Mx).call(this,i,d),u}addHighlightHCMFilter(e,n,i,a,c){var M;const u=`${n}-${i}-${a}-${c}`;let d=l(this,lt,bf).get(e);if((d==null?void 0:d.key)===u||(d?((M=d.filter)==null||M.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},l(this,lt,bf).set(e,d)),!n||!i))return d.url;const[f,p]=[n,i].map(T(this,lt,Cf).bind(this));let g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[w,S]=[a,c].map(T(this,lt,Cf).bind(this));y<g&&([g,y,w,S]=[y,g,S,w]),l(this,lt,Au).style.color="";const E=(_,L,D)=>{const F=new Array(256),j=(y-g)/D,U=_/255,G=(L-_)/(255*D);let q=0;for(let J=0;J<=D;J++){const vt=Math.round(g+J*j),wt=U+J*G;for(let yt=q;yt<=vt;yt++)F[yt]=wt;q=vt+1}for(let J=q;J<256;J++)F[J]=F[q-1];return F.join(",")},C=`g_${l(this,eo)}_hcm_${e}_filter`,k=d.filter=T(this,lt,Su).call(this,C);return T(this,lt,_x).call(this,k),T(this,lt,Ef).call(this,E(w[0],S[0],5),E(w[1],S[1],5),E(w[2],S[2],5),k),d.url=T(this,lt,bu).call(this,C),d.url}destroy(e=!1){var n,i,a,c;e&&((n=l(this,Kl))!=null&&n.size)||((i=l(this,to))==null||i.parentNode.parentNode.remove(),x(this,to,null),(a=l(this,vh))==null||a.clear(),x(this,vh,null),(c=l(this,Kl))==null||c.clear(),x(this,Kl,null),x(this,ql,0))}}Yl=new WeakMap,vh=new WeakMap,to=new WeakMap,eo=new WeakMap,Nn=new WeakMap,Kl=new WeakMap,ql=new WeakMap,lt=new WeakSet,Ln=function(){return l(this,vh)||x(this,vh,new Map)},bf=function(){return l(this,Kl)||x(this,Kl,new Map)},Au=function(){if(!l(this,to)){const e=l(this,Nn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=l(this,Nn).createElementNS(Nr,"svg");i.setAttribute("width",0),i.setAttribute("height",0),x(this,to,l(this,Nn).createElementNS(Nr,"defs")),e.append(i),i.append(l(this,to)),l(this,Nn).body.append(e)}return l(this,to)},Ny=function(e){if(e.length===1){const f=e[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=f[y]/255;const g=p.join(",");return[g,g,g]}const[n,i,a]=e,c=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)c[f]=n[f]/255,u[f]=i[f]/255,d[f]=a[f]/255;return[c.join(","),u.join(","),d.join(",")]},bu=function(e){if(l(this,Yl)===void 0){x(this,Yl,"");const n=l(this,Nn).URL;n!==l(this,Nn).baseURI&&(nv(n)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Yl,m_(n,"")))}return`url(${l(this,Yl)}#${e})`},l2=function(e){const n=l(this,Nn).createElementNS(Nr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},_x=function(e){const n=l(this,Nn).createElementNS(Nr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Su=function(e){const n=l(this,Nn).createElementNS(Nr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),l(this,lt,Au).append(n),n},Sf=function(e,n,i){const a=l(this,Nn).createElementNS(Nr,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),e.append(a)},Ef=function(e,n,i,a){const c=l(this,Nn).createElementNS(Nr,"feComponentTransfer");a.append(c),T(this,lt,Sf).call(this,c,"feFuncR",e),T(this,lt,Sf).call(this,c,"feFuncG",n),T(this,lt,Sf).call(this,c,"feFuncB",i)},Mx=function(e,n){const i=l(this,Nn).createElementNS(Nr,"feComponentTransfer");n.append(i),T(this,lt,Sf).call(this,i,"feFuncA",e)},Cf=function(e){return l(this,lt,Au).style.color=e,Km(getComputedStyle(l(this,lt,Au)).getPropertyValue("color"))};class c2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class ok extends c2{async _fetch(t){const e=await Xm(t,"arraybuffer");return new Uint8Array(e)}}class u2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class ak extends u2{async _fetch(t){const e=await Xm(t,"arraybuffer");return new Uint8Array(e)}}Xn&&_t("Please use the `legacy` build in Node.js environments.");async function mb(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class E3 extends a2{}class C3 extends r2{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class T3 extends o2{async _fetch(t){return mb(t)}}class k3 extends c2{async _fetch(t){return mb(t)}}class P3 extends u2{async _fetch(t){return mb(t)}}const yu="__forcedDependency",{floor:lk,ceil:ck}=Math;function py(r,t,e,n,i,a){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],n),r[t*4+2]=Math.max(r[t*4+2],i),r[t*4+3]=Math.max(r[t*4+3],a)}const Dx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var wh,Ea;class _3{constructor(t,e){b(this,wh);b(this,Ea);x(this,wh,t),x(this,Ea,e)}get length(){return l(this,wh).length}isEmpty(t){return l(this,wh)[t]===Dx}minX(t){return l(this,Ea)[t*4+0]/256}minY(t){return l(this,Ea)[t*4+1]/256}maxX(t){return(l(this,Ea)[t*4+2]+1)/256}maxY(t){return(l(this,Ea)[t*4+3]+1)/256}}wh=new WeakMap,Ea=new WeakMap;const my=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};var ai,li,Ql,Ls,Zl,no,Jt,re,io,ci,Fp,xh,Jl,tc,so,On,hr,Ip,Lx;class M3{constructor(t,e,n=!1){b(this,Ip);b(this,ai,{__proto__:null});b(this,li,{__proto__:null,transform:[],moveText:[],sameLineText:[],[yu]:[]});b(this,Ql,new Map);b(this,Ls,[]);b(this,Zl,[]);b(this,no,[[1,0,0,1,0,0]]);b(this,Jt,[-1/0,-1/0,1/0,1/0]);b(this,re,new Float64Array([1/0,1/0,-1/0,-1/0]));b(this,io,-1);b(this,ci,new Set);b(this,Fp,new Map);b(this,xh,new Map);b(this,Jl);b(this,tc);b(this,so);b(this,On);b(this,hr);x(this,Jl,t.width),x(this,tc,t.height),T(this,Ip,Lx).call(this,e),n&&x(this,hr,new Map)}growOperationsCount(t){t>=l(this,On).length&&T(this,Ip,Lx).call(this,t,l(this,On))}save(t){return x(this,ai,{__proto__:l(this,ai)}),x(this,li,{__proto__:l(this,li),transform:{__proto__:l(this,li).transform},moveText:{__proto__:l(this,li).moveText},sameLineText:{__proto__:l(this,li).sameLineText},[yu]:{__proto__:l(this,li)[yu]}}),x(this,Jt,{__proto__:l(this,Jt)}),l(this,Ls).push(t),this}restore(t){var i;const e=Object.getPrototypeOf(l(this,ai));if(e===null)return this;x(this,ai,e),x(this,li,Object.getPrototypeOf(l(this,li))),x(this,Jt,Object.getPrototypeOf(l(this,Jt)));const n=l(this,Ls).pop();return n!==void 0&&((i=my(l(this,hr),t))==null||i.dependencies.add(n),l(this,On)[t]=l(this,On)[n]),this}recordOpenMarker(t){return l(this,Ls).push(t),this}getOpenMarker(){return l(this,Ls).length===0?null:l(this,Ls).at(-1)}recordCloseMarker(t){var n;const e=l(this,Ls).pop();return e!==void 0&&((n=my(l(this,hr),t))==null||n.dependencies.add(e),l(this,On)[t]=l(this,On)[e]),this}beginMarkedContent(t){return l(this,Zl).push(t),this}endMarkedContent(t){var n;const e=l(this,Zl).pop();return e!==void 0&&((n=my(l(this,hr),t))==null||n.dependencies.add(e),l(this,On)[t]=l(this,On)[e]),this}pushBaseTransform(t){return l(this,no).push(rt.multiplyByDOMMatrix(l(this,no).at(-1),t.getTransform())),this}popBaseTransform(){return l(this,no).length>1&&l(this,no).pop(),this}recordSimpleData(t,e){return l(this,ai)[t]=e,this}recordIncrementalData(t,e){return l(this,li)[t].push(e),this}resetIncrementalData(t,e){return l(this,li)[t].length=0,this}recordNamedData(t,e){return l(this,Ql).set(t,e),this}recordSimpleDataFromNamed(t,e,n){l(this,ai)[t]=l(this,Ql).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(yu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in l(this,ai)&&this.recordFutureForcedDependency(e,l(this,ai)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of l(this,ci))this.recordFutureForcedDependency(yu,t);return this}resetBBox(t){return l(this,io)!==t&&(x(this,io,t),l(this,re)[0]=1/0,l(this,re)[1]=1/0,l(this,re)[2]=-1/0,l(this,re)[3]=-1/0),this}recordClipBox(t,e,n,i,a,c){const u=rt.multiplyByDOMMatrix(l(this,no).at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];rt.axialAlignedBoundingBox([n,a,i,c],u,d);const f=rt.intersect(l(this,Jt),d);return f?(l(this,Jt)[0]=f[0],l(this,Jt)[1]=f[1],l(this,Jt)[2]=f[2],l(this,Jt)[3]=f[3]):(l(this,Jt)[0]=l(this,Jt)[1]=1/0,l(this,Jt)[2]=l(this,Jt)[3]=-1/0),this}recordBBox(t,e,n,i,a,c){const u=l(this,Jt);if(u[0]===1/0)return this;const d=rt.multiplyByDOMMatrix(l(this,no).at(-1),e.getTransform());if(u[0]===-1/0)return rt.axialAlignedBoundingBox([n,a,i,c],d,l(this,re)),this;const f=[1/0,1/0,-1/0,-1/0];return rt.axialAlignedBoundingBox([n,a,i,c],d,f),l(this,re)[0]=Math.min(l(this,re)[0],Math.max(f[0],u[0])),l(this,re)[1]=Math.min(l(this,re)[1],Math.max(f[1],u[1])),l(this,re)[2]=Math.max(l(this,re)[2],Math.min(f[2],u[2])),l(this,re)[3]=Math.max(l(this,re)[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,i=1,a=0,c=0,u){const d=n.bbox;let f,p;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&l(this,xh).get(n),f!==!1&&(p=[0,0,0,0],rt.axialAlignedBoundingBox(d,n.fontMatrix,p),(i!==1||a!==0||c!==0)&&rt.scaleMinMax([i,0,0,-i,a,c],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const g=u();return d&&p&&f===void 0&&(f=p[0]<=a-g.actualBoundingBoxLeft&&p[2]>=a+g.actualBoundingBoxRight&&p[1]<=c-g.actualBoundingBoxAscent&&p[3]>=c+g.actualBoundingBoxDescent,l(this,xh).set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,a-g.actualBoundingBoxLeft,a+g.actualBoundingBoxRight,c-g.actualBoundingBoxAscent,c+g.actualBoundingBoxDescent)}recordFullPageBBox(t){return l(this,re)[0]=Math.max(0,l(this,Jt)[0]),l(this,re)[1]=Math.max(0,l(this,Jt)[1]),l(this,re)[2]=Math.min(l(this,Jl),l(this,Jt)[2]),l(this,re)[3]=Math.min(l(this,tc),l(this,Jt)[3]),this}getSimpleIndex(t){return l(this,ai)[t]}recordDependencies(t,e){const n=l(this,ci),i=l(this,ai),a=l(this,li);for(const c of e)c in l(this,ai)?n.add(i[c]):c in a&&a[c].forEach(n.add,n);return this}recordNamedDependency(t,e){return l(this,Ql).has(e)&&l(this,ci).add(l(this,Ql).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[yu]),l(this,hr)){const n=my(l(this,hr),t),{dependencies:i}=n;l(this,ci).forEach(i.add,i),l(this,Ls).forEach(i.add,i),l(this,Zl).forEach(i.add,i),i.delete(t),n.isRenderingOperation=!0}if(l(this,io)===t){const n=lk(l(this,re)[0]*256/l(this,Jl)),i=lk(l(this,re)[1]*256/l(this,tc)),a=ck(l(this,re)[2]*256/l(this,Jl)),c=ck(l(this,re)[3]*256/l(this,tc));py(l(this,so),t,n,i,a,c);for(const u of l(this,ci))u!==t&&py(l(this,so),u,n,i,a,c);for(const u of l(this,Ls))u!==t&&py(l(this,so),u,n,i,a,c);for(const u of l(this,Zl))u!==t&&py(l(this,so),u,n,i,a,c);e||(l(this,ci).clear(),x(this,io,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(l(this,ci));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return l(this,io)===t&&(x(this,io,-1),l(this,Jt)[0]=Math.max(l(this,Jt)[0],l(this,re)[0]),l(this,Jt)[1]=Math.max(l(this,Jt)[1],l(this,re)[1]),l(this,Jt)[2]=Math.min(l(this,Jt)[2],l(this,re)[2]),l(this,Jt)[3]=Math.min(l(this,Jt)[3],l(this,re)[3]),e||l(this,ci).clear()),this}_takePendingDependencies(){const t=l(this,ci);return x(this,ci,new Set),t}_extractOperation(t){const e=l(this,Fp).get(t);return l(this,Fp).delete(t),e}_pushPendingDependencies(t){for(const e of t)l(this,ci).add(e)}take(){return l(this,xh).clear(),new _3(l(this,On),l(this,so))}takeDebugMetadata(){return l(this,hr)}}ai=new WeakMap,li=new WeakMap,Ql=new WeakMap,Ls=new WeakMap,Zl=new WeakMap,no=new WeakMap,Jt=new WeakMap,re=new WeakMap,io=new WeakMap,ci=new WeakMap,Fp=new WeakMap,xh=new WeakMap,Jl=new WeakMap,tc=new WeakMap,so=new WeakMap,On=new WeakMap,hr=new WeakMap,Ip=new WeakSet,Lx=function(t,e){const n=new ArrayBuffer(t*4);x(this,so,new Uint8ClampedArray(n)),x(this,On,new Uint32Array(n)),e&&e.length>0?(l(this,On).set(e),l(this,On).fill(Dx,e.length)):l(this,On).fill(Dx)};var ce,De,Rs,Ah,bh;const Eb=class Eb{constructor(t,e,n){b(this,ce);b(this,De);b(this,Rs);b(this,Ah,0);b(this,bh,0);if(t instanceof Eb&&l(t,Rs)===!!n)return t;x(this,ce,t),x(this,De,e),x(this,Rs,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return Qe(this,bh)._++,l(this,ce).save(l(this,De)),this}restore(t){return l(this,bh)>0&&(l(this,ce).restore(l(this,De)),Qe(this,bh)._--),this}recordOpenMarker(t){return Qe(this,Ah)._++,this}getOpenMarker(){return l(this,Ah)>0?l(this,De):l(this,ce).getOpenMarker()}recordCloseMarker(t){return Qe(this,Ah)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return l(this,ce).pushBaseTransform(t),this}popBaseTransform(){return l(this,ce).popBaseTransform(),this}recordSimpleData(t,e){return l(this,ce).recordSimpleData(t,l(this,De)),this}recordIncrementalData(t,e){return l(this,ce).recordIncrementalData(t,l(this,De)),this}resetIncrementalData(t,e){return l(this,ce).resetIncrementalData(t,l(this,De)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return l(this,ce).recordSimpleDataFromNamed(t,e,l(this,De)),this}recordFutureForcedDependency(t,e){return l(this,ce).recordFutureForcedDependency(t,l(this,De)),this}inheritSimpleDataAsFutureForcedDependencies(t){return l(this,ce).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,ce).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return l(this,Rs)||l(this,ce).resetBBox(l(this,De)),this}recordClipBox(t,e,n,i,a,c){return l(this,Rs)||l(this,ce).recordClipBox(l(this,De),e,n,i,a,c),this}recordBBox(t,e,n,i,a,c){return l(this,Rs)||l(this,ce).recordBBox(l(this,De),e,n,i,a,c),this}recordCharacterBBox(t,e,n,i,a,c,u){return l(this,Rs)||l(this,ce).recordCharacterBBox(l(this,De),e,n,i,a,c,u),this}recordFullPageBBox(t){return l(this,Rs)||l(this,ce).recordFullPageBBox(l(this,De)),this}getSimpleIndex(t){return l(this,ce).getSimpleIndex(t)}recordDependencies(t,e){return l(this,ce).recordDependencies(l(this,De),e),this}recordNamedDependency(t,e){return l(this,ce).recordNamedDependency(l(this,De),e),this}recordOperation(t){return l(this,ce).recordOperation(l(this,De),!0),this}recordShowTextOperation(t){return l(this,ce).recordShowTextOperation(l(this,De),!0),this}bboxToClipBoxDropOperation(t){return l(this,Rs)||l(this,ce).bboxToClipBoxDropOperation(l(this,De),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ce=new WeakMap,De=new WeakMap,Rs=new WeakMap,Ah=new WeakMap,bh=new WeakMap;let A0=Eb;const Zi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Cn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Rx(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),r.clip(i)}class gb{isModifyingCurrentTransform(){return!1}getPattern(){Yt("Abstract method `getPattern` called.")}}class D3 extends gb{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,i=this._p0,a=this._p1;if(e&&(i=i.slice(),a=a.slice(),rt.applyTransform(i,e),rt.applyTransform(a,e)),this._type==="axial")n=t.createLinearGradient(i[0],i[1],a[0],a[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(e){const d=new Float32Array(2);rt.singularValueDecompose2dScale(e,d),c*=d[0],u*=d[0]}n=t.createRadialGradient(i[0],i[1],c,a[0],a[1],u)}for(const c of this._colorStops)n.addColorStop(c[0],c[1]);return n}getPattern(t,e,n,i){let a;if(i===Cn.STROKE||i===Cn.FILL){if(this.isOriginBased()){let y=rt.transform(n,e.baseTransform);this.matrix&&(y=rt.transform(y,this.matrix));const w=.001,S=Math.hypot(y[0],y[1]),E=Math.hypot(y[2],y[3]),C=(y[0]*y[2]+y[1]*y[3])/(S*E);if(Math.abs(C)<w)if(this.isRadial()){if(Math.abs(S-E)<w)return this._createGradient(t,y)}else return this._createGradient(t,y)}const c=e.current.getClippedPathBoundingBox(i,ke(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),n=rt.transform(n,[1,0,0,1,c[0],c[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Rx(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else Rx(t,this._bbox),a=this._createGradient(t);return a}}function P1(r,t,e,n,i,a,c,u){const d=t.coords,f=t.colors,p=r.data,g=r.width*4;let y;d[e+1]>d[n+1]&&(y=e,e=n,n=y,y=a,a=c,c=y),d[n+1]>d[i+1]&&(y=n,n=i,i=y,y=c,c=u,u=y),d[e+1]>d[n+1]&&(y=e,e=n,n=y,y=a,a=c,c=y);const w=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,E=(d[n]+t.offsetX)*t.scaleX,C=(d[n+1]+t.offsetY)*t.scaleY,k=(d[i]+t.offsetX)*t.scaleX,M=(d[i+1]+t.offsetY)*t.scaleY;if(S>=M)return;const _=f[a],L=f[a+1],D=f[a+2],F=f[c],j=f[c+1],U=f[c+2],G=f[u],q=f[u+1],J=f[u+2],vt=Math.round(S),wt=Math.round(M);let yt,At,ot,tt,X,st,et,B;for(let W=vt;W<=wt;W++){if(W<C){const kt=W<S?0:(S-W)/(S-C);yt=w-(w-E)*kt,At=_-(_-F)*kt,ot=L-(L-j)*kt,tt=D-(D-U)*kt}else{let kt;W>M?kt=1:C===M?kt=0:kt=(C-W)/(C-M),yt=E-(E-k)*kt,At=F-(F-G)*kt,ot=j-(j-q)*kt,tt=U-(U-J)*kt}let ut;W<S?ut=0:W>M?ut=1:ut=(S-W)/(S-M),X=w-(w-k)*ut,st=_-(_-G)*ut,et=L-(L-q)*ut,B=D-(D-J)*ut;const Ct=Math.round(Math.min(yt,X)),xt=Math.round(Math.max(yt,X));let Tt=g*W+Ct*4;for(let kt=Ct;kt<=xt;kt++)ut=(yt-kt)/(yt-X),ut<0?ut=0:ut>1&&(ut=1),p[Tt++]=At-(At-st)*ut|0,p[Tt++]=ot-(ot-et)*ut|0,p[Tt++]=tt-(tt-B)*ut|0,p[Tt++]=255}}function L3(r,t,e){const n=t.coords,i=t.colors;let a,c;switch(t.type){case sx.LATTICE:const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(a=0;a<d;a++){let p=a*u;for(let g=0;g<f;g++,p++)P1(r,e,n[p],n[p+1],n[p+u],i[p],i[p+1],i[p+u]),P1(r,e,n[p+u+1],n[p+1],n[p+u],i[p+u+1],i[p+1],i[p+u])}break;case sx.TRIANGLES:for(a=0,c=n.length;a<c;a+=3)P1(r,e,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class R3 extends gb{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),w=f/g,S=p/y,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/w,scaleY:1/S},C=g+4,k=y+4,M=n.getCanvas("mesh",C,k),_=M.context,L=_.createImageData(g,y);if(e){const F=L.data;for(let j=0,U=F.length;j<U;j+=4)F[j]=e[0],F[j+1]=e[1],F[j+2]=e[2],F[j+3]=255}for(const F of this._figures)L3(L,F,E);return _.putImageData(L,2,2),{canvas:M.canvas,offsetX:u-2*w,offsetY:d-2*S,scaleX:w,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){Rx(t,this._bbox);const a=new Float32Array(2);if(i===Cn.SHADING)rt.singularValueDecompose2dScale(ke(t),a);else if(this.matrix){rt.singularValueDecompose2dScale(this.matrix,a);const[u,d]=a;rt.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=u,a[1]*=d}else rt.singularValueDecompose2dScale(e.baseTransform,a);const c=this._createMeshCanvas(a,i===Cn.SHADING?null:this._background,e.cachedCanvases);return i!==Cn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class F3 extends gb{getPattern(){return"hotpink"}}function I3(r){switch(r[0]){case"RadialAxial":return new D3(r);case"Mesh":return new R3(r);case"Dummy":return new F3}throw new Error(`Unknown IR type: ${r[0]}`)}const uk={COLORED:1,UNCOLORED:2},N0=class N0{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){var st,et;const{bbox:n,operatorList:i,paintType:a,tilingType:c,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),tv("TilingType: "+c);const g=n[0],y=n[1],w=n[2],S=n[3],E=w-g,C=S-y,k=new Float32Array(2);rt.singularValueDecompose2dScale(this.matrix,k);const[M,_]=k;rt.singularValueDecompose2dScale(this.baseTransform,k);const L=M*k[0],D=_*k[1];let F=E,j=C,U=!1,G=!1;const q=Math.ceil(f*L),J=Math.ceil(p*D),vt=Math.ceil(E*L),wt=Math.ceil(C*D);q>=vt?F=f:U=!0,J>=wt?j=p:G=!0;const yt=this.getSizeAndScale(F,this.ctx.canvas.width,L),At=this.getSizeAndScale(j,this.ctx.canvas.height,D),ot=t.cachedCanvases.getCanvas("pattern",yt.size,At.size),tt=ot.context,X=d.createCanvasGraphics(tt,e);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,a,u),tt.translate(-yt.scale*g,-At.scale*y),X.transform(0,yt.scale,0,0,At.scale,0,0),tt.save(),(st=X.dependencyTracker)==null||st.save(),this.clipBbox(X,g,y,w,S),X.baseTransform=ke(X.ctx),X.executeOperatorList(i),X.endDrawing(),(et=X.dependencyTracker)==null||et.restore(),tt.restore(),U||G){const B=ot.canvas;U&&(F=f),G&&(j=p);const W=this.getSizeAndScale(F,this.ctx.canvas.width,L),ut=this.getSizeAndScale(j,this.ctx.canvas.height,D),Ct=W.size,xt=ut.size,Tt=t.cachedCanvases.getCanvas("pattern-workaround",Ct,xt),kt=Tt.context,zt=U?Math.floor(E/f):0,ee=G?Math.floor(C/p):0;for(let Ye=0;Ye<=zt;Ye++)for(let $i=0;$i<=ee;$i++)kt.drawImage(B,Ct*Ye,xt*$i,Ct,xt,0,0,Ct,xt);return{canvas:Tt.canvas,scaleX:W.scale,scaleY:ut.scale,offsetX:g,offsetY:y}}return{canvas:ot.canvas,scaleX:yt.scale,scaleY:At.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,n){const i=Math.max(N0.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=i?a=i:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,i,a){const c=i-e,u=a-n;t.ctx.rect(e,n,c,u),rt.axialAlignedBoundingBox([e,n,i,a],ke(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,a=t.current;switch(e){case uk.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;i.fillStyle=a.fillColor=c,i.strokeStyle=a.strokeColor=u;break;case uk.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new XB(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,a){let c=n;i!==Cn.SHADING&&(c=rt.transform(c,e.baseTransform),this.matrix&&(c=rt.transform(c,this.matrix)));const u=this.createPatternCanvas(e,a);let d=new DOMMatrix(c);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}};$(N0,"MAX_PATTERN_SIZE",3e3);let Fx=N0;function N3({src:r,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:c=!1}){const u=sn.isLittleEndian?4278190080:255,[d,f]=c?[a,u]:[u,a],p=n>>3,g=n&7,y=r.length;e=new Uint32Array(e.buffer);let w=0;for(let S=0;S<i;S++){for(const C=t+p;t<C;t++){const k=t<y?r[t]:255;e[w++]=k&128?f:d,e[w++]=k&64?f:d,e[w++]=k&32?f:d,e[w++]=k&16?f:d,e[w++]=k&8?f:d,e[w++]=k&4?f:d,e[w++]=k&2?f:d,e[w++]=k&1?f:d}if(g===0)continue;const E=t<y?r[t++]:255;for(let C=0;C<g;C++)e[w++]=E&1<<7-C?f:d}return{srcPos:t,destPos:w}}const hk=16,dk=100,O3=15,fk=10,pi=16,_1=new DOMMatrix,Vi=new Float32Array(2),Ru=new Float32Array([1/0,1/0,-1/0,-1/0]);function B3(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},r.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},r.transform=function(e,n,i,a,c,u){t.transform(e,n,i,a,c,u),this.__originalTransform(e,n,i,a,c,u)},r.setTransform=function(e,n,i,a,c,u){t.setTransform(e,n,i,a,c,u),this.__originalSetTransform(e,n,i,a,c,u)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,i,a,c,u){t.bezierCurveTo(e,n,i,a,c,u),this.__originalBezierCurveTo(e,n,i,a,c,u)},r.rect=function(e,n,i,a){t.rect(e,n,i,a),this.__originalRect(e,n,i,a)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class j3{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function gy(r,t,e,n,i,a,c,u,d,f){const[p,g,y,w,S,E]=ke(r);if(g===0&&y===0){const M=c*p+S,_=Math.round(M),L=u*w+E,D=Math.round(L),F=(c+d)*p+S,j=Math.abs(Math.round(F)-_)||1,U=(u+f)*w+E,G=Math.abs(Math.round(U)-D)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(w),_,D),r.drawImage(t,e,n,i,a,0,0,j,G),r.setTransform(p,g,y,w,S,E),[j,G]}if(p===0&&w===0){const M=u*y+S,_=Math.round(M),L=c*g+E,D=Math.round(L),F=(u+f)*y+S,j=Math.abs(Math.round(F)-_)||1,U=(c+d)*g+E,G=Math.abs(Math.round(U)-D)||1;return r.setTransform(0,Math.sign(g),Math.sign(y),0,_,D),r.drawImage(t,e,n,i,a,0,0,G,j),r.setTransform(p,g,y,w,S,E),[G,j]}r.drawImage(t,e,n,i,a,c,u,d,f);const C=Math.hypot(p,g),k=Math.hypot(y,w);return[C*d,k*f]}class pk{constructor(t,e,n){$(this,"alphaIsShape",!1);$(this,"fontSize",0);$(this,"fontSizeScale",1);$(this,"textMatrix",null);$(this,"textMatrixScale",1);$(this,"fontMatrix",ix);$(this,"leading",0);$(this,"x",0);$(this,"y",0);$(this,"lineX",0);$(this,"lineY",0);$(this,"charSpacing",0);$(this,"wordSpacing",0);$(this,"textHScale",1);$(this,"textRenderingMode",Ze.FILL);$(this,"textRise",0);$(this,"fillColor","#000000");$(this,"strokeColor","#000000");$(this,"patternFill",!1);$(this,"patternStroke",!1);$(this,"fillAlpha",1);$(this,"strokeAlpha",1);$(this,"lineWidth",1);$(this,"activeSMask",null);$(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ru.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Cn.FILL,e=null){const n=this.minMax.slice();if(t===Cn.STROKE){e||Yt("Stroke bounding box must include transform."),rt.singularValueDecompose2dScale(e,Vi);const i=Vi[0]*this.lineWidth/2,a=Vi[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const t=rt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ru,0)}getClippedPathBoundingBox(t=Cn.FILL,e=null){return rt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function mk(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%pi,a=(e-i)/pi,c=i===0?a:a+1,u=r.createImageData(n,pi);let d=0,f;const p=t.data,g=u.data;let y,w,S,E;if(t.kind===Ty.GRAYSCALE_1BPP){const C=p.byteLength,k=new Uint32Array(g.buffer,0,g.byteLength>>2),M=k.length,_=n+7>>3,L=4294967295,D=sn.isLittleEndian?4278190080:255;for(y=0;y<c;y++){for(S=y<a?pi:i,f=0,w=0;w<S;w++){const F=C-d;let j=0;const U=F>_?n:F*8-7,G=U&-8;let q=0,J=0;for(;j<G;j+=8)J=p[d++],k[f++]=J&128?L:D,k[f++]=J&64?L:D,k[f++]=J&32?L:D,k[f++]=J&16?L:D,k[f++]=J&8?L:D,k[f++]=J&4?L:D,k[f++]=J&2?L:D,k[f++]=J&1?L:D;for(;j<U;j++)q===0&&(J=p[d++],q=128),k[f++]=J&q?L:D,q>>=1}for(;f<M;)k[f++]=0;r.putImageData(u,0,y*pi)}}else if(t.kind===Ty.RGBA_32BPP){for(w=0,E=n*pi*4,y=0;y<a;y++)g.set(p.subarray(d,d+E)),d+=E,r.putImageData(u,0,w),w+=pi;y<c&&(E=n*i*4,g.set(p.subarray(d,d+E)),r.putImageData(u,0,w))}else if(t.kind===Ty.RGB_24BPP)for(S=pi,E=n*S,y=0;y<c;y++){for(y>=a&&(S=i,E=n*S),f=0,w=E;w--;)g[f++]=p[d++],g[f++]=p[d++],g[f++]=p[d++],g[f++]=255;r.putImageData(u,0,y*pi)}else throw new Error(`bad image kind: ${t.kind}`)}function gk(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%pi,a=(e-i)/pi,c=i===0?a:a+1,u=r.createImageData(n,pi);let d=0;const f=t.data,p=u.data;for(let g=0;g<c;g++){const y=g<a?pi:i;({srcPos:d}=N3({src:f,srcPos:d,dest:p,width:n,height:y,nonBlackColor:0})),r.putImageData(u,0,g*pi)}}function lf(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function yy(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function yk(r,t){if(t)return!0;rt.singularValueDecompose2dScale(r,Vi);const e=Math.fround(Cr.pixelRatio*Za.PDF_TO_CSS_UNITS);return Vi[0]<=e&&Vi[1]<=e}const V3=["butt","round","square"],z3=["miter","round","bevel"],U3={},vk={};var $s,Ix,Nx,Ox;const Cb=class Cb{constructor(t,e,n,i,a,{optionalContentConfig:c,markedContentStack:u=null},d,f,p){b(this,$s);this.ctx=t,this.current=new pk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new j3(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){var i;return typeof e=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,c),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",a,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ke(this.compositeCtx))}this.ctx.save(),yy(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ke(this.ctx)}executeOperatorList(t,e,n,i,a){var k;const c=t.argsArray,u=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const p=f-d>fk&&typeof n=="function",g=p?Date.now()+O3:0;let y=0;const w=this.commonObjs,S=this.objs;let E,C;for(;;){if(i!==void 0&&d===i.nextBreakPoint)return i.breakIt(d,n),d;if(!a||a(d))if(E=u[d],C=c[d]??null,E!==$f.dependency)C===null?this[E](d):this[E](d,...C);else for(const M of C){(k=this.dependencyTracker)==null||k.recordNamedData(M,d);const _=M.startsWith("g_")?w:S;if(!_.has(M))return _.get(M,n),d}if(d++,d===f)return d;if(p&&++y>fk){if(Date.now()>g)return n(),d;y=0}}}endDrawing(){T(this,$s,Ix).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),T(this,$s,Nx).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=n,d=i,f="prescale1",p,g;for(;a>2&&u>1||c>2&&d>1;){let y=u,w=d;a>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/y),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),p=this.cachedCanvases.getCanvas(f,y,w),g=p.context,g.clearRect(0,0,y,w),g.drawImage(t,0,0,u,d,0,0,y,w),t=p.canvas,u=y,d=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){var q,J;const n=this.ctx,{width:i,height:a}=e,c=this.current.fillColor,u=this.current.patternFill,d=ke(n);let f,p,g,y;if((e.bitmap||e.data)&&e.count>1){const vt=e.bitmap||e.data.buffer;p=JSON.stringify(u?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(vt),f||(f=new Map,this._cachedBitmapsMap.set(vt,f));const wt=f.get(p);if(wt&&!u){const yt=Math.round(Math.min(d[0],d[2])+d[4]),At=Math.round(Math.min(d[1],d[3])+d[5]);return(q=this.dependencyTracker)==null||q.recordDependencies(t,Zi.transformAndFill),{canvas:wt,offsetX:yt,offsetY:At}}g=wt}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,a),gk(y.context,e));let w=rt.transform(d,[1/i,0,0,-1/a,0,0]);w=rt.transform(w,[1,0,0,1,0,-a]);const S=Ru.slice();rt.axialAlignedBoundingBox([0,0,i,a],w,S);const[E,C,k,M]=S,_=Math.round(k-E)||1,L=Math.round(M-C)||1,D=this.cachedCanvases.getCanvas("fillCanvas",_,L),F=D.context,j=E,U=C;F.translate(-j,-U),F.transform(...w),g||(g=this._scaleImage(y.canvas,qs(F)),g=g.img,f&&u&&f.set(p,g)),F.imageSmoothingEnabled=yk(ke(F),e.interpolate),gy(F,g,0,0,g.width,g.height,0,0,i,a),F.globalCompositeOperation="source-in";const G=rt.transform(qs(F),[1,0,0,1,-j,-U]);return F.fillStyle=u?c.getPattern(n,this,G,Cn.FILL,t):c,F.fillRect(0,0,i,a),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),(J=this.dependencyTracker)==null||J.recordDependencies(t,Zi.transformAndFill),{canvas:D.canvas,offsetX:Math.round(j),offsetY:Math.round(U)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=V3[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=z3[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,i,a,c,u;for(const[d,f]of e)switch(d){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(c=this.dependencyTracker)==null||c.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(u=this.dependencyTracker)==null||u.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const c=this.ctx=a.context;c.setTransform(this.suspendedCtx.getTransform()),lf(this.suspendedCtx,c),B3(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const a=i[0],c=i[1],u=i[2]-a,d=i[3]-c;u===0||d===0||(this.genericComposeSMask(e.context,n,u,d,e.subtype,e.backdrop,e.transferMap,a,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,a,c,u,d,f,p,g){let y=t.canvas,w=d-p,S=f-g;if(c)if(w<0||S<0||w+n>y.width||S+i>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,i),k=C.context;k.drawImage(y,-w,-S),k.globalCompositeOperation="destination-atop",k.fillStyle=c,k.fillRect(0,0,n,i),k.globalCompositeOperation="source-over",y=C.canvas,w=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(w,S,n,i),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(w,S,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(d,f,n,i),e.clip(E),e.globalCompositeOperation="destination-in",e.drawImage(y,w,S,n,i,d,f,n,i),e.restore()}save(t){var n;this.inSMaskMode&&lf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,a,c,u){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,a,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[a]=n;if(!i){a||(a=n[0]=new Path2D),this[e](t,a);return}if(this.dependencyTracker!==null){const c=e===$f.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-c,i[2]+c,i[1]-c,i[3]+c).recordDependencies(t,["transform"])}a instanceof Path2D||(a=n[0]=w_(a)),rt.axialAlignedBoundingBox(i,ke(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var c;const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const u=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,qs(i),Cn.STROKE,t),u){const d=new Path2D;d.addPath(e,i.getTransform().invertSelf().multiplySelf(u)),e=d}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);(c=this.dependencyTracker)==null||c.recordDependencies(t,Zi.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Cn.STROKE,ke(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,p,g;const i=this.ctx,a=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const y=a.isModifyingCurrentTransform()?i.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),i.save(),i.fillStyle=a.getPattern(i,this,qs(i),Cn.FILL,t),y){const w=new Path2D;w.addPath(e,i.getTransform().invertSelf().multiplySelf(y)),e=w}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),(p=this.dependencyTracker)==null||p.recordDependencies(t,Zi.fill),u&&(i.restore(),(g=this.dependencyTracker)==null||g.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,Zi.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=U3}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=vk}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:c,x:u,y:d,fontSize:f,path:p}of e)p&&i.addPath(p,new DOMMatrix(c).preMultiplySelf(a).translate(u,d).scale(f,-f));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var g,y;(g=this.dependencyTracker)==null||g.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),a=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=i.fontMatrix||ix,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+e),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const c=i.loadedName||"sans-serif",u=((y=i.systemFontInfo)==null?void 0:y.css)||`"${c}", ${i.fallbackName}`;let d="normal";i.black?d="900":i.bold&&(d="bold");const f=i.italic?"italic":"normal";let p=n;n<hk?p=hk:n>dk&&(p=dk),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${d} ${p}px ${u}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,i,a,c){var k,M,_,L;const u=this.ctx,d=this.current,f=d.font,p=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,y=p&Ze.FILL_STROKE_MASK,w=!!(p&Ze.ADD_TO_PATH_FLAG),S=d.patternFill&&!f.missingFile,E=d.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||w||S||E)&&!f.missingFile&&(C=f.getPathGenerator(this.commonObjs,e)),C&&(f.disableFontFace||S||E)){u.save(),u.translate(n,i),u.scale(g,-g),(k=this.dependencyTracker)==null||k.recordCharacterBBox(t,u,f);let D;if(y===Ze.FILL||y===Ze.FILL_STROKE)if(a){D=u.getTransform(),u.setTransform(...a);const F=T(this,$s,Ox).call(this,C,D,a);u.fill(F)}else u.fill(C);if(y===Ze.STROKE||y===Ze.FILL_STROKE)if(c){D||(D=u.getTransform()),u.setTransform(...c);const{a:F,b:j,c:U,d:G}=D,q=rt.inverseTransform(c),J=rt.transform([F,j,U,G,0,0],q);rt.singularValueDecompose2dScale(J,Vi),u.lineWidth*=Math.max(Vi[0],Vi[1])/g,u.stroke(T(this,$s,Ox).call(this,C,D,c))}else u.lineWidth/=g,u.stroke(C);u.restore()}else(y===Ze.FILL||y===Ze.FILL_STROKE)&&(u.fillText(e,n,i),(M=this.dependencyTracker)==null||M.recordCharacterBBox(t,u,f,g,n,i,()=>u.measureText(e))),(y===Ze.STROKE||y===Ze.FILL_STROKE)&&(this.dependencyTracker&&((_=this.dependencyTracker)==null||_.recordCharacterBBox(t,u,f,g,n,i,()=>u.measureText(e)).recordDependencies(t,Zi.stroke)),u.strokeText(e,n,i));w&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ke(u),x:n,y:i,fontSize:g,path:C}),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,u,f,g,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Mt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var J,vt,wt,yt;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Zi.showText).resetBBox(t),this.current.textRenderingMode&Ze.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(t,e),(J=this.dependencyTracker)==null||J.recordShowTextOperation(t);return}const a=n.fontSize;if(a===0){(vt=this.dependencyTracker)==null||vt.recordOperation(t);return}const c=this.ctx,u=n.fontSizeScale,d=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,g=n.textHScale*p,y=e.length,w=i.vertical,S=w?1:-1,E=i.defaultVMetrics,C=a*n.fontMatrix[0],k=n.textRenderingMode===Ze.FILL&&!i.disableFontFace&&!n.patternFill;c.save(),n.textMatrix&&c.transform(...n.textMatrix),c.translate(n.x,n.y+n.textRise),p>0?c.scale(g,-1):c.scale(g,1);let M,_;const L=n.textRenderingMode&Ze.FILL_STROKE_MASK,D=L===Ze.FILL||L===Ze.FILL_STROKE,F=L===Ze.STROKE||L===Ze.FILL_STROKE;if(D&&n.patternFill){c.save();const At=n.fillColor.getPattern(c,this,qs(c),Cn.FILL,t);M=ke(c),c.restore(),c.fillStyle=At}if(F&&n.patternStroke){c.save();const At=n.strokeColor.getPattern(c,this,qs(c),Cn.STROKE,t);_=ke(c),c.restore(),c.strokeStyle=At}let j=n.lineWidth;const U=n.textMatrixScale;if(U===0||j===0?F&&(j=this.getSinglePixelWidth()):j/=U,u!==1&&(c.scale(u,u),j/=u),c.lineWidth=j,i.isInvalidPDFjsFont){const At=[];let ot=0;for(const X of e)At.push(X.unicode),ot+=X.width;const tt=At.join("");if(c.fillText(tt,0,0),this.dependencyTracker!==null){const X=c.measureText(tt);this.dependencyTracker.recordBBox(t,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=ot*C*g,c.restore(),this.compose();return}let G=0,q;for(q=0;q<y;++q){const At=e[q];if(typeof At=="number"){G+=S*At*a/1e3;continue}let ot=!1;const tt=(At.isSpace?f:0)+d,X=At.fontChar,st=At.accent;let et,B,W=At.width;if(w){const xt=At.vmetric||E,Tt=-(At.vmetric?xt[1]:W*.5)*C,kt=xt[2]*C;W=xt?-xt[0]:W,et=Tt/u,B=(G+kt)/u}else et=G/u,B=0;let ut;if(i.remeasure&&W>0){ut=c.measureText(X);const xt=ut.width*1e3/a*u;if(W<xt&&this.isFontSubpixelAAEnabled){const Tt=W/xt;ot=!0,c.save(),c.scale(Tt,1),et/=Tt}else W!==xt&&(et+=(W-xt)/2e3*a/u)}if(this.contentVisible&&(At.isInFont||i.missingFile)){if(k&&!st)c.fillText(X,et,B),(wt=this.dependencyTracker)==null||wt.recordCharacterBBox(t,c,ut?{bbox:null}:i,a/u,et,B,()=>ut??c.measureText(X));else if(this.paintChar(t,X,et,B,M,_),st){const xt=et+a*st.offset.x/u,Tt=B-a*st.offset.y/u;this.paintChar(t,st.fontChar,xt,Tt,M,_)}}const Ct=w?W*C-tt*p:W*C+tt*p;G+=Ct,ot&&c.restore()}w?n.y-=G:n.x+=G*g,c.restore(),this.compose(),(yt=this.dependencyTracker)==null||yt.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,a=i.font,c=i.fontSize,u=i.fontDirection,d=a.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,g=i.textHScale*u,y=i.fontMatrix||ix,w=e.length,S=i.textRenderingMode===Ze.INVISIBLE;let E,C,k,M;if(S||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(g,u);const _=this.dependencyTracker;for(this.dependencyTracker=_?new A0(_,t):null,E=0;E<w;++E){if(C=e[E],typeof C=="number"){M=d*C*c/1e3,this.ctx.translate(M,0),i.x+=M*g;continue}const L=(C.isSpace?p:0)+f,D=a.charProcOperatorList[C.operatorListId];D?this.contentVisible&&(this.save(),n.scale(c,c),n.transform(...y),this.executeOperatorList(D),this.restore()):_t(`Type3 character "${C.operatorListId}" is not available.`);const F=[C.width,0];rt.applyTransform(F,y),k=F[0]*c+L,n.translate(k,0),i.x+=k*g}n.restore(),_&&(this.dependencyTracker=_)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,a,c,u){var f;const d=new Path2D;d.rect(i,a,c-i,u-a),this.ctx.clip(d),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,i,c,a,u).recordClipBox(t,this.ctx,i,c,a,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const i=this.baseTransform||ke(this.ctx),a={createCanvasGraphics:(c,u)=>new Cb(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new A0(this.dependencyTracker,u,!0):null)};n=new Fx(e,this.ctx,a,i)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=I3(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){var c;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,qs(n),Cn.SHADING,t);const a=qs(n);if(a){const{width:u,height:d}=n.canvas,f=Ru.slice();rt.axialAlignedBoundingBox([0,0,u,d],a,f);const[p,g,y,w]=f;this.ctx.fillRect(p,g,y-p,w-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(c=this.dependencyTracker)==null||c.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Zi.transform).recordDependencies(t,Zi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Yt("Should not call beginInlineImage")}beginImageData(){Yt("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var i;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ke(this.ctx),n)){rt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,c,u,d]=n,f=new Path2D;f.rect(a,c,u-a,d-c),this.ctx.clip(f),(i=this.dependencyTracker)==null||i.recordClipBox(t,this.ctx,a,u,c,d),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var _;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||tv("TODO: Support non-isolated groups."),e.knockout&&_t("Knockout groups not supported.");const i=ke(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=Ru.slice();rt.axialAlignedBoundingBox(e.bbox,ke(n),a);const c=[0,0,n.canvas.width,n.canvas.height];a=rt.intersect(a,c)||[0,0,0,0];const u=Math.floor(a[0]),d=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-u,1),p=Math.max(Math.ceil(a[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,f,p),w=y.context;w.translate(-u,-d),w.transform(...i);let S=new Path2D;const[E,C,k,M]=e.bbox;if(S.rect(E,C,k-E,M-C),e.matrix){const L=new Path2D;L.addPath(S,new DOMMatrix(e.matrix)),S=L}w.clip(S),e.smask&&this.smaskStack.push({canvas:y.canvas,context:w,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,d),n.save()),lf(n,w),this.ctx=w,(_=this.dependencyTracker)==null||_.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var a;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const c=ke(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...c);const u=Ru.slice();rt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],c,u),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(t,e,n,i,a,c){if(T(this,$s,Ix).call(this),yy(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],d=n[3]-n[1];if(c&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=d,rt.singularValueDecompose2dScale(ke(this.ctx),Vi);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),g=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(Vi[0],0,0,-Vi[1],0,d*Vi[1]),yy(this.ctx)}else{yy(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,d),this.ctx.clip(f)}}this.current=new pk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),T(this,$s,Nx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var u;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const i=this.ctx,a=this._createMaskCanvas(t,e),c=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,a.offsetX,a.offsetY),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+c.width,a.offsetY,a.offsetY+c.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,a=0,c,u){var g,y,w;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=ke(d);d.transform(n,i,a,c,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),(g=this.dependencyTracker)==null||g.resetBBox(t);for(let S=0,E=u.length;S<E;S+=2){const C=rt.transform(f,[n,i,a,c,u[S],u[S+1]]);d.drawImage(p.canvas,C[4],C[5]),(y=this.dependencyTracker)==null||y.recordBBox(t,this.ctx,C[4],C[4]+p.canvas.width,C[5],C[5]+p.canvas.height)}d.restore(),this.compose(),(w=this.dependencyTracker)==null||w.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var c,u,d;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;(c=this.dependencyTracker)==null||c.resetBBox(t).recordDependencies(t,Zi.transformAndFill);for(const f of e){const{data:p,width:g,height:y,transform:w}=f,S=this.cachedCanvases.getCanvas("maskCanvas",g,y),E=S.context;E.save();const C=this.getObject(t,p,f);gk(E,C),E.globalCompositeOperation="source-in",E.fillStyle=a?i.getPattern(E,this,qs(n),Cn.FILL,t):i,E.fillRect(0,0,g,y),E.restore(),n.save(),n.transform(...w),n.scale(1,-1),gy(n,S.canvas,0,0,g,y,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,n,0,g,0,y),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,a){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){_t("Dependent image isn't ready yet");return}const u=c.width,d=c.height,f=[];for(let p=0,g=a.length;p<g;p+=2)f.push({transform:[n,0,0,i,a[p],a[p+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,i),c=a.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",a.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,i=e.height,a=this.ctx;this.save(t);const{filter:c}=a;c!=="none"&&c!==""&&(a.filter="none"),a.scale(1/n,-1/i);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,i).context;mk(g,e),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,qs(a));a.imageSmoothingEnabled=yk(ke(a),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,a,0,n,-i,0).recordDependencies(t,Zi.imageXObject).recordOperation(t),gy(a,d.img,0,0,d.paintWidth,d.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var c,u,d;if(!this.contentVisible)return;const i=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const f=e.width,p=e.height,y=this.cachedCanvases.getCanvas("inlineImage",f,p).context;mk(y,e),a=this.applyTransferMapsToCanvas(y)}(c=this.dependencyTracker)==null||c.resetBBox(t);for(const f of n)i.save(),i.transform(...f.transform),i.scale(1,-1),gy(i,a,f.x,f.y,f.w,f.h,0,-1,1,1),(u=this.dependencyTracker)==null||u.recordBBox(t,i,0,1,-1,0),i.restore();(d=this.dependencyTracker)==null||d.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Zi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var c,u;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===vk?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,(c=this.dependencyTracker)==null||c.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(u=this.dependencyTracker)==null||u.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ke(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:a}=this.ctx.getTransform();let c,u;if(n===0&&i===0){const d=Math.abs(e),f=Math.abs(a);if(d===f)if(t===0)c=u=1/d;else{const p=d*t;c=u=p<1?1/p:1}else if(t===0)c=1/d,u=1/f;else{const p=d*t,g=f*t;c=p<1?1/p:1,u=g<1?1/g:1}}else{const d=Math.abs(e*a-n*i),f=Math.hypot(e,n),p=Math.hypot(i,a);if(t===0)c=p/d,u=f/d;else{const g=t*d;c=p>g?p/g:1,u=f>g?f/g:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[a,c]=this.getScaleForStroking();if(a===c){n.lineWidth=(i||1)*a,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(a,c),_1.a=1/a,_1.d=1/c;const d=new Path2D;if(d.addPath(t,_1),u.length>0){const f=Math.max(a,c);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=i||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};$s=new WeakSet,Ix=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Nx=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Ox=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let ju=Cb;for(const r in $f)ju.prototype[r]!==void 0&&(ju.prototype[$f[r]]=ju.prototype[r]);var Np,Op;class br{static get workerPort(){return l(this,Np)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,Np,t)}static get workerSrc(){return l(this,Op)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,Op,t)}}Np=new WeakMap,Op=new WeakMap,b(br,Np,null),b(br,Op,"");var Sh,Bp;class H3{constructor({parsedData:t,rawData:e}){b(this,Sh);b(this,Bp);x(this,Sh,t),x(this,Bp,e)}getRaw(){return l(this,Bp)}get(t){return l(this,Sh).get(t)??null}[Symbol.iterator](){return l(this,Sh).entries()}}Sh=new WeakMap,Bp=new WeakMap;const Eu=Symbol("INTERNAL");var jp,Vp,zp,Eh;class $3{constructor(t,{name:e,intent:n,usage:i,rbGroups:a}){b(this,jp,!1);b(this,Vp,!1);b(this,zp,!1);b(this,Eh,!0);x(this,jp,!!(t&ji.DISPLAY)),x(this,Vp,!!(t&ji.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(l(this,zp))return l(this,Eh);if(!l(this,Eh))return!1;const{print:t,view:e}=this.usage;return l(this,jp)?(e==null?void 0:e.viewState)!=="OFF":l(this,Vp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Eu&&Yt("Internal method `_setVisible` called."),x(this,zp,n),x(this,Eh,e)}}jp=new WeakMap,Vp=new WeakMap,zp=new WeakMap,Eh=new WeakMap;var Ca,oe,Ch,Th,Up,Bx;class W3{constructor(t,e=ji.DISPLAY){b(this,Up);b(this,Ca,null);b(this,oe,new Map);b(this,Ch,null);b(this,Th,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,Th,t.order);for(const n of t.groups)l(this,oe).set(n.id,new $3(e,n));if(t.baseState==="OFF")for(const n of l(this,oe).values())n._setVisible(Eu,!1);for(const n of t.on)l(this,oe).get(n)._setVisible(Eu,!0);for(const n of t.off)l(this,oe).get(n)._setVisible(Eu,!1);x(this,Ch,this.getHash())}}isVisible(t){if(l(this,oe).size===0)return!0;if(!t)return tv("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,oe).has(t.id)?l(this,oe).get(t.id).visible:(_t(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return T(this,Up,Bx).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,oe).has(e))return _t(`Optional content group not found: ${e}`),!0;if(l(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,oe).has(e))return _t(`Optional content group not found: ${e}`),!0;if(!l(this,oe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,oe).has(e))return _t(`Optional content group not found: ${e}`),!0;if(!l(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,oe).has(e))return _t(`Optional content group not found: ${e}`),!0;if(l(this,oe).get(e).visible)return!1}return!0}return _t(`Unknown optional content policy ${t.policy}.`),!0}return _t(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var a;const i=l(this,oe).get(t);if(!i){_t(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const c of i.rbGroups)for(const u of c)u!==t&&((a=l(this,oe).get(u))==null||a._setVisible(Eu,!1,!0));i._setVisible(Eu,!!e,!0),x(this,Ca,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=l(this,oe).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!a.visible,e);break}}x(this,Ca,null)}get hasInitialVisibility(){return l(this,Ch)===null||this.getHash()===l(this,Ch)}getOrder(){return l(this,oe).size?l(this,Th)?l(this,Th).slice():[...l(this,oe).keys()]:null}getGroup(t){return l(this,oe).get(t)||null}getHash(){if(l(this,Ca)!==null)return l(this,Ca);const t=new J_;for(const[e,n]of l(this,oe))t.update(`${e}:${n.visible}`);return x(this,Ca,t.hexdigest())}[Symbol.iterator](){return l(this,oe).entries()}}Ca=new WeakMap,oe=new WeakMap,Ch=new WeakMap,Th=new WeakMap,Up=new WeakSet,Bx=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const a=t[i];let c;if(Array.isArray(a))c=T(this,Up,Bx).call(this,a);else if(l(this,oe).has(a))c=l(this,oe).get(a).visible;else return _t(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};var Hp,$p;class iv{constructor(t,e,n){b(this,Hp,null);b(this,$p,null);$(this,"_fullReader",null);$(this,"_rangeReaders",new Set);$(this,"_source",null);this._source=t,x(this,Hp,e),x(this,$p,n)}get _progressiveDataLength(){var t;return((t=this._fullReader)==null?void 0:t._loaded)??0}getFullReader(){return Xt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(l(this,Hp))(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new(l(this,$p))(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){var e;(e=this._fullReader)==null||e.cancel(t);for(const n of new Set(this._rangeReaders))n.cancel(t)}}Hp=new WeakMap,$p=new WeakMap;class sv{constructor(t){$(this,"onProgress",null);$(this,"_contentLength",0);$(this,"_filename",null);$(this,"_headersCapability",Promise.withResolvers());$(this,"_isRangeSupported",!1);$(this,"_isStreamingSupported",!1);$(this,"_loaded",0);$(this,"_stream",null);this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){Yt("Abstract method `read` called")}cancel(t){Yt("Abstract method `cancel` called")}}class rv{constructor(t,e,n){$(this,"_stream",null);this._stream=t}async read(){Yt("Abstract method `read` called")}cancel(t){Yt("Abstract method `cancel` called")}}function wk(r){return r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}var Wp,jx;class G3 extends iv{constructor(e){super(e,X3,Y3);b(this,Wp);$(this,"_progressiveDone",!1);$(this,"_queuedChunks",[]);const{pdfDataRangeTransport:n}=e,{initialData:i,progressiveDone:a}=n;if((i==null?void 0:i.length)>0){const c=wk(i);this._queuedChunks.push(c)}this._progressiveDone=a,n.addRangeListener((c,u)=>{T(this,Wp,jx).call(this,c,u)}),n.addProgressListener((c,u)=>{var d,f;u!==void 0&&((f=(d=this._fullReader)==null?void 0:d.onProgress)==null||f.call(d,{loaded:c,total:u}))}),n.addProgressiveReadListener(c=>{T(this,Wp,jx).call(this,void 0,c)}),n.addProgressiveDoneListener(()=>{var c;(c=this._fullReader)==null||c.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,n){const i=super.getRangeReader(e,n);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(e,n)),i}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}Wp=new WeakSet,jx=function(e,n){const i=wk(n);if(e===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.keys().find(c=>c._begin===e);Xt(a,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),a._enqueue(i)}};class X3 extends sv{constructor(e){super(e);$(this,"_done",!1);$(this,"_queuedChunks",null);$(this,"_requests",[]);const{pdfDataRangeTransport:n,disableRange:i,disableStream:a}=e._source,{length:c,contentDispositionFilename:u}=n;this._queuedChunks=e._queuedChunks||[];for(const d of this._queuedChunks)this._loaded+=d.byteLength;this._done=e._progressiveDone,this._contentLength=c,this._isStreamingSupported=!a,this._isRangeSupported=!i,fb(u)&&(this._filename=u),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Y3 extends rv{constructor(e,n,i){super(e,n,i);$(this,"onDone",null);$(this,"_begin",-1);$(this,"_done",!1);$(this,"_queuedChunk",null);$(this,"_requests",[]);this._begin=n}_enqueue(e){var n;if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(n=this.onDone)==null||n.call(this)}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onDone)==null||n.call(this)}}function K3(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let p=u(e);return p=unescape(p),p=d(p),p=f(p),a(p)}if(e=c(r),e){const p=f(e);return a(p)}if(e=n("filename","i").exec(r),e){e=e[1];let p=u(e);return p=f(p),a(p)}function n(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const y=new TextDecoder(p,{fatal:!0}),w=ev(g);g=y.decode(w),t=!1}catch{}}return g}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=i("utf-8",p),t&&(p=i("iso-8859-1",p))),p}function c(p){const g=[];let y;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=w.exec(p))!==null;){let[,E,C,k]=y;if(E=parseInt(E,10),E in g){if(E===0)break;continue}g[E]=[C,k]}const S=[];for(let E=0;E<g.length&&E in g;++E){let[C,k]=g[E];k=u(k),C&&(k=unescape(k),E===0&&(k=d(k))),S.push(k)}return S.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let y=0;y<g.length;++y){const w=g[y].indexOf('"');w!==-1&&(g[y]=g[y].slice(0,w),g.length=y+1),g[y]=g[y].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function d(p){const g=p.indexOf("'");if(g===-1)return p;const y=p.slice(0,g),S=p.slice(g+1).replace(/^[^']*'/,"");return i(y,S)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,y,w,S){if(w==="q"||w==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,C){return String.fromCharCode(parseInt(C,16))}),i(y,S);try{S=atob(S)}catch{}return i(y,S)})}return""}function h2(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function ov(r){var t;return((t=URL.parse(r))==null?void 0:t.origin)??null}function d2({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(r.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function f2(r){const t=r.get("Content-Disposition");if(t){let e=K3(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(fb(e))return e}return null}function av(r,t){return new m0(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function p2(r,t){if(r!==t)throw new Error(`Expected range response-origin "${r}" to match "${t}".`)}function m2(r,t,e,n){return fetch(r,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function g2(r,t){if(r!==200&&r!==206)throw av(r,t)}function y2(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(_t(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class q3 extends iv{constructor(e){super(e,Q3,Z3);$(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(e.url),this.headers=h2(this.isHttp,e.httpHeaders)}}class Q3 extends sv{constructor(e){super(e);$(this,"_abortController",new AbortController);$(this,"_reader",null);const{disableRange:n,disableStream:i,length:a,rangeChunkSize:c,url:u,withCredentials:d}=e._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!n;const f=new Headers(e.headers);m2(u,f,d,this._abortController).then(p=>{e._responseOrigin=ov(p.url),g2(p.status,u),this._reader=p.body.getReader();const g=p.headers,{allowRangeRequests:y,suggestedLength:w}=d2({responseHeaders:g,isHttp:e.isHttp,rangeChunkSize:c,disableRange:n});this._isRangeSupported=y,this._contentLength=w||this._contentLength,this._filename=f2(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qa("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var i;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:y2(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class Z3 extends rv{constructor(e,n,i){super(e,n,i);$(this,"_abortController",new AbortController);$(this,"_readCapability",Promise.withResolvers());$(this,"_reader",null);const{url:a,withCredentials:c}=e._source,u=new Headers(e.headers);u.append("Range",`bytes=${n}-${i-1}`),m2(a,u,c,this._abortController).then(d=>{const f=ov(d.url);p2(f,e._responseOrigin),g2(d.status,a),this._reader=d.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:y2(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const M1=200,xk=206;function J3(r){return typeof r!="string"?r:ev(r).buffer}var dr,pd,v2,w2;class tj extends iv{constructor(e){super(e,ej,nj);b(this,pd);b(this,dr,new WeakMap);$(this,"_responseOrigin",null);this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=h2(this.isHttp,e.httpHeaders)}_request(e){const n=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};l(this,dr).set(n,i),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[a,c]of this.headers)n.setRequestHeader(a,c);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.validateStatus=a=>a===xk||a===M1):i.validateStatus=a=>a===M1,n.responseType="arraybuffer",Xt(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>e.onError(n.status),n.onreadystatechange=T(this,pd,w2).bind(this,n),n.onprogress=T(this,pd,v2).bind(this,n),n.send(null),n}_abortRequest(e){l(this,dr).has(e)&&(l(this,dr).delete(e),e.abort())}getRangeReader(e,n){const i=super.getRangeReader(e,n);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}dr=new WeakMap,pd=new WeakSet,v2=function(e,n){var a;const i=l(this,dr).get(e);(a=i==null?void 0:i.onProgress)==null||a.call(i,n)},w2=function(e,n){const i=l(this,dr).get(e);if(!i||(e.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),e.readyState!==4)||!l(this,dr).has(e))return;if(l(this,dr).delete(e),e.status===0&&this.isHttp){i.onError(e.status);return}const a=e.status||M1;if(!i.validateStatus(a)){i.onError(e.status);return}const c=J3(e.response);if(a===xk){const u=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(u)?i.onDone(c):(_t('Missing or invalid "Content-Range" header.'),i.onError(0))}else c?i.onDone(c):i.onError(e.status)};var Tr,x2,A2,b2,S2;class ej extends sv{constructor(e){super(e);b(this,Tr);$(this,"_cachedChunks",[]);$(this,"_done",!1);$(this,"_requests",[]);$(this,"_storedError",null);const{length:n}=e._source;this._contentLength=n,this._fullRequestXhr=e._request({onHeadersReceived:T(this,Tr,x2).bind(this),onDone:T(this,Tr,A2).bind(this),onError:T(this,Tr,b2).bind(this),onProgress:T(this,Tr,S2).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}Tr=new WeakSet,x2=function(){const e=this._stream,{disableRange:n,rangeChunkSize:i}=e._source,a=this._fullRequestXhr;e._responseOrigin=ov(a.responseURL);const c=a.getAllResponseHeaders(),u=new Headers(c?c.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(p=>{const[g,...y]=p.split(": ");return[g,y.join(": ")]}):[]),{allowRangeRequests:d,suggestedLength:f}=d2({responseHeaders:u,isHttp:e.isHttp,rangeChunkSize:i,disableRange:n});d&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=f2(u),this._isRangeSupported&&e._abortRequest(a),this._headersCapability.resolve()},A2=function(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}},b2=function(e){this._storedError=av(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},S2=function(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})};var Mo,E2,C2,Vx;class nj extends rv{constructor(e,n,i){super(e,n,i);b(this,Mo);$(this,"onClosed",null);$(this,"_done",!1);$(this,"_queuedChunk",null);$(this,"_requests",[]);$(this,"_storedError",null);this._requestXhr=e._request({begin:n,end:i,onHeadersReceived:T(this,Mo,E2).bind(this),onDone:T(this,Mo,C2).bind(this),onError:T(this,Mo,Vx).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){var n;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(n=this.onClosed)==null||n.call(this)}}Mo=new WeakSet,E2=function(){var n;const e=ov((n=this._requestXhr)==null?void 0:n.responseURL);try{p2(e,this._stream._responseOrigin)}catch(i){this._storedError=i,T(this,Mo,Vx).call(this,0)}},C2=function(e){var n;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,(n=this.onClosed)==null||n.call(this)},Vx=function(e){this._storedError??(this._storedError=av(e,this._stream.url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const ij=/^[a-z][a-z0-9\-+.]+:/i;function sj(r){if(ij.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}function T2(r){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(r):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(r)}function k2(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(_t(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class rj extends iv{constructor(t){super(t,oj,aj),this.url=sj(t.url),Xt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class oj extends sv{constructor(e){super(e);$(this,"_reader",null);const{disableRange:n,disableStream:i,length:a,rangeChunkSize:c}=e._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!n;const u=e.url,d=process.getBuiltinModule("fs");d.promises.lstat(u).then(f=>{const p=d.createReadStream(u),g=T2(p);this._reader=g.getReader();const{size:y}=f;y<=2*c&&(this._isRangeSupported=!1),this._contentLength=y,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qa("Streaming is disabled.")),this._headersCapability.resolve()}).catch(f=>{f.code==="ENOENT"&&(f=av(0,u.href)),this._headersCapability.reject(f)})}async read(){var i;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:k2(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}class aj extends rv{constructor(e,n,i){super(e,n,i);$(this,"_readCapability",Promise.withResolvers());$(this,"_reader",null);const a=e.url,c=process.getBuiltinModule("fs");try{const u=c.createReadStream(a,{start:n,end:i-1}),d=T2(u);this._reader=d.getReader(),this._readCapability.resolve()}catch(u){this._readCapability.reject(u)}}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:k2(e),done:!1}}cancel(e){var n;(n=this._reader)==null||n.cancel(e)}}const cf=Symbol("INITIAL_DATA");var Ei,Gp,zx;class P2{constructor(){b(this,Gp);b(this,Ei,Object.create(null))}get(t,e=null){if(e){const i=T(this,Gp,zx).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=l(this,Ei)[t];if(!n||n.data===cf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=l(this,Ei)[t];return!!e&&e.data!==cf}delete(t){const e=l(this,Ei)[t];return!e||e.data===cf?!1:(delete l(this,Ei)[t],!0)}resolve(t,e=null){const n=T(this,Gp,zx).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in l(this,Ei)){const{data:n}=l(this,Ei)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}x(this,Ei,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,Ei)){const{data:e}=l(this,Ei)[t];e!==cf&&(yield[t,e])}}}Ei=new WeakMap,Gp=new WeakSet,zx=function(t){var e;return(e=l(this,Ei))[t]||(e[t]={...Promise.withResolvers(),data:cf})};const lj=1e5,Ak=30;var Ek,Ta,ui,Xp,Yp,ec,ro,Kp,qp,nc,Qp,kh,ka,Ph,Zp,_h,ic,Jp,tm,Mh,sc,em,Dh,Lh,Do,_2,M2,Ux,Hi,Oy,Hx,D2,L2;const yn=class yn{constructor({textContentSource:t,container:e,viewport:n}){b(this,Do);b(this,Ta,Promise.withResolvers());b(this,ui,null);b(this,Xp,!1);b(this,Yp,!!((Ek=globalThis.FontInspector)!=null&&Ek.enabled));b(this,ec,null);b(this,ro,null);b(this,Kp,0);b(this,qp,0);b(this,nc,null);b(this,Qp,null);b(this,kh,0);b(this,ka,0);b(this,Ph,Object.create(null));b(this,Zp,[]);b(this,_h,null);b(this,ic,[]);b(this,Jp,new WeakMap);b(this,tm,null);var d;if(t instanceof ReadableStream)x(this,_h,t);else if(typeof t=="object")x(this,_h,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,ui,x(this,Qp,e)),x(this,ka,n.scale*Cr.pixelRatio),x(this,kh,n.rotation),x(this,ro,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:c,pageY:u}=n.rawDims;x(this,tm,[1,0,0,-1,-c,u+a]),x(this,qp,i),x(this,Kp,a),T(d=yn,Hi,D2).call(d),e.style.setProperty("--min-font-size",l(yn,Dh)),Vc(e,n),l(this,Ta).promise.finally(()=>{l(yn,Lh).delete(this),x(this,ro,null),x(this,Ph,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=sn.platform;return Mt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,nc).read().then(({value:e,done:n})=>{if(n){l(this,Ta).resolve();return}l(this,ec)??x(this,ec,e.lang),Object.assign(l(this,Ph),e.styles),T(this,Do,_2).call(this,e.items),t()},l(this,Ta).reject)};return x(this,nc,l(this,_h).getReader()),l(yn,Lh).add(this),t(),l(this,Ta).promise}update({viewport:t,onBefore:e=null}){var a;const n=t.scale*Cr.pixelRatio,i=t.rotation;if(i!==l(this,kh)&&(e==null||e(),x(this,kh,i),Vc(l(this,Qp),{rotation:i})),n!==l(this,ka)){e==null||e(),x(this,ka,n);const c={div:null,properties:null,ctx:T(a=yn,Hi,Oy).call(a,l(this,ec))};for(const u of l(this,ic))c.properties=l(this,Jp).get(u),c.div=u,T(this,Do,Ux).call(this,c)}}cancel(){var e;const t=new Qa("TextLayer task cancelled.");(e=l(this,nc))==null||e.cancel(t).catch(()=>{}),x(this,nc,null),l(this,Ta).reject(t)}get textDivs(){return l(this,ic)}get textContentItemsStr(){return l(this,Zp)}static cleanup(){if(!(l(this,Lh).size>0)){l(this,Mh).clear();for(const{canvas:t}of l(this,sc).values())t.remove();l(this,sc).clear()}}};Ta=new WeakMap,ui=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,ec=new WeakMap,ro=new WeakMap,Kp=new WeakMap,qp=new WeakMap,nc=new WeakMap,Qp=new WeakMap,kh=new WeakMap,ka=new WeakMap,Ph=new WeakMap,Zp=new WeakMap,_h=new WeakMap,ic=new WeakMap,Jp=new WeakMap,tm=new WeakMap,Mh=new WeakMap,sc=new WeakMap,em=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,Do=new WeakSet,_2=function(t){var i,a;if(l(this,Xp))return;(a=l(this,ro)).ctx??(a.ctx=T(i=yn,Hi,Oy).call(i,l(this,ec)));const e=l(this,ic),n=l(this,Zp);for(const c of t){if(e.length>lj){_t("Ignoring additional textDivs for performance reasons."),x(this,Xp,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=l(this,ui);x(this,ui,document.createElement("span")),l(this,ui).classList.add("markedContent"),c.id&&l(this,ui).setAttribute("id",`${c.id}`),c.tag==="Artifact"&&(l(this,ui).ariaHidden=!0),u.append(l(this,ui))}else c.type==="endMarkedContent"&&x(this,ui,l(this,ui).parentNode);continue}n.push(c.str),T(this,Do,M2).call(this,c)}},M2=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,ic).push(e);const i=rt.transform(l(this,tm),t.transform);let a=Math.atan2(i[1],i[0]);const c=l(this,Ph)[t.fontName];c.vertical&&(a+=Math.PI/2);let u=l(this,Yp)&&c.fontSubstitution||c.fontFamily;u=yn.fontFamilyMap.get(u)||u;const d=Math.hypot(i[2],i[3]),f=d*T(S=yn,Hi,L2).call(S,u,c,l(this,ec));let p,g;a===0?(p=i[4],g=i[5]-f):(p=i[4]+f*Math.sin(a),g=i[5]-f*Math.cos(a));const y=e.style;y.left=`${(100*p/l(this,qp)).toFixed(2)}%`,y.top=`${(100*g/l(this,Kp)).toFixed(2)}%`,y.setProperty("--font-height",`${d.toFixed(2)}px`),y.fontFamily=u,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,Yp)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);E!==C&&Math.max(E,C)/Math.min(E,C)>1.5&&(w=!0)}if(w&&(n.canvasWidth=c.vertical?t.height:t.width),l(this,Jp).set(e,n),l(this,ro).div=e,l(this,ro).properties=n,T(this,Do,Ux).call(this,l(this,ro)),n.hasText&&l(this,ui).append(e),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,ui).append(E)}},Ux=function(t){var c;const{div:e,properties:n,ctx:i}=t,{style:a}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=a,{canvasWidth:d,fontSize:f}=n;T(c=yn,Hi,Hx).call(c,i,f*l(this,ka),u);const{width:p}=i.measureText(e.textContent);p>0&&a.setProperty("--scale-x",d*l(this,ka)/p)}n.angle!==0&&a.setProperty("--rotate",`${n.angle}deg`)},Hi=new WeakSet,Oy=function(t=null){let e=l(this,sc).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,sc).set(t,e),l(this,em).set(e,{size:0,family:""})}return e},Hx=function(t,e,n){const i=l(this,em).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},D2=function(){if(l(this,Dh)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,Dh,t.getBoundingClientRect().height),t.remove()},L2=function(t,e,n){const i=l(this,Mh).get(t);if(i)return i;const a=T(this,Hi,Oy).call(this,n);a.canvas.width=a.canvas.height=Ak,T(this,Hi,Hx).call(this,a,Ak,t);const c=a.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let f=.8;return u?f=u/(u+d):(sn.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),l(this,Mh).set(t,f),f},b(yn,Hi),b(yn,Mh,new Map),b(yn,sc,new Map),b(yn,em,new WeakMap),b(yn,Dh,null),b(yn,Lh,new Set);let Xf=yn;const cj=100;function R2(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new $x,{docId:e}=t,n=r.url?y3(r.url):null,i=r.data?v3(r.data):null,a=r.httpHeaders||null,c=r.withCredentials===!0,u=r.password??null,d=r.range instanceof F2?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof Yf?r.worker:null;const g=r.verbosity,y=typeof r.docBaseUrl=="string"&&!nv(r.docBaseUrl)?r.docBaseUrl:null,w=dy(r.cMapUrl),S=r.cMapPacked!==!1,E=r.CMapReaderFactory||(Xn?T3:rk),C=dy(r.iccUrl),k=dy(r.standardFontDataUrl),M=r.StandardFontDataFactory||(Xn?k3:ok),_=dy(r.wasmUrl),L=r.WasmFactory||(Xn?P3:ak),D=r.stopAtErrors!==!0,F=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,j=r.isEvalSupported!==!1,U=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Xn,G=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Xn&&(sn.platform.isFirefox||!globalThis.chrome),q=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,J=typeof r.disableFontFace=="boolean"?r.disableFontFace:Xn,vt=r.fontExtraProperties===!0,wt=r.enableXfa===!0,yt=r.ownerDocument||globalThis.document,At=r.disableRange===!0,ot=r.disableStream===!0,tt=r.disableAutoFetch===!0,X=r.pdfBug===!0,st=r.CanvasFactory||(Xn?C3:b3),et=r.FilterFactory||(Xn?E3:S3),B=r.enableHWA===!0,W=r.useWasm!==!1,ut=d?d.length:r.length??NaN,Ct=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Xn&&!J,xt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(E===rk&&M===ok&&L===ak&&w&&k&&_&&ff(w,document.baseURI)&&ff(k,document.baseURI)&&ff(_,document.baseURI)),Tt=null;$B(g);const kt={canvasFactory:new st({ownerDocument:yt,enableHWA:B}),filterFactory:new et({docId:e,ownerDocument:yt}),cMapReaderFactory:xt?null:new E({baseUrl:w,isCompressed:S}),standardFontDataFactory:xt?null:new M({baseUrl:k}),wasmFactory:xt?null:new L({baseUrl:_})};p||(p=Yf.create({verbosity:g,port:br.workerPort}),t._worker=p);const zt={docId:e,apiVersion:"5.4.624",data:i,password:u,disableAutoFetch:tt,rangeChunkSize:f,length:ut,docBaseUrl:y,enableXfa:wt,evaluatorOptions:{maxImageSize:F,disableFontFace:J,ignoreErrors:D,isEvalSupported:j,isOffscreenCanvasSupported:U,isImageDecoderSupported:G,canvasMaxAreaInBytes:q,fontExtraProperties:vt,useSystemFonts:Ct,useWasm:W,useWorkerFetch:xt,cMapUrl:w,iccUrl:C,standardFontDataUrl:k,wasmUrl:_}},ee={ownerDocument:yt,pdfBug:X,styleElement:Tt,enableHWA:B,loadingParams:{disableAutoFetch:tt,enableXfa:wt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ye=p.messageHandler.sendWithPromise("GetDocRequest",zt,i?[i.buffer]:null);let $i;if(d)$i=new G3({pdfDataRangeTransport:d,disableRange:At,disableStream:ot});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Wc=ff(n)?q3:Xn?rj:tj;$i=new Wc({url:n,length:ut,httpHeaders:a,withCredentials:c,rangeChunkSize:f,disableRange:At,disableStream:ot})}return Ye.then(Wc=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const el=new Af(e,Wc,p.port),vd=new dj(el,t,$i,ee,kt);t._transport=vd,el.send("Ready",null)})}).catch(t._capability.reject),t}var O0;const B0=class B0{constructor(){$(this,"_capability",Promise.withResolvers());$(this,"_transport",null);$(this,"_worker",null);$(this,"docId",`d${Qe(B0,O0)._++}`);$(this,"destroyed",!1);$(this,"onPassword",null);$(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};O0=new WeakMap,b(B0,O0,0);let $x=B0;var rc,nm,im,sm,rm;class F2{constructor(t,e,n=!1,i=null){b(this,rc,Promise.withResolvers());b(this,nm,[]);b(this,im,[]);b(this,sm,[]);b(this,rm,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){l(this,rm).push(t)}addProgressListener(t){l(this,sm).push(t)}addProgressiveReadListener(t){l(this,im).push(t)}addProgressiveDoneListener(t){l(this,nm).push(t)}onDataRange(t,e){for(const n of l(this,rm))n(t,e)}onDataProgress(t,e){l(this,rc).promise.then(()=>{for(const n of l(this,sm))n(t,e)})}onDataProgressiveRead(t){l(this,rc).promise.then(()=>{for(const e of l(this,im))e(t)})}onDataProgressiveDone(){l(this,rc).promise.then(()=>{for(const t of l(this,nm))t()})}transportReady(){l(this,rc).resolve()}requestDataRange(t,e){Yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}rc=new WeakMap,nm=new WeakMap,im=new WeakMap,sm=new WeakMap,rm=new WeakMap;class uj{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var oo,om,oc,Tf;class hj{constructor(t,e,n,i=!1){b(this,oc);b(this,oo,!1);b(this,om,Gf.instance);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new ZT:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new P2,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new Ym({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:a=ta.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1,recordOperations:w=!1,operationsFilter:S=null}){var G,q,J;(G=this._stats)==null||G.time("Overall");const E=this._transport.getRenderingIntent(i,a,g,y),{renderingIntent:C,cacheKey:k}=E;x(this,oo,!1),d||(d=this._transport.getOptionalContentConfig(C));let M=this._intentStates.get(k);M||(M=Object.create(null),this._intentStates.set(k,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const _=!!(C&ji.PRINT);M.displayReadyCapability||(M.displayReadyCapability=Promise.withResolvers(),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(q=this._stats)==null||q.time("Page Request"),this._pumpOperatorList(E));const L=!!(this._pdfBug&&((J=globalThis.StepperManager)!=null&&J.enabled)),D=!this.recordedBBoxes&&(w||L),F=vt=>{var wt,yt;if(M.renderTasks.delete(j),D){const At=(wt=j.gfx)==null?void 0:wt.dependencyTracker.take();At&&(j.stepper&&j.stepper.setOperatorBBoxes(At,j.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=At))}_&&x(this,oo,!0),T(this,oc,Tf).call(this),vt?(j.capability.reject(vt),this._abortOperatorList({intentState:M,reason:vt instanceof Error?vt:new Error(vt)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(yt=globalThis.Stats)!=null&&yt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new Wx({callback:F,params:{canvas:e,canvasContext:t,dependencyTracker:D?new M3(e,M.operatorList.length,L):null,viewport:n,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:S});(M.renderTasks||(M.renderTasks=new Set)).add(j);const U=j.task;return Promise.all([M.displayReadyCapability.promise,d]).then(([vt,wt])=>{var yt;if(this.destroyed){F();return}if((yt=this._stats)==null||yt.time("Rendering"),!(wt.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:vt,optionalContentConfig:wt}),j.operatorListChanged()}).catch(F),U}getOperatorList({intent:t="display",annotationMode:e=ta.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var f;function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,n,i,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:l(this,om).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Wf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function a(){c.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),a()},i)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),x(this,oo,!1),Promise.all(t)}cleanup(t=!1){x(this,oo,!0);const e=T(this,oc,Tf).call(this);return t&&e&&this._stats&&(this._stats=new ZT),e}_startRenderPage(t,e){var i,a;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&T(this,oc,Tf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:c}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:l(this,om).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:i},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const p=()=>{d.read().then(({value:g,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();T(this,oc,Tf).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof db){let i=cj;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Qa(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}oo=new WeakMap,om=new WeakMap,oc=new WeakSet,Tf=function(){if(!l(this,oo)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,oo,!1),!0};var Pa,Fs,ao,ac,j0,lc,cc,qn,By,I2,N2,kf,Rh,jy;const xe=class xe{constructor({name:t=null,port:e=null,verbosity:n=WB()}={}){b(this,qn);b(this,Pa,Promise.withResolvers());b(this,Fs,null);b(this,ao,null);b(this,ac,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(l(xe,cc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");l(xe,cc).set(e,this),T(this,qn,I2).call(this,e)}else T(this,qn,N2).call(this)}get promise(){return l(this,Pa).promise}get port(){return l(this,ao)}get messageHandler(){return l(this,Fs)}destroy(){var t,e;this.destroyed=!0,(t=l(this,ac))==null||t.terminate(),x(this,ac,null),l(xe,cc).delete(l(this,ao)),x(this,ao,null),(e=l(this,Fs))==null||e.destroy(),x(this,Fs,null)}static create(t){const e=l(this,cc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new xe(t)}static get workerSrc(){if(br.workerSrc)return br.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Mt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Rh,jy)?l(this,Rh,jy):(await import(this.workerSrc)).WorkerMessageHandler)())}};Pa=new WeakMap,Fs=new WeakMap,ao=new WeakMap,ac=new WeakMap,j0=new WeakMap,lc=new WeakMap,cc=new WeakMap,qn=new WeakSet,By=function(){l(this,Pa).resolve(),l(this,Fs).send("configure",{verbosity:this.verbosity})},I2=function(t){x(this,ao,t),x(this,Fs,new Af("main","worker",t)),l(this,Fs).on("ready",()=>{}),T(this,qn,By).call(this)},N2=function(){if(l(xe,lc)||l(xe,Rh,jy)){T(this,qn,kf).call(this);return}let{workerSrc:t}=xe;try{xe._isSameOrigin(window.location,t)||(t=xe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Af("main","worker",e),i=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?l(this,Pa).reject(new Error("Worker was destroyed")):T(this,qn,kf).call(this)},a=new AbortController;e.addEventListener("error",()=>{l(this,ac)||i()},{signal:a.signal}),n.on("test",u=>{if(a.abort(),this.destroyed||!u){i();return}x(this,Fs,n),x(this,ao,e),x(this,ac,e),T(this,qn,By).call(this)}),n.on("ready",u=>{if(a.abort(),this.destroyed){i();return}try{c()}catch{T(this,qn,kf).call(this)}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{tv("The worker has been disabled.")}T(this,qn,kf).call(this)},kf=function(){l(xe,lc)||(_t("Setting up fake worker."),x(xe,lc,!0)),xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){l(this,Pa).reject(new Error("Worker was destroyed"));return}const e=new A3;x(this,ao,e);const n=`fake${Qe(xe,j0)._++}`,i=new Af(n+"_worker",n,e);t.setup(i,e),x(this,Fs,new Af(n,n+"_worker",e)),T(this,qn,By).call(this)}).catch(t=>{l(this,Pa).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Rh=new WeakSet,jy=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},b(xe,Rh),b(xe,j0,0),b(xe,lc,!1),b(xe,cc,new WeakMap),Xn&&(x(xe,lc,!0),br.workerSrc||(br.workerSrc="./pdf.worker.mjs")),xe._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},xe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},xe.fromPort=t=>{if(i3("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return xe.create(t)};let Yf=xe;var Ci,lo,co,cs,_a,Fh,uo,hi,Ui,O2,Pf,Vy;class dj{constructor(t,e,n,i,a){b(this,Ui);$(this,"downloadInfoCapability",Promise.withResolvers());b(this,Ci,null);b(this,lo,new Map);b(this,co,null);b(this,cs,new Map);b(this,_a,new Map);b(this,Fh,new Map);b(this,uo,null);b(this,hi,Gf.instance);this.messageHandler=t,this.loadingTask=e,x(this,co,n),this.commonObjs=new P2,this.fontLoader=new p3({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.enableHWA=i.enableHWA,this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),l(this,hi).addListener(T(this,Ui,O2).bind(this))}get annotationStorage(){return Mt(this,"annotationStorage",new pb)}getRenderingIntent(t,e=ta.ENABLE,n=null,i=!1,a=!1){let c=ji.DISPLAY,u=Cx;switch(t){case"any":c=ji.ANY;break;case"display":break;case"print":c=ji.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${t}`)}const d=c&ji.PRINT&&n instanceof e2?n:this.annotationStorage;switch(e){case ta.DISABLE:c+=ji.ANNOTATIONS_DISABLE;break;case ta.ENABLE:break;case ta.ENABLE_FORMS:c+=ji.ANNOTATIONS_FORMS;break;case ta.ENABLE_STORAGE:c+=ji.ANNOTATIONS_STORAGE,u=d.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(c+=ji.IS_EDITING),a&&(c+=ji.OPLIST);const{ids:f,hash:p}=d.modifiedIds,g=[c,u.hash,p];return{renderingIntent:c,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,uo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of l(this,cs).values())t.push(i._destroy());l(this,cs).clear(),l(this,_a).clear(),l(this,Fh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),l(this,lo).clear(),this.filterFactory.destroy(),Xf.cleanup(),(i=l(this,co))==null||i.cancelAllRequests(new Qa("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Xt(l(this,co),"GetReader - no `BasePDFStream` instance available."),x(this,Ci,l(this,co).getFullReader()),l(this,Ci).onProgress=a=>T(this,Ui,Vy).call(this,a),i.onPull=()=>{l(this,Ci).read().then(function({value:a,done:c}){if(c){i.close();return}Xt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{l(this,Ci).cancel(a),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{await l(this,Ci).headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:c}=l(this,Ci);return i&&a&&(l(this,Ci).onProgress=null),{isStreamingSupported:i,isRangeSupported:a,contentLength:c}}),t.on("GetRangeReader",(n,i)=>{Xt(l(this,co),"GetRangeReader - no `BasePDFStream` instance available.");const a=l(this,co).getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:c,done:u}){if(u){i.close();return}Xt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{i.error(c)})},i.onCancel=c=>{a.cancel(c),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{l(this,hi).pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new uj(n,this))}),t.on("DocException",n=>{e._capability.reject(si(n))}),t.on("PasswordRequest",n=>{x(this,uo,Promise.withResolvers());try{if(!e.onPassword)throw si(n);const i=a=>{a instanceof Error?l(this,uo).reject(a):l(this,uo).resolve({password:a})};e.onPassword(i,n.code)}catch(i){l(this,uo).reject(i)}return l(this,uo).promise}),t.on("DataLoaded",n=>{T(this,Ui,Vy).call(this,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,cs).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,a])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const y=a.error;_t(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const u=new Tx(a),d=this._params.pdfBug&&((c=globalThis.FontInspector)!=null&&c.enabled)?(y,w)=>globalThis.FontInspector.fontAdded(y,w):null,f=new m3(u,d,a.extra,a.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=a;Xt(p,"The imageRef must be defined.");for(const y of l(this,cs).values())for(const[,w]of y.objs)if((w==null?void 0:w.ref)===p)return w.dataLen?(this.commonObjs.resolve(n,structuredClone(w)),w.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new g3(a));break;case"Image":this.commonObjs.resolve(n,a);break;case"Pattern":const g=new kx(a);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,a,c])=>{var d;if(this.destroyed)return;const u=l(this,cs).get(i);if(!u.objs.has(n)){if(u._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(a){case"Image":case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||T(this,Ui,Vy).call(this,n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=l(this,Ci))==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>l(this,hi).pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=l(this,hi).getPageId(t)-1,i=l(this,_a).get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&l(this,Fh).set(c.refStr,n);const u=new hj(e,c,this,this._params.pdfBug);return l(this,cs).set(e,u),u});return l(this,_a).set(e,a),a}async getPageIndex(t){if(!Px(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return l(this,hi).getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l(this,hi).getPageId(t+1)-1,intent:e})}getFieldObjects(){return T(this,Ui,Pf).call(this,"GetFieldObjects")}hasJSActions(){return T(this,Ui,Pf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return T(this,Ui,Pf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l(this,hi).getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l(this,hi).getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return T(this,Ui,Pf).call(this,"GetOptionalContentConfig").then(e=>new W3(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,lo).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var a,c;return{info:i[0],metadata:i[1]?new H3(i[1]):null,contentDispositionFilename:((a=l(this,Ci))==null?void 0:a.filename)??null,contentLength:((c=l(this,Ci))==null?void 0:c.contentLength)??null,hasStructTree:i[2]}});return l(this,lo).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,cs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,lo).clear(),this.filterFactory.destroy(!0),Xf.cleanup()}}cachedPageNumber(t){if(!Px(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=l(this,Fh).get(e);return n>=0?l(this,hi).getPageNumber(n+1):null}}Ci=new WeakMap,lo=new WeakMap,co=new WeakMap,cs=new WeakMap,_a=new WeakMap,Fh=new WeakMap,uo=new WeakMap,hi=new WeakMap,Ui=new WeakSet,O2=function(){const t=new Map,e=new Map;for(let n=0,i=l(this,hi).pagesNumber;n<i;n++){const a=l(this,hi).getPrevPageNumber(n+1)-1,c=l(this,cs).get(a);c&&t.set(n,c);const u=l(this,_a).get(a);u&&e.set(n,u)}x(this,cs,t),x(this,_a,e)},Pf=function(t,e=null){const n=l(this,lo).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return l(this,lo).set(t,i),i},Vy=function({loaded:t,total:e}){var n,i;(i=(n=this.loadingTask).onProgress)==null||i.call(n,{loaded:t,total:e,percent:En(Math.round(t/e*100),0,100)})};class fj{constructor(t){$(this,"_internalRenderTask",null);$(this,"onContinue",null);$(this,"onError",null);this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&(e==null?void 0:e.size)>0}}var Ma,uc;const Al=class Al{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:y=null,enableHWA:w=!1,operationsFilter:S=null}){b(this,Ma,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=g,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new fj(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,f;if(this.cancelled)return;if(this._canvas){if(l(Al,uc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Al,uc).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ju(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,i,a;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,Ma)&&(window.cancelAnimationFrame(l(this,Ma)),x(this,Ma,null)),l(Al,uc).delete(this._canvas),t||(t=new db(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(a=(i=this.task).onError)==null||a.call(i,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Ma,window.requestAnimationFrame(()=>{x(this,Ma,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Al,uc).delete(this._canvas),this.callback())))}};Ma=new WeakMap,uc=new WeakMap,b(Al,uc,new WeakSet);let Wx=Al;const pj="5.4.624",mj="384c6208b";var Ti,hc,Ih,tn,am,Nh,ho,lm,Da,Is,cm,ae,Gx,Xx,Yx,yl,B2,Jo;const ri=class ri{constructor({editor:t=null,uiManager:e=null}){b(this,ae);b(this,Ti,null);b(this,hc,null);b(this,Ih);b(this,tn,null);b(this,am,!1);b(this,Nh,!1);b(this,ho,null);b(this,lm);b(this,Da,null);b(this,Is,null);var n,i;t?(x(this,Nh,!1),x(this,ho,t)):x(this,Nh,!0),x(this,Is,(t==null?void 0:t._uiManager)||e),x(this,lm,l(this,Is)._eventBus),x(this,Ih,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((i=l(this,Is))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(ri,cm)||x(ri,cm,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Mt(this,"_keyboardManager",new qm([[["Escape","mac+Escape"],ri.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ri.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ri.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ri.prototype._moveToPrevious],[["Home","mac+Home"],ri.prototype._moveToBeginning],[["End","mac+End"],ri.prototype._moveToEnd]]))}renderButton(){const t=x(this,Ti,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",l(this,ho)&&(t.ariaControls=`${l(this,ho).id}_colorpicker_dropdown`);const e=l(this,Is)._signal;t.addEventListener("click",T(this,ae,yl).bind(this),{signal:e}),t.addEventListener("keydown",T(this,ae,Yx).bind(this),{signal:e});const n=x(this,hc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,Ih),t.append(n),t}renderMainDropdown(){const t=x(this,tn,T(this,ae,Gx).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===l(this,Ti)){T(this,ae,yl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&T(this,ae,Xx).call(this,e,t)}_moveToNext(t){var e,n;if(!l(this,ae,Jo)){T(this,ae,yl).call(this,t);return}if(t.target===l(this,Ti)){(e=l(this,tn).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=l(this,tn))==null?void 0:e.firstElementChild)||t.target===l(this,Ti)){l(this,ae,Jo)&&this._hideDropdownFromKeyboard();return}l(this,ae,Jo)||T(this,ae,yl).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!l(this,ae,Jo)){T(this,ae,yl).call(this,t);return}(e=l(this,tn).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,ae,Jo)){T(this,ae,yl).call(this,t);return}(e=l(this,tn).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,tn))==null||t.classList.add("hidden"),l(this,Ti).ariaExpanded="false",(e=l(this,Da))==null||e.abort(),x(this,Da,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,Nh)){if(!l(this,ae,Jo)){(t=l(this,ho))==null||t.unselect();return}this.hideDropdown(),l(this,Ti).focus({preventScroll:!0,focusVisible:l(this,am)})}}updateColor(t){if(l(this,hc)&&(l(this,hc).style.backgroundColor=t),!l(this,tn))return;const e=l(this,Is).highlightColors.values();for(const n of l(this,tn).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=l(this,Ti))==null||t.remove(),x(this,Ti,null),x(this,hc,null),(e=l(this,tn))==null||e.remove(),x(this,tn,null)}};Ti=new WeakMap,hc=new WeakMap,Ih=new WeakMap,tn=new WeakMap,am=new WeakMap,Nh=new WeakMap,ho=new WeakMap,lm=new WeakMap,Da=new WeakMap,Is=new WeakMap,cm=new WeakMap,ae=new WeakSet,Gx=function(){const t=document.createElement("div"),e=l(this,Is)._signal;t.addEventListener("contextmenu",ys,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,ho)&&(t.id=`${l(this,ho).id}_colorpicker_dropdown`);for(const[n,i]of l(this,Is).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",l(ri,cm)[n]);const c=document.createElement("span");a.append(c),c.className="swatch",c.style.backgroundColor=i,a.ariaSelected=i===l(this,Ih),a.addEventListener("click",T(this,ae,Xx).bind(this,i),{signal:e}),t.append(a)}return t.addEventListener("keydown",T(this,ae,Yx).bind(this),{signal:e}),t},Xx=function(t,e){e.stopPropagation(),l(this,lm).dispatch("switchannotationeditorparams",{source:this,type:jt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},Yx=function(t){ri._keyboardManager.exec(this,t)},yl=function(t){if(l(this,ae,Jo)){this.hideDropdown();return}if(x(this,am,t.detail===0),l(this,Da)||(x(this,Da,new AbortController),window.addEventListener("pointerdown",T(this,ae,B2).bind(this),{signal:l(this,Is).combinedSignal(l(this,Da))})),l(this,Ti).ariaExpanded="true",l(this,tn)){l(this,tn).classList.remove("hidden");return}const e=x(this,tn,T(this,ae,Gx).call(this));l(this,Ti).append(e)},B2=function(t){var e;(e=l(this,tn))!=null&&e.contains(t.target)||this.hideDropdown()},Jo=function(){return l(this,tn)&&!l(this,tn).classList.contains("hidden")},b(ri,cm,null);let b0=ri;var fr,um,Oh,hm;const bl=class bl{constructor(t){b(this,fr,null);b(this,um,null);b(this,Oh,null);x(this,um,t),x(this,Oh,t._uiManager),l(bl,hm)||x(bl,hm,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,fr))return l(this,fr);const{editorType:t,colorType:e,color:n}=l(this,um),i=x(this,fr,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",l(bl,hm)[t]),i.addEventListener("input",()=>{l(this,Oh).updateParams(e,i.value)},{signal:l(this,Oh)._signal}),i}update(t){l(this,fr)&&(l(this,fr).value=t)}destroy(){var t;(t=l(this,fr))==null||t.remove(),x(this,fr,null)}hideDropdown(){}};fr=new WeakMap,um=new WeakMap,Oh=new WeakMap,hm=new WeakMap,b(bl,hm,null);let S0=bl;function bk(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function uf(r){return Math.max(0,Math.min(255,255*r))}class Sk{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=uf(t),[t,t,t]}static G_HTML([t]){const e=bk(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(uf)}static RGB_HTML(t){return`#${t.map(bk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[uf(1-Math.min(1,t+i)),uf(1-Math.min(1,n+i)),uf(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,a=1-e,c=1-n,u=Math.min(i,a,c);return["CMYK",i,a,c,u]}}class gj{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Yt("Abstract method `_createSVG` called.")}}class E0 extends gj{_createSVG(t){return document.createElementNS(Nr,t)}}const yj=9,Uc=new WeakSet,vj=new Date().getTimezoneOffset()*60*1e3;class D1{static create(t){switch(t.data.annotationType){case $e.LINK:return new yb(t);case $e.TEXT:return new xj(t);case $e.WIDGET:switch(t.data.fieldType){case"Tx":return new Aj(t);case"Btn":return t.data.radioButton?new z2(t):t.data.checkBox?new Sj(t):new Ej(t);case"Ch":return new Cj(t);case"Sig":return new bj(t)}return new $c(t);case $e.POPUP:return new qx(t);case $e.FREETEXT:return new G2(t);case $e.LINE:return new kj(t);case $e.SQUARE:return new Pj(t);case $e.CIRCLE:return new _j(t);case $e.POLYLINE:return new X2(t);case $e.CARET:return new Dj(t);case $e.INK:return new vb(t);case $e.POLYGON:return new Mj(t);case $e.HIGHLIGHT:return new Y2(t);case $e.UNDERLINE:return new Lj(t);case $e.SQUIGGLY:return new Rj(t);case $e.STRIKEOUT:return new Fj(t);case $e.STAMP:return new K2(t);case $e.FILEATTACHMENT:return new Ij(t);default:return new _e(t)}}}var dc,Bh,us,dm,Kx;const Tb=class Tb{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){b(this,dm);b(this,dc,null);b(this,Bh,!1);b(this,us,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Tb._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var u;const t=(u=this.annotationStorage)==null?void 0:u.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let a=-1/0,c=-1/0;if((e==null?void 0:e.length)>=8){for(let d=0;d<e.length;d+=8)e[d+1]>c?(c=e[d+1],a=e[d+2]):e[d+1]===c&&(a=Math.max(a,e[d+2]));return[a,c]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let f=0,p=d.length;f<p;f+=2)d[f+1]>c?(c=d[f+1],a=d[f]):d[f+1]===c&&(a=Math.max(a,d[f]));if(a!==1/0)return[a,c]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/n,t[1]=100*(t[1]-c)/i,t}get commentText(){var e,n,i;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${Hf}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((i=t.contentsObj)==null?void 0:i.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Hf}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=l(this,us))==null?void 0:t.popup)||this.popup)==null||e.remove(),x(this,us,this.popup=null)}updateEdited(t){var a;if(!this.container)return;t.rect&&(l(this,dc)||x(this,dc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&T(this,dm,Kx).call(this,e);let i=((a=l(this,us))==null?void 0:a.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=l(this,us).popup),i&&(i.updateEdited(t),n!=null&&n.deleted&&(i.remove(),x(this,us,null),this.popup=null))}resetEdited(){var t;l(this,dc)&&(T(this,dm,Kx).call(this,l(this,dc).rect),(t=l(this,us))==null||t.popup.resetEdited(),x(this,dc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof $c)&&!(this instanceof yb)&&(a.tabIndex=0);const{style:c}=a;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof qx){const{rotation:E}=e;return!e.hasOwnCanvas&&E!==0&&this.setRotation(E,a),a}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const E=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(E>0||C>0){const M=`calc(${E}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;c.borderRadius=M}else if(this instanceof z2){const M=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=M}switch(e.borderStyle.style){case wu.SOLID:c.borderStyle="solid";break;case wu.DASHED:c.borderStyle="dashed";break;case wu.BEVELED:_t("Unimplemented border style: beveled");break;case wu.INSET:_t("Unimplemented border style: inset");break;case wu.UNDERLINE:c.borderBottomStyle="solid";break}const k=e.borderColor||null;k?(x(this,Bh,!0),c.borderColor=rt.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):c.borderWidth=0}const f=rt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:g,pageX:y,pageY:w}=i.rawDims;c.left=`${100*(f[0]-y)/p}%`,c.top=`${100*(f[1]-w)/g}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(c.width=`${100*u/p}%`,c.height=`${100*d/g}%`):this.setRotation(S,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:c}=this;t%180!==0&&([a,c]=[c,a]),e.style.width=`${100*a/n}%`,e.style.height=`${100*c/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const a=i.detail[e],c=a[0],u=a.slice(1);i.target.style[n]=Sk[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:Sk[`${c}_rgb`](u)})};return Mt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const a=t[i]||n[i];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,a]of Object.entries(e)){const c=n[i];if(c){const u={detail:{[i]:a},target:t};c(u),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,a]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,C,k,M]=t.subarray(2,6);if(i===E&&a===C&&e===k&&n===M)return}const{style:c}=this.container;let u;if(l(this,Bh)){const{borderColor:E,borderWidth:C}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=i-e,f=a-n,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const y=p.createElement("defs");g.append(y);const w=p.createElement("clipPath"),S=`clippath_${this.data.id}`;w.setAttribute("id",S),w.setAttribute("clipPathUnits","objectBoundingBox"),y.append(w);for(let E=2,C=t.length;E<C;E+=8){const k=t[E],M=t[E+1],_=t[E+2],L=t[E+3],D=p.createElement("rect"),F=(_-e)/d,j=(a-M)/f,U=(k-_)/d,G=(M-L)/f;D.setAttribute("x",F),D.setAttribute("y",j),D.setAttribute("width",U),D.setAttribute("height",G),w.append(D),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${j}" width="${U}" height="${G}"/>`)}l(this,Bh)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate),x(this,us,new qx({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,us)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,us)}render(){Yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:a,id:c,exportValues:u}of i){if(a===-1||c===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Uc.has(f)){_t(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:f})}return n}for(const i of document.getElementsByName(t)){const{exportValue:a}=i,c=i.getAttribute("data-element-id");c!==e&&Uc.has(i)&&n.push({id:c,exportValue:a,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};dc=new WeakMap,Bh=new WeakMap,us=new WeakMap,dm=new WeakSet,Kx=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:c,pageX:u,pageY:d}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(c-t[3]+d)/c}%`,i===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(i)};let _e=Tb;class wj extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var zi,vl,j2,V2;class yb extends _e{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});b(this,zi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let a=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),a=!0):e.attachment?(T(this,zi,j2).call(this,i,e.attachment,e.overlaidText,e.attachmentDest),a=!0):e.setOCGState?(T(this,zi,V2).call(this,i,e.setOCGState,e.overlaidText),a=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),a=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&T(this,zi,vl).call(this),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),T(this,zi,vl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const c=i.get(a);c&&(e[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),T(this,zi,vl).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),T(this,zi,vl).call(this),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var g;i==null||i();const{fields:a,refs:c,include:u}=n,d=[];if(a.length!==0||c.length!==0){const y=new Set(c);for(const w of a){const S=this._fieldObjects[w]||[];for(const{id:E}of S)y.add(E)}for(const w of Object.values(this._fieldObjects))for(const S of w)y.has(S.id)===u&&d.push(S)}else for(const y of Object.values(this._fieldObjects))d.push(...y);const f=this.annotationStorage,p=[];for(const y of d){const{id:w}=y;switch(p.push(w),y.type){case"text":{const E=y.defaultValue||"";f.setValue(w,{value:E});break}case"checkbox":case"radiobutton":{const E=y.defaultValue===y.exportValues;f.setValue(w,{value:E});break}case"combobox":case"listbox":{const E=y.defaultValue||"";f.setValue(w,{value:E});break}default:continue}const S=document.querySelector(`[data-element-id="${w}"]`);if(S){if(!Uc.has(S)){_t(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}zi=new WeakSet,vl=function(){this.container.setAttribute("data-internal-link","")},j2=function(e,n,i="",a=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>{var c;return(c=this.downloadManager)==null||c.openOrDownloadData(n.content,n.filename,a),!1},T(this,zi,vl).call(this)},V2=function(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),T(this,zi,vl).call(this)};class xj extends _e{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class $c extends _e{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return sn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,a){n.includes("mouse")?t.addEventListener(n,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var u;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(c)}}))})}_setEventListeners(t,e,n,i){var a,c,u;for(const[d,f]of n)(f==="Action"||(a=this.data.actions)!=null&&a[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,i),f==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":rt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||yj,a=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(E1*i))||1,g=f/p;c=Math.min(i,d(g/E1))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(i,d(f/E1))}a.fontSize=`calc(${c}px * var(--total-scale-factor))`,a.color=rt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Aj extends $c{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const a=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),a.setValue(c.id,{[i]:n})}render(){var i,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let u=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let f=c.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const p={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Uc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:y,timeStep:w}=this.data,S=!!y&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",C=>{t.setValue(e,{value:C.target.value}),this.setPropertyOnSiblings(n,"value",C.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",C=>{const k=this.data.defaultFieldValue??"";n.value=p.userValue=k,p.formattedValue=null});let E=C=>{const{formattedValue:k}=p;k!=null&&(C.target.value=k),C.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",k=>{var _;if(p.focused)return;const{target:M}=k;if(S&&(M.type=y,w&&(M.step=w)),p.userValue){const L=p.userValue;if(S)if(y==="time"){const D=new Date(L),F=[D.getHours(),D.getMinutes(),D.getSeconds()];M.value=F.map(j=>j.toString().padStart(2,"0")).join(":")}else M.value=new Date(L-vj).toISOString().split(y==="date"?"T":".",1)[0];else M.value=L}p.lastCommittedValue=M.value,p.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",k=>{this.showElementAndHideCanvas(k.target);const M={value(_){p.userValue=_.detail.value??"",S||t.setValue(e,{value:p.userValue.toString()}),_.target.value=p.userValue},formattedValue(_){const{formattedValue:L}=_.detail;p.formattedValue=L,L!=null&&_.target!==document.activeElement&&(_.target.value=L);const D={formattedValue:L};S&&(D.value=L),t.setValue(e,D)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var j;const{charLimit:L}=_.detail,{target:D}=_;if(L===0){D.removeAttribute("maxLength");return}D.setAttribute("maxLength",L);let F=p.userValue;!F||F.length<=L||(F=F.slice(0,L),D.value=p.userValue=F,t.setValue(e,{value:F}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:D.selectionStart,selEnd:D.selectionEnd}}))}};this._dispatchEventFromSandbox(M,k)}),n.addEventListener("keydown",k=>{var L;p.commitKey=1;let M=-1;if(k.key==="Escape"?M=0:k.key==="Enter"&&!this.data.multiLine?M=2:k.key==="Tab"&&(p.commitKey=3),M===-1)return;const{value:_}=k.target;p.lastCommittedValue!==_&&(p.lastCommittedValue=_,p.userValue=_,(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:M,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}}))});const C=E;E=null,n.addEventListener("blur",k=>{var L,D;if(!p.focused||!k.relatedTarget)return;(L=this.data.actions)!=null&&L.Blur||(p.focused=!1);const{target:M}=k;let{value:_}=M;if(S){if(_&&y==="time"){const F=_.split(":").map(j=>parseInt(j,10));_=new Date(2e3,0,1,F[0],F[1],F[2]||0).valueOf(),M.step=""}else _.includes("T")||(_=`${_}T00:00`),_=new Date(_).valueOf();M.type="text"}p.userValue=_,p.lastCommittedValue!==_&&((D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:p.commitKey,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}})),C(k)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",k=>{var G;p.lastCommittedValue=null;const{data:M,target:_}=k,{value:L,selectionStart:D,selectionEnd:F}=_;let j=D,U=F;switch(k.inputType){case"deleteWordBackward":{const q=L.substring(0,D).match(/\w*[^\w]*$/);q&&(j-=q[0].length);break}case"deleteWordForward":{const q=L.substring(D).match(/^[^\w]*\w*/);q&&(U+=q[0].length);break}case"deleteContentBackward":D===F&&(j-=1);break;case"deleteContentForward":D===F&&(U+=1);break}k.preventDefault(),(G=this.linkService.eventBus)==null||G.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,change:M||"",willCommit:!1,selStart:j,selEnd:U}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.value)}if(E&&n.addEventListener("blur",E),this.data.comb){const k=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${k}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class bj extends $c{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Sj extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Uc.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n)){const p=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:d})}),a.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class z2 extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const a=document.createElement("input");if(Uc.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),a.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=c===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const y=p&&g.id===n;g.domElement&&(g.domElement.checked=y),t.setValue(g.id,{value:y})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Ej extends yb{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class Cj extends $c{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Uc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const y of i.options)y.selected=y.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,n.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),a=!1),i.append(g)}let c=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),i.prepend(p),c=()=>{p.remove(),i.removeEventListener("input",c),c=null},i.addEventListener("input",c)}const u=p=>{const g=p?"value":"textContent",{options:y,multiple:w}=i;return w?Array.prototype.filter.call(y,S=>S.selected).map(S=>S[g]):y.selectedIndex===-1?null:y[y.selectedIndex][g]};let d=u(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",p=>{const g={value(y){c==null||c();const w=y.detail.value,S=new Set(Array.isArray(w)?w:[w]);for(const E of i.options)E.selected=S.has(E.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(y){i.multiple=!0},remove(y){const w=i.options,S=y.detail.remove;w[S].selected=!1,i.remove(S),w.length>0&&Array.prototype.findIndex.call(w,C=>C.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:u(!0),items:f(y)}),d=u(!1)},clear(y){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(y){const{index:w,displayValue:S,exportValue:E}=y.detail.insert,C=i.children[w],k=document.createElement("option");k.textContent=S,k.value=E,C?C.before(k):i.append(k),t.setValue(e,{value:u(!0),items:f(y)}),d=u(!1)},items(y){const{items:w}=y.detail;for(;i.length!==0;)i.remove(0);for(const S of w){const{displayValue:E,exportValue:C}=S,k=document.createElement("option");k.textContent=E,k.value=C,i.append(k)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(y)}),d=u(!1)},indices(y){const w=new Set(y.detail.indices);for(const S of y.target.options)S.selected=w.has(S.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(g,p)}),i.addEventListener("input",p=>{var w;const g=u(!0),y=u(!1);t.setValue(e,{value:g}),p.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):i.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var fm,Qx;class qx extends _e{constructor(e){const{data:n,elements:i,parent:a}=e,c=!!a._commentManager;super(e,{isRenderable:!c&&_e._hasPopupData(n)});b(this,fm);if(this.elements=i,c&&_e._hasPopupData(n)){const u=this.popup=T(this,fm,Qx).call(this);for(const d of i)d.popup=u}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=T(this,fm,Qx).call(this),i=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${Lu}${a}`).join(",")),this.container}}fm=new WeakSet,Qx=function(){return new Tj({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ki,La,V0,z0,jh,Vh,Le,pr,Ra,fc,zh,Uh,mr,Pi,fo,po,Re,mo,Fa,pm,go,Hh,pc,Ia,cn,Na,It,zy,Zx,Jx,tA,Uy,eA,U2,H2,$2,W2,Hy,$y,nA;class Tj{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:a,contentsObj:c,richText:u,parent:d,rect:f,parentRect:p,open:g,commentManager:y=null}){b(this,It);b(this,ki,null);b(this,La,T(this,It,$2).bind(this));b(this,V0,T(this,It,nA).bind(this));b(this,z0,T(this,It,$y).bind(this));b(this,jh,T(this,It,Hy).bind(this));b(this,Vh,null);b(this,Le,null);b(this,pr,null);b(this,Ra,null);b(this,fc,null);b(this,zh,null);b(this,Uh,null);b(this,mr,!1);b(this,Pi,null);b(this,fo,null);b(this,po,null);b(this,Re,null);b(this,mo,null);b(this,Fa,null);b(this,pm,null);b(this,go,null);b(this,Hh,null);b(this,pc,null);b(this,Ia,!1);b(this,cn,null);b(this,Na,null);x(this,Le,t),x(this,Hh,i),x(this,pr,c),x(this,go,u),x(this,zh,d),x(this,Vh,e),x(this,pm,f),x(this,Uh,p),x(this,fc,n),x(this,ki,y),x(this,cn,n[0]),x(this,Ra,g0.toDateObject(a)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup()),y||(T(this,It,zy).call(this),l(this,Le).hidden=!0,g&&T(this,It,Hy).call(this))}renderCommentButton(){if(l(this,Re)){l(this,Re).parentNode||l(this,cn).container.after(l(this,Re));return}if(l(this,mo)||T(this,It,Zx).call(this),!l(this,mo))return;const{signal:t}=x(this,fo,new AbortController),e=l(this,cn).hasOwnCommentButton,n=()=>{l(this,ki).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{l(this,ki).toggleCommentPopup(this,!1,!0,!e)},a=()=>{l(this,ki).toggleCommentPopup(this,!1,!1)};if(e){x(this,Re,l(this,cn).container);for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",l(this,La),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",i,{signal:t}),c.addEventListener("pointerleave",a,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=x(this,Re,document.createElement("button"));c.className="annotationCommentButton";const u=l(this,cn).container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),T(this,It,tA).call(this),T(this,It,Jx).call(this),c.addEventListener("keydown",l(this,La),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",i,{signal:t}),c.addEventListener("pointerleave",a,{signal:t}),u.after(c)}}get commentButtonColor(){const{color:t,opacity:e}=l(this,cn).commentData;return t?l(this,zh)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=l(this,Re))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:a}=l(this,cn).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:a}}get elementBeforePopup(){return l(this,Re)}get comment(){return l(this,Na)||x(this,Na,l(this,cn).commentText),l(this,Na)}set comment(t){t!==this.comment&&(l(this,cn).commentText=x(this,Na,t))}focus(){var t;(t=l(this,cn).container)==null||t.focus()}get parentBoundingClientRect(){return l(this,cn).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){l(this,Re)&&(l(this,Re).classList.toggle("selected",t),l(this,Re).ariaExpanded=e)}setSelectedCommentButton(t){l(this,Re).classList.toggle("selected",t)}get commentPopupPosition(){if(l(this,Fa))return l(this,Fa);const{x:t,y:e,height:n}=l(this,Re).getBoundingClientRect(),{x:i,y:a,width:c,height:u}=l(this,cn).layer.getBoundingClientRect();return[(t-i)/c,(e+n-a)/u]}set commentPopupPosition(t){x(this,Fa,t)}hasDefaultPopupPosition(){return l(this,Fa)===null}get commentButtonPosition(){return l(this,mo)}get commentButtonWidth(){return l(this,Re).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=l(this,Fa)||this.commentButtonPosition.map(f=>f/100),i=this.parentBoundingClientRect,{x:a,y:c,width:u,height:d}=i;l(this,ki).showDialog(null,this,a+e*u,c+n*d,{...t,parentDimensions:i})}render(){var n,i;if(l(this,Pi))return;const t=x(this,Pi,document.createElement("div"));if(t.className="popup",l(this,Vh)){const a=t.style.outlineColor=rt.makeHexColor(...l(this,Vh));t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=l(this,Hh))!=null&&n.str){const a=document.createElement("span");a.className="title",e.append(a),{dir:a.dir,str:a.textContent}=l(this,Hh)}if(t.append(e),l(this,Ra)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Ra).valueOf()})),a.dateTime=l(this,Ra).toISOString(),e.append(a)}v_({html:l(this,It,Uy)||l(this,pr).str,dir:(i=l(this,pr))==null?void 0:i.dir,className:"popupContent"},t),l(this,Le).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var i;if(l(this,ki)){n?(this.remove(),x(this,Na,null)):e&&(e.deleted?this.remove():(T(this,It,tA).call(this),x(this,Na,e.text))),t&&(x(this,mo,null),T(this,It,Zx).call(this),T(this,It,Jx).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}T(this,It,zy).call(this),l(this,pc)||x(this,pc,{contentsObj:l(this,pr),richText:l(this,go)}),t&&x(this,po,null),e&&e.text&&(x(this,go,T(this,It,H2).call(this,e.text)),x(this,Ra,g0.toDateObject(e.date)),x(this,pr,null)),(i=l(this,Pi))==null||i.remove(),x(this,Pi,null)}resetEdited(){var t;l(this,pc)&&({contentsObj:Qe(this,pr)._,richText:Qe(this,go)._}=l(this,pc),x(this,pc,null),(t=l(this,Pi))==null||t.remove(),x(this,Pi,null),x(this,po,null))}remove(){var t,e,n;if((t=l(this,fo))==null||t.abort(),x(this,fo,null),(e=l(this,Pi))==null||e.remove(),x(this,Pi,null),x(this,Ia,!1),x(this,mr,!1),(n=l(this,Re))==null||n.remove(),x(this,Re,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){x(this,Ia,this.isVisible),l(this,Ia)&&(l(this,Le).hidden=!0)}maybeShow(){l(this,ki)||(T(this,It,zy).call(this),l(this,Ia)&&(l(this,Pi)||T(this,It,$y).call(this),x(this,Ia,!1),l(this,Le).hidden=!1))}get isVisible(){return l(this,ki)?!1:l(this,Le).hidden===!1}}ki=new WeakMap,La=new WeakMap,V0=new WeakMap,z0=new WeakMap,jh=new WeakMap,Vh=new WeakMap,Le=new WeakMap,pr=new WeakMap,Ra=new WeakMap,fc=new WeakMap,zh=new WeakMap,Uh=new WeakMap,mr=new WeakMap,Pi=new WeakMap,fo=new WeakMap,po=new WeakMap,Re=new WeakMap,mo=new WeakMap,Fa=new WeakMap,pm=new WeakMap,go=new WeakMap,Hh=new WeakMap,pc=new WeakMap,Ia=new WeakMap,cn=new WeakMap,Na=new WeakMap,It=new WeakSet,zy=function(){var e;if(l(this,fo))return;x(this,fo,new AbortController);const{signal:t}=l(this,fo);for(const n of this.trigger)n.addEventListener("click",l(this,jh),{signal:t}),n.addEventListener("pointerenter",l(this,z0),{signal:t}),n.addEventListener("pointerleave",l(this,V0),{signal:t}),n.classList.add("popupTriggerArea");for(const n of l(this,fc))(e=n.container)==null||e.addEventListener("keydown",l(this,La),{signal:t})},Zx=function(){const t=l(this,fc).find(e=>e.hasCommentButton);t&&x(this,mo,t._normalizePoint(t.commentButtonPosition))},Jx=function(){if(l(this,cn).extraPopupElement&&!l(this,cn).editor)return;l(this,Re)||this.renderCommentButton();const[t,e]=l(this,mo),{style:n}=l(this,Re);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},tA=function(){l(this,cn).extraPopupElement||(l(this,Re)||this.renderCommentButton(),l(this,Re).style.backgroundColor=this.commentButtonColor||"")},Uy=function(){const t=l(this,go),e=l(this,pr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,go).html||null},eA=function(){var t,e,n;return((n=(e=(t=l(this,It,Uy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},U2=function(){var t,e,n;return((n=(e=(t=l(this,It,Uy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},H2=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(this,It,U2),fontSize:l(this,It,eA)?`calc(${l(this,It,eA)}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:i});return n},$2=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,mr))&&T(this,It,Hy).call(this)},W2=function(){if(l(this,po)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:a}}}=l(this,zh);let c=!!l(this,Uh),u=c?l(this,Uh):l(this,pm);for(const S of l(this,fc))if(!u||rt.intersect(S.data.rect,u)!==null){u=S.data.rect,c=!0;break}const d=rt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,g=d[0]+p,y=d[1];x(this,po,[100*(g-i)/e,100*(y-a)/n]);const{style:w}=l(this,Le);w.left=`${l(this,po)[0]}%`,w.top=`${l(this,po)[1]}%`},Hy=function(){if(l(this,ki)){l(this,ki).toggleCommentPopup(this,!1);return}x(this,mr,!l(this,mr)),l(this,mr)?(T(this,It,$y).call(this),l(this,Le).addEventListener("click",l(this,jh)),l(this,Le).addEventListener("keydown",l(this,La))):(T(this,It,nA).call(this),l(this,Le).removeEventListener("click",l(this,jh)),l(this,Le).removeEventListener("keydown",l(this,La)))},$y=function(){l(this,Pi)||this.render(),this.isVisible?l(this,mr)&&l(this,Le).classList.add("focused"):(T(this,It,W2).call(this),l(this,Le).hidden=!1,l(this,Le).style.zIndex=parseInt(l(this,Le).style.zIndex)+1e3)},nA=function(){l(this,Le).classList.remove("focused"),!(l(this,mr)||!this.isVisible)&&(l(this,Le).hidden=!0,l(this,Le).style.zIndex=parseInt(l(this,Le).style.zIndex)-1e3)};class G2 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Lt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var mm;class kj extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,mm,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),c=x(this,mm,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,mm)}addHighlightArea(){this.container.classList.add("highlightArea")}}mm=new WeakMap;var gm;class Pj extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,gm,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),c=e.borderStyle.width,u=x(this,gm,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",n-c),u.setAttribute("height",i-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,gm)}addHighlightArea(){this.container.classList.add("highlightArea")}}gm=new WeakMap;var ym;class _j extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,ym,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),c=e.borderStyle.width,u=x(this,ym,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",i/2),u.setAttribute("rx",n/2-c/2),u.setAttribute("ry",i/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,ym)}addHighlightArea(){this.container.classList.add("highlightArea")}}ym=new WeakMap;var vm;class X2 extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,vm,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:a},width:c,height:u}=this;if(!n)return this.container;const d=this.svgFactory.create(c,u,!0);let f=[];for(let g=0,y=n.length;g<y;g+=2){const w=n[g]-e[0],S=e[3]-n[g+1];f.push(`${w},${S}`)}f=f.join(" ");const p=x(this,vm,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",f),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),d.append(p),this.container.append(d),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,vm)}addHighlightArea(){this.container.classList.add("highlightArea")}}vm=new WeakMap;class Mj extends X2{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Dj extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var wm,mc,xm,iA;class vb extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});b(this,xm);b(this,wm,null);b(this,mc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Lt.HIGHLIGHT:Lt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:a,popupRef:c}}=this,{transform:u,width:d,height:f}=T(this,xm,iA).call(this,n,e),p=this.svgFactory.create(d,f,!0),g=x(this,wm,this.svgFactory.createElement("svg:g"));p.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",u);for(let y=0,w=i.length;y<w;y++){const S=this.svgFactory.createElement(this.svgElementName);l(this,mc).push(S),S.setAttribute("points",i[y].join(",")),g.append(S)}return!c&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:a}=e,c=l(this,wm);if(n>=0&&c.setAttribute("stroke-width",n||1),i)for(let u=0,d=l(this,mc).length;u<d;u++)l(this,mc)[u].setAttribute("points",i[u].join(","));if(a){const{transform:u,width:d,height:f}=T(this,xm,iA).call(this,this.data.rotation,a);c.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),c.setAttribute("transform",u)}}getElementsToTriggerPopup(){return l(this,mc)}addHighlightArea(){this.container.classList.add("highlightArea")}}wm=new WeakMap,mc=new WeakMap,xm=new WeakSet,iA=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Y2 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Lt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Lj extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Rj extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Fj extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class K2 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Lt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Am,bm,sA;class Ij extends _e{constructor(e){var i;super(e,{isRenderable:!0});b(this,bm);b(this,Am,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",T(this,bm,sA).bind(this)),x(this,Am,i);const{isMac:a}=sn.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(a?c.metaKey:c.ctrlKey)&&T(this,bm,sA).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return l(this,Am)}addHighlightArea(){this.container.classList.add("highlightArea")}}Am=new WeakMap,bm=new WeakSet,sA=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var gc,yc,$h,Oa,Sm,vc,_i,Em,To,Wy,oA;const kb=class kb{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:c,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:p}){b(this,To);b(this,gc,null);b(this,yc,null);b(this,$h,null);b(this,Oa,new Map);b(this,Sm,null);b(this,vc,null);b(this,_i,[]);b(this,Em,!1);this.div=t,x(this,gc,e),x(this,yc,n),x(this,Sm,u||null),x(this,vc,f||null),x(this,$h,p||new pb),this.page=a,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=d||null}hasEditableAnnotations(){return l(this,Oa).size>0}async render(t){var u;const{annotations:e}=t,n=this.div;Vc(n,this.viewport);const i=new Map,a=[],c={data:null,layer:n,linkService:l(this,vc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new E0,annotationStorage:l(this,$h),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===$e.POPUP;if(f){const y=i.get(d.id);if(!y)continue;if(!this._commentManager){a.push(d);continue}c.elements=y}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;c.data=d;const p=D1.create(c);if(!p.isRenderable)continue;if(!f&&(l(this,_i).push(p),d.popupRef)){const y=i.get(d.popupRef);y?y.push(p):i.set(d.popupRef,[p])}const g=p.render();d.hidden&&(g.style.visibility="hidden"),p._isEditable&&(l(this,Oa).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}await T(this,To,Wy).call(this);for(const d of a){const f=c.elements=i.get(d.id);c.data=d;const p=D1.create(c);if(!p.isRenderable)continue;const g=p.render();p.contentElement.id=`${Lu}${d.id}`,d.hidden&&(g.style.visibility="hidden"),f.at(-1).container.after(g)}T(this,To,oA).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:l(this,vc),svgFactory:new E0,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=kb._defaultBorderStyle),e.data=n;const i=D1.create(e);i.isRenderable&&(i.render(),i.contentElement.id=`${Lu}${n.id}`,l(this,_i).push(i))}await T(this,To,Wy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Vc(e,{rotation:t.rotation}),T(this,To,oA).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Oa).values())}getEditableAnnotation(t){return l(this,Oa).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:i}=t,a=new wj({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:l(this,vc),annotationStorage:l(this,$h)});return a.render(),a.contentElement.id=`${Lu}${n}`,a.createOrUpdatePopup(),l(this,_i).push(a),a}removeAnnotation(t){var i;const e=l(this,_i).findIndex(a=>a.data.id===t);if(e<0)return;const[n]=l(this,_i).splice(e,1);(i=l(this,gc))==null||i.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);T(this,To,Wy).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Mt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:wu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};gc=new WeakMap,yc=new WeakMap,$h=new WeakMap,Oa=new WeakMap,Sm=new WeakMap,vc=new WeakMap,_i=new WeakMap,Em=new WeakMap,To=new WeakSet,Wy=async function(){var n,i,a;if(l(this,_i).length===0)return;this.div.replaceChildren();const t=[];if(!l(this,Em)){x(this,Em,!0);for(const{contentElement:c,data:{id:u}}of l(this,_i)){const d=c.id=`${Lu}${u}`;t.push((n=l(this,Sm))==null?void 0:n.getAriaAttributes(d).then(f=>{if(f)for(const[p,g]of f)c.setAttribute(p,g)}))}}l(this,_i).sort(({data:{rect:[c,u,d,f]}},{data:{rect:[p,g,y,w]}})=>{if(c===d&&u===f)return 1;if(p===y&&g===w)return-1;const S=f,E=u,C=(u+f)/2,k=w,M=g,_=(g+w)/2;if(C>=k&&_<=E)return-1;if(_>=S&&C<=M)return 1;const L=(c+d)/2,D=(p+y)/2;return L-D});const e=document.createDocumentFragment();for(const c of l(this,_i))e.append(c.container),this._commentManager?(a=((i=c.extraPopupElement)==null?void 0:i.popup)||c.popup)==null||a.renderCommentButton():c.extraPopupElement&&e.append(c.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),l(this,gc))for(const c of l(this,_i))l(this,gc).addPointerInTextLayer(c.contentElement,!1)},oA=function(){var e;if(!l(this,yc))return;const t=this.div;for(const[n,i]of l(this,yc)){const a=t.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:c}=a;c?c.nodeName==="CANVAS"?c.replaceWith(i):c.classList.contains("annotationContent")?c.after(i):c.before(i):a.append(i);const u=l(this,Oa).get(n);u&&(u._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,a.id,i),u._hasNoCanvas=!1):u.canvas=i)}l(this,yc).clear()};let rA=kb;const vy=/\r\n?|\n/g;var Mi,Cm,wc,Di,Xe,q2,Q2,Z2,Gy,ko,Xy,Yy,J2,lA,tM;const ve=class ve extends pe{constructor(e){super({...e,name:"freeTextEditor"});b(this,Xe);b(this,Mi,"");b(this,Cm,`${this.id}-editor`);b(this,wc,null);b(this,Di);$(this,"_colorPicker",null);this.color=e.color||ve._defaultColor||pe._defaultLineColor,x(this,Di,e.fontSize||ve._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=ve.prototype,n=c=>c.isEmpty(),i=zc.TRANSLATE_SMALL,a=zc.TRANSLATE_BIG;return Mt(this,"_keyboardManager",new qm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(e,n){pe.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case jt.FREETEXT_SIZE:ve._defaultFontSize=n;break;case jt.FREETEXT_COLOR:ve._defaultColor=n;break}}updateParams(e,n){switch(e){case jt.FREETEXT_SIZE:T(this,Xe,q2).call(this,n);break;case jt.FREETEXT_COLOR:T(this,Xe,Q2).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.FREETEXT_SIZE,ve._defaultFontSize],[jt.FREETEXT_COLOR,ve._defaultColor||pe._defaultLineColor]]}get propertiesToUpdate(){return[[jt.FREETEXT_SIZE,l(this,Di)],[jt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new S0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-ve._internalPadding*e,-(ve._internalPadding+l(this,Di))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,wc,new AbortController);const e=this._uiManager.combinedSignal(l(this,wc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Cm)),this._isDraggable=!0,(e=l(this,wc))==null||e.abort(),x(this,wc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,Mi),n=x(this,Mi,T(this,Xe,Z2).call(this).trimEnd());if(e===n)return;const i=a=>{if(x(this,Mi,a),!a){this.remove();return}T(this,Xe,Yy).call(this),this._uiManager.rebuild(this),T(this,Xe,Gy).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),T(this,Xe,Gy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ve._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Cm)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,Di)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[p,g]=this.pageDimensions,[y,w]=this.pageTranslation;let S,E;switch(this.rotation){case 0:S=e+(u[0]-y)/p,E=n+this.height-(u[1]-w)/g;break;case 90:S=e+(u[0]-y)/p,E=n-(u[1]-w)/g,[d,f]=[f,-d];break;case 180:S=e-this.width+(u[0]-y)/p,E=n-(u[1]-w)/g,[d,f]=[-d,-f];break;case 270:S=e+(u[0]-y-this.height*g)/p,E=n+(u[1]-w-this.width*p)/g,[d,f]=[-f,d];break}this.setAt(S*a,E*c,d,f)}else this._moveAfterPaste(e,n);T(this,Xe,Yy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var S,E,C;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const a=T(S=ve,ko,lA).call(S,n.getData("text")||"").replaceAll(vy,`
`);if(!a)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!a.includes(`
`)){u.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:f}=u,p=[],g=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(g.push(d.nodeValue.slice(f).replaceAll(vy,"")),k!==this.editorDiv){let M=p;for(const _ of this.editorDiv.childNodes){if(_===k){M=g;continue}M.push(T(E=ve,ko,Xy).call(E,_))}}p.push(d.nodeValue.slice(0,f).replaceAll(vy,""))}else if(d===this.editorDiv){let k=p,M=0;for(const _ of this.editorDiv.childNodes)M++===f&&(k=g),k.push(T(C=ve,ko,Xy).call(C,_))}x(this,Mi,`${p.join(`
`)}${a}${g.join(`
`)}`),T(this,Xe,Yy).call(this);const y=new Range;let w=Math.sumPrecise(p.map(k=>k.length));for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const M=k.nodeValue.length;if(w<=M){y.setStart(k,w),y.setEnd(k,w);break}w-=M}c.removeAllRanges(),c.addRange(y)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=ve._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){var u;let a=null;if(e instanceof G2){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:p,rotation:g,id:y,popupRef:w,richText:S,contentsObj:E,creationDate:C,modificationDate:k},textContent:M,textPosition:_,parent:{page:{pageNumber:L}}}=e;if(!M||M.length===0)return null;a=e={annotationType:Lt.FREETEXT,color:Array.from(f),fontSize:d,value:M.join(`
`),position:_,pageIndex:L-1,rect:p.slice(0),rotation:g,annotationElementId:y,id:y,deleted:!1,popupRef:w,comment:(E==null?void 0:E.str)||null,richText:S,creationDate:C,modificationDate:k}}const c=await super.deserialize(e,n,i);return x(c,Di,e.fontSize),c.color=rt.makeHexColor(...e.color),x(c,Mi,T(u=ve,ko,lA).call(u,e.value)),c._initialData=a,e.comment&&c.setCommentData(e),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=pe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:n,fontSize:l(this,Di),value:T(this,Xe,J2).call(this)});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!T(this,Xe,tM).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${l(this,Di)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const a of l(this,Mi).split(`
`)){const c=document.createElement("div");c.append(a?document.createTextNode(a):document.createElement("br")),n.append(c)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Mi)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Mi=new WeakMap,Cm=new WeakMap,wc=new WeakMap,Di=new WeakMap,Xe=new WeakSet,q2=function(e){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-l(this,Di))*this.parentScale),x(this,Di,a),T(this,Xe,Gy).call(this)},i=l(this,Di);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Q2=function(e){const n=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Z2=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(T(i=ve,ko,Xy).call(i,a)),n=a);return e.join(`
`)},Gy=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:c}=this,u=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",a.div.append(this.div),i=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},ko=new WeakSet,Xy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(vy,"")},Yy=function(){if(this.editorDiv.replaceChildren(),!!l(this,Mi))for(const e of l(this,Mi).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},J2=function(){return l(this,Mi).replaceAll(""," ")},lA=function(e){return e.replaceAll(" ","")},tM=function(e){const{value:n,fontSize:i,color:a,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((u,d)=>u!==a[d])||e.pageIndex!==c},b(ve,ko),$(ve,"_freeTextDefaultContent",""),$(ve,"_internalPadding",0),$(ve,"_defaultColor",null),$(ve,"_defaultFontSize",10),$(ve,"_type","freetext"),$(ve,"_editorType",Lt.FREETEXT);let aA=ve;class ct{toSVGPath(){Yt("Abstract method `toSVGPath` must be implemented.")}get box(){Yt("Abstract getter `box` must be implemented.")}serialize(t,e){Yt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,a,c){c||(c=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u]*i,c[u+1]=n+t[u+1]*a;return c}static _rescaleAndSwap(t,e,n,i,a,c){c||(c=new Float32Array(t.length));for(let u=0,d=t.length;u<d;u+=2)c[u]=e+t[u+1]*i,c[u+1]=n+t[u]*a;return c}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)i[a]=e+t[a],i[a+1]=n+t[a+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,a){switch(a){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,a,c){return[(t+5*n)/6,(e+5*i)/6,(5*n+a)/6,(5*i+c)/6,(n+a)/2,(i+c)/2]}}$(ct,"PRECISION",1e-4);var Li,Ns,Wh,Gh,gr,Ot,xc,Ac,Tm,km,Xh,Yh,Ba,Pm,U0,H0,nn,_f,eM,nM,iM,sM,rM,oM;const Vr=class Vr{constructor({x:t,y:e},n,i,a,c,u=0){b(this,nn);b(this,Li);b(this,Ns,[]);b(this,Wh);b(this,Gh);b(this,gr,[]);b(this,Ot,new Float32Array(18));b(this,xc);b(this,Ac);b(this,Tm);b(this,km);b(this,Xh);b(this,Yh);b(this,Ba,[]);x(this,Li,n),x(this,Yh,a*i),x(this,Gh,c),l(this,Ot).set([NaN,NaN,NaN,NaN,t,e],6),x(this,Wh,u),x(this,km,l(Vr,Pm)*i),x(this,Tm,l(Vr,H0)*i),x(this,Xh,i),l(this,Ba).push(t,e)}isEmpty(){return isNaN(l(this,Ot)[8])}add({x:t,y:e}){var G;x(this,xc,t),x(this,Ac,e);const[n,i,a,c]=l(this,Li);let[u,d,f,p]=l(this,Ot).subarray(8,12);const g=t-f,y=e-p,w=Math.hypot(g,y);if(w<l(this,Tm))return!1;const S=w-l(this,km),E=S/w,C=E*g,k=E*y;let M=u,_=d;u=f,d=p,f+=C,p+=k,(G=l(this,Ba))==null||G.push(t,e);const L=-k/S,D=C/S,F=L*l(this,Yh),j=D*l(this,Yh);return l(this,Ot).set(l(this,Ot).subarray(2,8),0),l(this,Ot).set([f+F,p+j],4),l(this,Ot).set(l(this,Ot).subarray(14,18),12),l(this,Ot).set([f-F,p-j],16),isNaN(l(this,Ot)[6])?(l(this,gr).length===0&&(l(this,Ot).set([u+F,d+j],2),l(this,gr).push(NaN,NaN,NaN,NaN,(u+F-n)/a,(d+j-i)/c),l(this,Ot).set([u-F,d-j],14),l(this,Ns).push(NaN,NaN,NaN,NaN,(u-F-n)/a,(d-j-i)/c)),l(this,Ot).set([M,_,u,d,f,p],6),!this.isEmpty()):(l(this,Ot).set([M,_,u,d,f,p],6),Math.abs(Math.atan2(_-d,M-u)-Math.atan2(k,C))<Math.PI/2?([u,d,f,p]=l(this,Ot).subarray(2,6),l(this,gr).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/a,((d+p)/2-i)/c),[u,d,M,_]=l(this,Ot).subarray(14,18),l(this,Ns).push(NaN,NaN,NaN,NaN,((M+u)/2-n)/a,((_+d)/2-i)/c),!0):([M,_,u,d,f,p]=l(this,Ot).subarray(0,6),l(this,gr).push(((M+5*u)/6-n)/a,((_+5*d)/6-i)/c,((5*u+f)/6-n)/a,((5*d+p)/6-i)/c,((u+f)/2-n)/a,((d+p)/2-i)/c),[f,p,u,d,M,_]=l(this,Ot).subarray(12,18),l(this,Ns).push(((M+5*u)/6-n)/a,((_+5*d)/6-i)/c,((5*u+f)/6-n)/a,((5*d+p)/6-i)/c,((u+f)/2-n)/a,((d+p)/2-i)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,gr),e=l(this,Ns);if(isNaN(l(this,Ot)[6])&&!this.isEmpty())return T(this,nn,eM).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);T(this,nn,iM).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return T(this,nn,nM).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,a,c){return new aM(t,e,n,i,a,c)}getOutlines(){var g;const t=l(this,gr),e=l(this,Ns),n=l(this,Ot),[i,a,c,u]=l(this,Li),d=new Float32Array((((g=l(this,Ba))==null?void 0:g.length)??0)+2);for(let y=0,w=d.length-2;y<w;y+=2)d[y]=(l(this,Ba)[y]-i)/c,d[y+1]=(l(this,Ba)[y+1]-a)/u;if(d[d.length-2]=(l(this,xc)-i)/c,d[d.length-1]=(l(this,Ac)-a)/u,isNaN(n[6])&&!this.isEmpty())return T(this,nn,sM).call(this,d);const f=new Float32Array(l(this,gr).length+24+l(this,Ns).length);let p=t.length;for(let y=0;y<p;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}p=T(this,nn,oM).call(this,f,p);for(let y=e.length-6;y>=6;y-=6)for(let w=0;w<6;w+=2){if(isNaN(e[y+w])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[y+w],f[p+1]=e[y+w+1],p+=2}return T(this,nn,rM).call(this,f,p),this.newFreeDrawOutline(f,d,l(this,Li),l(this,Xh),l(this,Wh),l(this,Gh))}};Li=new WeakMap,Ns=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,gr=new WeakMap,Ot=new WeakMap,xc=new WeakMap,Ac=new WeakMap,Tm=new WeakMap,km=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Ba=new WeakMap,Pm=new WeakMap,U0=new WeakMap,H0=new WeakMap,nn=new WeakSet,_f=function(){const t=l(this,Ot).subarray(4,6),e=l(this,Ot).subarray(16,18),[n,i,a,c]=l(this,Li);return[(l(this,xc)+(t[0]-e[0])/2-n)/a,(l(this,Ac)+(t[1]-e[1])/2-i)/c,(l(this,xc)+(e[0]-t[0])/2-n)/a,(l(this,Ac)+(e[1]-t[1])/2-i)/c]},eM=function(){const[t,e,n,i]=l(this,Li),[a,c,u,d]=T(this,nn,_f).call(this);return`M${(l(this,Ot)[2]-t)/n} ${(l(this,Ot)[3]-e)/i} L${(l(this,Ot)[4]-t)/n} ${(l(this,Ot)[5]-e)/i} L${a} ${c} L${u} ${d} L${(l(this,Ot)[16]-t)/n} ${(l(this,Ot)[17]-e)/i} L${(l(this,Ot)[14]-t)/n} ${(l(this,Ot)[15]-e)/i} Z`},nM=function(t){const e=l(this,Ns);t.push(`L${e[4]} ${e[5]} Z`)},iM=function(t){const[e,n,i,a]=l(this,Li),c=l(this,Ot).subarray(4,6),u=l(this,Ot).subarray(16,18),[d,f,p,g]=T(this,nn,_f).call(this);t.push(`L${(c[0]-e)/i} ${(c[1]-n)/a} L${d} ${f} L${p} ${g} L${(u[0]-e)/i} ${(u[1]-n)/a}`)},sM=function(t){const e=l(this,Ot),[n,i,a,c]=l(this,Li),[u,d,f,p]=T(this,nn,_f).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-i)/c,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-i)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-i)/c,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-i)/c],0),this.newFreeDrawOutline(g,t,l(this,Li),l(this,Xh),l(this,Wh),l(this,Gh))},rM=function(t,e){const n=l(this,Ns);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},oM=function(t,e){const n=l(this,Ot).subarray(4,6),i=l(this,Ot).subarray(16,18),[a,c,u,d]=l(this,Li),[f,p,g,y]=T(this,nn,_f).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/u,(n[1]-c)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-c)/d],e),e+=24},b(Vr,Pm,8),b(Vr,U0,2),b(Vr,H0,l(Vr,Pm)+l(Vr,U0));let C0=Vr;var Kh,bc,yo,_m,Ri,Mm,ze,$0,lM;class aM extends ct{constructor(e,n,i,a,c,u){super();b(this,$0);b(this,Kh);b(this,bc,new Float32Array(4));b(this,yo);b(this,_m);b(this,Ri);b(this,Mm);b(this,ze);x(this,ze,e),x(this,Ri,n),x(this,Kh,i),x(this,Mm,a),x(this,yo,c),x(this,_m,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],T(this,$0,lM).call(this,u);const[d,f,p,g]=l(this,bc);for(let y=0,w=e.length;y<w;y+=2)e[y]=(e[y]-d)/p,e[y+1]=(e[y+1]-f)/g;for(let y=0,w=n.length;y<w;y+=2)n[y]=(n[y]-d)/p,n[y+1]=(n[y+1]-f)/g}toSVGPath(){const e=[`M${l(this,ze)[4]} ${l(this,ze)[5]}`];for(let n=6,i=l(this,ze).length;n<i;n+=6){if(isNaN(l(this,ze)[n])){e.push(`L${l(this,ze)[n+4]} ${l(this,ze)[n+5]}`);continue}e.push(`C${l(this,ze)[n]} ${l(this,ze)[n+1]} ${l(this,ze)[n+2]} ${l(this,ze)[n+3]} ${l(this,ze)[n+4]} ${l(this,ze)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,a],c){const u=i-e,d=a-n;let f,p;switch(c){case 0:f=ct._rescale(l(this,ze),e,a,u,-d),p=ct._rescale(l(this,Ri),e,a,u,-d);break;case 90:f=ct._rescaleAndSwap(l(this,ze),e,n,u,d),p=ct._rescaleAndSwap(l(this,Ri),e,n,u,d);break;case 180:f=ct._rescale(l(this,ze),i,n,-u,d),p=ct._rescale(l(this,Ri),i,n,-u,d);break;case 270:f=ct._rescaleAndSwap(l(this,ze),i,a,-u,-d),p=ct._rescaleAndSwap(l(this,Ri),i,a,-u,-d);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return l(this,bc)}newOutliner(e,n,i,a,c,u=0){return new C0(e,n,i,a,c,u)}getNewOutline(e,n){const[i,a,c,u]=l(this,bc),[d,f,p,g]=l(this,Kh),y=c*p,w=u*g,S=i*p+d,E=a*g+f,C=this.newOutliner({x:l(this,Ri)[0]*y+S,y:l(this,Ri)[1]*w+E},l(this,Kh),l(this,Mm),e,l(this,_m),n??l(this,yo));for(let k=2;k<l(this,Ri).length;k+=2)C.add({x:l(this,Ri)[k]*y+S,y:l(this,Ri)[k+1]*w+E});return C.getOutlines()}}Kh=new WeakMap,bc=new WeakMap,yo=new WeakMap,_m=new WeakMap,Ri=new WeakMap,Mm=new WeakMap,ze=new WeakMap,$0=new WeakSet,lM=function(e){const n=l(this,ze);let i=n[4],a=n[5];const c=[i,a,i,a];let u=i,d=a,f=i,p=a;const g=e?Math.max:Math.min,y=new Float32Array(4);for(let S=6,E=n.length;S<E;S+=6){const C=n[S+4],k=n[S+5];isNaN(n[S])?(rt.pointBoundingBox(C,k,c),d>k?(u=C,d=k):d===k&&(u=g(u,C)),p<k?(f=C,p=k):p===k&&(f=g(f,C))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,rt.bezierBoundingBox(i,a,...n.slice(S,S+6),y),rt.rectBoundingBox(y[0],y[1],y[2],y[3],c),d>y[1]?(u=y[0],d=y[1]):d===y[1]&&(u=g(u,y[0])),p<y[3]?(f=y[2],p=y[3]):p===y[3]&&(f=g(f,y[2]))),i=C,a=k}const w=l(this,bc);w[0]=c[0]-l(this,yo),w[1]=c[1]-l(this,yo),w[2]=c[2]-c[0]+2*l(this,yo),w[3]=c[3]-c[1]+2*l(this,yo),this.firstPoint=[u,d],this.lastPoint=[f,p]};var Dm,Lm,Rm,ja,Os,Qn,cM,Ky,uM,hM,uA;class cA{constructor(t,e=0,n=0,i=!0){b(this,Qn);b(this,Dm);b(this,Lm);b(this,Rm);b(this,ja,[]);b(this,Os,[]);const a=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:E,y:C,width:k,height:M}of t){const _=Math.floor((E-e)/c)*c,L=Math.ceil((E+k+e)/c)*c,D=Math.floor((C-e)/c)*c,F=Math.ceil((C+M+e)/c)*c,j=[_,D,F,!0],U=[L,D,F,!1];l(this,ja).push(j,U),rt.rectBoundingBox(_,D,L,F,a)}const u=a[2]-a[0]+2*n,d=a[3]-a[1]+2*n,f=a[0]-n,p=a[1]-n;let g=i?-1/0:1/0,y=1/0;const w=l(this,ja).at(i?-1:-2),S=[w[0],w[2]];for(const E of l(this,ja)){const[C,k,M,_]=E;!_&&i?k<y?(y=k,g=C):k===y&&(g=Math.max(g,C)):_&&!i&&(k<y?(y=k,g=C):k===y&&(g=Math.min(g,C))),E[0]=(C-f)/u,E[1]=(k-p)/d,E[2]=(M-p)/d}x(this,Dm,new Float32Array([f,p,u,d])),x(this,Lm,[g,y]),x(this,Rm,S)}getOutlines(){l(this,ja).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of l(this,ja))e[3]?(t.push(...T(this,Qn,uA).call(this,e)),T(this,Qn,uM).call(this,e)):(T(this,Qn,hM).call(this,e),t.push(...T(this,Qn,uA).call(this,e)));return T(this,Qn,cM).call(this,t)}}Dm=new WeakMap,Lm=new WeakMap,Rm=new WeakMap,ja=new WeakMap,Os=new WeakMap,Qn=new WeakSet,cM=function(t){const e=[],n=new Set;for(const c of t){const[u,d,f]=c;e.push([u,d,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const i=[];let a;for(;n.size>0;){const c=n.values().next().value;let[u,d,f,p,g]=c;n.delete(c);let y=u,w=d;for(a=[u,f],i.push(a);;){let S;if(n.has(p))S=p;else if(n.has(g))S=g;else break;n.delete(S),[u,d,f,p,g]=S,y!==u&&(a.push(y,w,u,w===d?d:f),y=u),w=w===d?f:d}a.push(y,w)}return new Nj(i,l(this,Dm),l(this,Lm),l(this,Rm))},Ky=function(t){const e=l(this,Os);let n=0,i=e.length-1;for(;n<=i;){const a=n+i>>1,c=e[a][0];if(c===t)return a;c<t?n=a+1:i=a-1}return i+1},uM=function([,t,e]){const n=T(this,Qn,Ky).call(this,t);l(this,Os).splice(n,0,[t,e])},hM=function([,t,e]){const n=T(this,Qn,Ky).call(this,t);for(let i=n;i<l(this,Os).length;i++){const[a,c]=l(this,Os)[i];if(a!==t)break;if(a===t&&c===e){l(this,Os).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,c]=l(this,Os)[i];if(a!==t)break;if(a===t&&c===e){l(this,Os).splice(i,1);return}}},uA=function(t){const[e,n,i]=t,a=[[e,n,i]],c=T(this,Qn,Ky).call(this,i);for(let u=0;u<c;u++){const[d,f]=l(this,Os)[u];for(let p=0,g=a.length;p<g;p++){const[,y,w]=a[p];if(!(f<=y||w<=d)){if(y>=d){if(w>f)a[p][1]=f;else{if(g===1)return[];a.splice(p,1),p--,g--}continue}a[p][2]=d,w>f&&a.push([e,f,w])}}}return a};var Fm,qh;class Nj extends ct{constructor(e,n,i,a){super();b(this,Fm);b(this,qh);x(this,qh,e),x(this,Fm,n),this.firstPoint=i,this.lastPoint=a}toSVGPath(){const e=[];for(const n of l(this,qh)){let[i,a]=n;e.push(`M${i} ${a}`);for(let c=2;c<n.length;c+=2){const u=n[c],d=n[c+1];u===i?(e.push(`V${d}`),a=d):d===a&&(e.push(`H${u}`),i=u)}e.push("Z")}return e.join(" ")}serialize([e,n,i,a],c){const u=[],d=i-e,f=a-n;for(const p of l(this,qh)){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=e+p[y]*d,g[y+1]=a-p[y+1]*f;u.push(g)}return u}get box(){return l(this,Fm)}get classNamesForOutlining(){return["highlightOutline"]}}Fm=new WeakMap,qh=new WeakMap;class hA extends C0{newFreeDrawOutline(t,e,n,i,a,c){return new Oj(t,e,n,i,a,c)}}class Oj extends aM{newOutliner(t,e,n,i,a,c=0){return new hA(t,e,n,i,a,c)}}var Qh,Im,vo,Sc,Nm,di,Om,Bm,Ec,Fi,Ii,An,Zh,Jh,Bn,td,hs,jm,Ft,dA,qy,dM,fM,pM,fA,wl,fs,Cu,mM,Qy,Zy,gM,yM,vM,wM,xM;const Gt=class Gt extends pe{constructor(e){super({...e,name:"highlightEditor"});b(this,Ft);b(this,Qh,null);b(this,Im,0);b(this,vo);b(this,Sc,null);b(this,Nm,null);b(this,di,null);b(this,Om,null);b(this,Bm,0);b(this,Ec,null);b(this,Fi,null);b(this,Ii,null);b(this,An,!1);b(this,Zh,null);b(this,Jh,null);b(this,Bn,null);b(this,td,"");b(this,hs);b(this,jm,"");this.color=e.color||Gt._defaultColor,x(this,hs,e.thickness||Gt._defaultThickness),this.opacity=e.opacity||Gt._defaultOpacity,x(this,vo,e.boxes||null),x(this,jm,e.methodOfCreation||""),x(this,td,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(x(this,An,!0),T(this,Ft,qy).call(this,e),T(this,Ft,wl).call(this)):l(this,vo)&&(x(this,Qh,e.anchorNode),x(this,Im,e.anchorOffset),x(this,Om,e.focusNode),x(this,Bm,e.focusOffset),T(this,Ft,dA).call(this),T(this,Ft,wl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Gt.prototype;return Mt(this,"_keyboardManager",new qm([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,An)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,hs),methodOfCreation:l(this,jm)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;pe.initialize(e,n),Gt._defaultColor||(Gt._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:Gt._defaultColor=n;break;case jt.HIGHLIGHT_THICKNESS:Gt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return l(this,Jh)}get commentButtonPosition(){return l(this,Zh)}updateParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:T(this,Ft,dM).call(this,n);break;case jt.HIGHLIGHT_THICKNESS:T(this,Ft,fM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,Gt._defaultColor],[jt.HIGHLIGHT_THICKNESS,Gt._defaultThickness]]}get propertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,this.color||Gt._defaultColor],[jt.HIGHLIGHT_THICKNESS,l(this,hs)||Gt._defaultThickness],[jt.HIGHLIGHT_FREE,l(this,An)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ii),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=l(this,Nm))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",x(this,Nm,new b0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,Ft,Zy).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,T(this,Ft,Zy).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){T(this,Ft,fA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Ft,wl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?T(this,Ft,fA).call(this):e&&(T(this,Ft,wl).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var a,c,u;const{drawLayer:n}=this.parent;let i;l(this,An)?(e=(e-this.rotation+360)%360,i=T(a=Gt,fs,Cu).call(a,l(this,Fi).box,e)):i=T(c=Gt,fs,Cu).call(c,[this.x,this.y,this.width,this.height],e),n.updateProperties(l(this,Ii),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(l(this,Bn),{bbox:T(u=Gt,fs,Cu).call(u,l(this,di).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,td)&&(e.setAttribute("aria-label",l(this,td)),e.setAttribute("role","mark")),l(this,An)?e.classList.add("free"):this.div.addEventListener("keydown",T(this,Ft,mM).bind(this),{signal:this._uiManager._signal});const n=x(this,Ec,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,Sc),this.setDims(),k_(this,l(this,Ec),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:T(this,Ft,Qy).call(this,!0);break;case 1:case 3:T(this,Ft,Qy).call(this,!1);break}}select(){var e;super.select(),l(this,Bn)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Bn)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bn),{rootClass:{selected:!1}}),l(this,An)||T(this,Ft,Qy).call(this,!1))}get _mustFixPosition(){return!l(this,An)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Ii),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Bn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:a,y:c}){const{x:u,y:d,width:f,height:p}=i.getBoundingClientRect(),g=new AbortController,y=e.combinedSignal(g),w=S=>{g.abort(),T(this,fs,wM).call(this,e,S)};window.addEventListener("blur",w,{signal:y}),window.addEventListener("pointerup",w,{signal:y}),window.addEventListener("pointerdown",Ne,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",ys,{signal:y}),i.addEventListener("pointermove",T(this,fs,vM).bind(this,e),{signal:y}),this._freeHighlight=new hA({x:a,y:c},[u,d,f,p],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var E,C,k,M;let a=null;if(e instanceof Y2){const{data:{quadPoints:_,rect:L,rotation:D,id:F,color:j,opacity:U,popupRef:G,richText:q,contentsObj:J,creationDate:vt,modificationDate:wt},parent:{page:{pageNumber:yt}}}=e;a=e={annotationType:Lt.HIGHLIGHT,color:Array.from(j),opacity:U,quadPoints:_,boxes:null,pageIndex:yt-1,rect:L.slice(0),rotation:D,annotationElementId:F,id:F,deleted:!1,popupRef:G,richText:q,comment:(J==null?void 0:J.str)||null,creationDate:vt,modificationDate:wt}}else if(e instanceof vb){const{data:{inkLists:_,rect:L,rotation:D,id:F,color:j,borderStyle:{rawWidth:U},popupRef:G,richText:q,contentsObj:J,creationDate:vt,modificationDate:wt},parent:{page:{pageNumber:yt}}}=e;a=e={annotationType:Lt.HIGHLIGHT,color:Array.from(j),thickness:U,inkLists:_,boxes:null,pageIndex:yt-1,rect:L.slice(0),rotation:D,annotationElementId:F,id:F,deleted:!1,popupRef:G,richText:q,comment:(J==null?void 0:J.str)||null,creationDate:vt,modificationDate:wt}}const{color:c,quadPoints:u,inkLists:d,opacity:f}=e,p=await super.deserialize(e,n,i);p.color=rt.makeHexColor(...c),p.opacity=f||1,d&&x(p,hs,e.thickness),p._initialData=a,e.comment&&p.setCommentData(e);const[g,y]=p.pageDimensions,[w,S]=p.pageTranslation;if(u){const _=x(p,vo,[]);for(let L=0;L<u.length;L+=8)_.push({x:(u[L]-w)/g,y:1-(u[L+1]-S)/y,width:(u[L+2]-u[L])/g,height:(u[L+1]-u[L+5])/y});T(E=p,Ft,dA).call(E),T(C=p,Ft,wl).call(C),p.rotate(p.rotation)}else if(d){x(p,An,!0);const _=d[0],L={x:_[0]-w,y:y-(_[1]-S)},D=new hA(L,[0,0,g,y],1,l(p,hs)/2,!0,.001);for(let U=0,G=_.length;U<G;U+=2)L.x=_[U]-w,L.y=y-(_[U+1]-S),D.add(L);const{id:F,clipPathId:j}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:D.toSVGPath()}},!0,!0);T(k=p,Ft,qy).call(k,{highlightOutlines:D.getOutlines(),highlightId:F,clipPathId:j}),T(M=p,Ft,wl).call(M),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=pe._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:n,opacity:this.opacity,thickness:l(this,hs),quadPoints:T(this,Ft,gM).call(this),outlines:T(this,Ft,yM).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!T(this,Ft,xM).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Qh=new WeakMap,Im=new WeakMap,vo=new WeakMap,Sc=new WeakMap,Nm=new WeakMap,di=new WeakMap,Om=new WeakMap,Bm=new WeakMap,Ec=new WeakMap,Fi=new WeakMap,Ii=new WeakMap,An=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,Bn=new WeakMap,td=new WeakMap,hs=new WeakMap,jm=new WeakMap,Ft=new WeakSet,dA=function(){const e=new cA(l(this,vo),.001);x(this,Fi,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,Fi).box;const n=new cA(l(this,vo),.0025,.001,this._uiManager.direction==="ltr");x(this,di,n.getOutlines());const{firstPoint:i}=l(this,Fi);x(this,Zh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:a}=l(this,di);x(this,Jh,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},qy=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var y,w;if(x(this,Fi,e),x(this,di,e.getNewOutline(l(this,hs)/2+1.5,.0025)),n>=0)x(this,Ii,n),x(this,Sc,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,Bn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,di).box,path:{d:l(this,di).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Ii),{bbox:T(y=Gt,fs,Cu).call(y,l(this,Fi).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Bn),{bbox:T(w=Gt,fs,Cu).call(w,l(this,di).box,S),path:{d:l(this,di).toSVGPath()}})}const[c,u,d,f]=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=d,this.height=f;break;case 90:{const[S,E]=this.parentDimensions;this.x=u,this.y=1-c,this.width=d*E/S,this.height=f*S/E;break}case 180:this.x=1-c,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[S,E]=this.parentDimensions;this.x=1-u,this.y=c,this.width=d*E/S,this.height=f*S/E;break}}const{firstPoint:p}=e;x(this,Zh,[(p[0]-c)/d,(p[1]-u)/f]);const{lastPoint:g}=l(this,di);x(this,Jh,[(g[0]-c)/d,(g[1]-u)/f])},dM=function(e){const n=(c,u)=>{this.color=c,this.opacity=u,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,e,Gt._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},fM=function(e){const n=l(this,hs),i=a=>{x(this,hs,a),T(this,Ft,pM).call(this,a)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},pM=function(e){l(this,An)&&(T(this,Ft,qy).call(this,{highlightOutlines:l(this,Fi).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},fA=function(){l(this,Ii)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Ii)),x(this,Ii,null),this.parent.drawLayer.remove(l(this,Bn)),x(this,Bn,null))},wl=function(e=this.parent){l(this,Ii)===null&&({id:Qe(this,Ii)._,clipPathId:Qe(this,Sc)._}=e.drawLayer.draw({bbox:l(this,Fi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,An)},path:{d:l(this,Fi).toSVGPath()}},!1,!0),x(this,Bn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,An)},bbox:l(this,di).box,path:{d:l(this,di).toSVGPath()}},l(this,An))),l(this,Ec)&&(l(this,Ec).style.clipPath=l(this,Sc)))},fs=new WeakSet,Cu=function([e,n,i,a],c){switch(c){case 90:return[1-n-a,e,a,i];case 180:return[1-e-i,1-n-a,i,a];case 270:return[n,1-e-i,a,i]}return[e,n,i,a]},mM=function(e){Gt._keyboardManager.exec(this,e)},Qy=function(e){if(!l(this,Qh))return;const n=window.getSelection();e?n.setPosition(l(this,Qh),l(this,Im)):n.setPosition(l(this,Om),l(this,Bm))},Zy=function(){return l(this,An)?this.rotation:0},gM=function(){if(l(this,An))return null;const[e,n]=this.pageDimensions,[i,a]=this.pageTranslation,c=l(this,vo),u=new Float32Array(c.length*8);let d=0;for(const{x:f,y:p,width:g,height:y}of c){const w=f*e+i,S=(1-p)*n+a;u[d]=u[d+4]=w,u[d+1]=u[d+3]=S,u[d+2]=u[d+6]=w+g*e,u[d+5]=u[d+7]=S-y*n,d+=8}return u},yM=function(e){return l(this,Fi).serialize(e,T(this,Ft,Zy).call(this))},vM=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},wM=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},xM=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,a)=>i!==n[a])},b(Gt,fs),$(Gt,"_defaultColor",null),$(Gt,"_defaultOpacity",1),$(Gt,"_defaultThickness",12),$(Gt,"_type","highlight"),$(Gt,"_editorType",Lt.HIGHLIGHT),$(Gt,"_freeHighlightId",-1),$(Gt,"_freeHighlight",null),$(Gt,"_freeHighlightClipId","");let T0=Gt;var Cc;class AM{constructor(){b(this,Cc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){l(this,Cc)[t]=e}toSVGProperties(){const t=l(this,Cc);return x(this,Cc,Object.create(null)),{root:t}}reset(){x(this,Cc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Yt("Not implemented")}}Cc=new WeakMap;var Ni,ed,un,Tc,kc,Ht,pA,mA,gA,Mf,bM,Jy,Df,Tu;const Bt=class Bt extends pe{constructor(e){super(e);b(this,Ht);b(this,Ni,null);b(this,ed);$(this,"_colorPicker",null);$(this,"_drawId",null);x(this,ed,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(T(this,Ht,pA).call(this,e),T(this,Ht,Mf).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[a,c]of Object.entries(n))i.has(a)?Object.assign(e[a],c):e[a]=c;return e}static getDefaultDrawingOptions(e){Yt("Not implemented")}static get typesMap(){Yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(l(Bt,un).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)e.push([i,n[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)e.push([i,n[a]]);return e}_updateProperty(e,n,i){const a=this._drawingOptions,c=a[n],u=d=>{var p;a.updateProperty(n,d);const f=l(this,Ni).updateProperty(n,d);f&&T(this,Ht,Df).call(this,f),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,i),undo:u.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(l(this,Ni).getPathResizingSVGProperties(T(this,Ht,Jy).call(this)),{bbox:T(this,Ht,Tu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(l(this,Ni).getPathResizedSVGProperties(T(this,Ht,Jy).call(this)),{bbox:T(this,Ht,Tu).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:T(this,Ht,Tu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties(l(this,Ni).getPathTranslatedSVGProperties(T(this,Ht,Jy).call(this),this.parentDimensions),{bbox:T(this,Ht,Tu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,ed)&&(x(this,ed,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){T(this,Ht,gA).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Ht,Mf).call(this),T(this,Ht,Df).call(this,l(this,Ni).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),T(this,Ht,gA).call(this)):e&&(this._uiManager.addShouldRescale(this),T(this,Ht,Mf).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Bt._mergeSVGProperties({bbox:T(this,Ht,Tu).call(this)},l(this,Ni).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&T(this,Ht,Df).call(this,l(this,Ni).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,a,c){Yt("Not implemented")}static startDrawing(e,n,i,a){var C;const{target:c,offsetX:u,offsetY:d,pointerId:f,pointerType:p}=a;if(Rn.isInitializedAndDifferentPointerType(p))return;const{viewport:{rotation:g}}=e,{width:y,height:w}=c.getBoundingClientRect(),S=x(Bt,Tc,new AbortController),E=e.combinedSignal(S);if(Rn.setPointer(p,f),window.addEventListener("pointerup",k=>{Rn.isSamePointerIdOrRemove(k.pointerId)&&this._endDraw(k)},{signal:E}),window.addEventListener("pointercancel",k=>{Rn.isSamePointerIdOrRemove(k.pointerId)&&this._currentParent.endDrawingSession()},{signal:E}),window.addEventListener("pointerdown",k=>{Rn.isSamePointerType(k.pointerType)&&(Rn.initializeAndAddPointerId(k.pointerId),l(Bt,un).isCancellable()&&(l(Bt,un).removeLastElement(),l(Bt,un).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",ys,{signal:E}),c.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),c.addEventListener("touchmove",k=>{Rn.isSameTimeStamp(k.timeStamp)&&Ne(k)},{signal:E}),e.toggleDrawing(),(C=n._editorUndoBar)==null||C.hide(),l(Bt,un)){e.drawLayer.updateProperties(this._currentDrawId,l(Bt,un).startNew(u,d,y,w,g));return}n.updateUIForDefaultProperties(this),x(Bt,un,this.createDrawerInstance(u,d,y,w,g)),x(Bt,kc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(Bt,kc).toSVGProperties(),l(Bt,un).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Rn.isSameTimeStamp(e.timeStamp),!l(Bt,un))return;const{offsetX:n,offsetY:i,pointerId:a}=e;if(Rn.isSamePointerId(a)){if(Rn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(Bt,un).add(n,i)),Rn.setTimeStamp(e.timeStamp),Ne(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(Bt,un,null),x(Bt,kc,null),Rn.clearTimeStamp()),l(Bt,Tc)&&(l(Bt,Tc).abort(),x(Bt,Tc,null),Rn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(Bt,un).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=l(Bt,un),a=this._currentDrawId,c=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(c))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(jt.DRAW_STEP),!l(Bt,un).isEmpty()){const{pageDimensions:[i,a],scale:c}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(Bt,un).getOutlines(i*c,a*c,c,this._INNER_MARGIN),drawingOptions:l(Bt,kc),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,a,c,u){Yt("Not implemented")}static async deserialize(e,n,i){var g,y;const{rawDims:{pageWidth:a,pageHeight:c,pageX:u,pageY:d}}=n.viewport,f=this.deserializeDraw(u,d,a,c,this._INNER_MARGIN,e),p=await super.deserialize(e,n,i);return p.createDrawingOptions(e),T(g=p,Ht,pA).call(g,{drawOutlines:f}),T(y=p,Ht,Mf).call(y),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[n,i]=this.pageTranslation,[a,c]=this.pageDimensions;return l(this,Ni).serialize([n,i,a,c],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Ni=new WeakMap,ed=new WeakMap,un=new WeakMap,Tc=new WeakMap,kc=new WeakMap,Ht=new WeakSet,pA=function({drawOutlines:e,drawId:n,drawingOptions:i}){x(this,Ni,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=T(this,Ht,mA).call(this,e,this.parent),T(this,Ht,Df).call(this,e.box)},mA=function(e,n){const{id:i}=n.drawLayer.draw(Bt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},gA=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Mf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=T(this,Ht,mA).call(this,l(this,Ni),e)}},bM=function([e,n,i,a]){const{parentDimensions:[c,u],rotation:d}=this;switch(d){case 90:return[n,1-e,i*(u/c),a*(c/u)];case 180:return[1-e,1-n,i,a];case 270:return[1-n,e,i*(u/c),a*(c/u)];default:return[e,n,i,a]}},Jy=function(){const{x:e,y:n,width:i,height:a,parentDimensions:[c,u],rotation:d}=this;switch(d){case 90:return[1-n,e,i*(c/u),a*(u/c)];case 180:return[1-e,1-n,i,a];case 270:return[n,1-e,i*(c/u),a*(u/c)];default:return[e,n,i,a]}},Df=function(e){[this.x,this.y,this.width,this.height]=T(this,Ht,bM).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Tu=function(){const{x:e,y:n,width:i,height:a,rotation:c,parentRotation:u,parentDimensions:[d,f]}=this;switch((c*4+u)/90){case 1:return[1-n-a,e,a,i];case 2:return[1-e-i,1-n-a,i,a];case 3:return[n,1-e-i,a,i];case 4:return[e,n-i*(d/f),a*(f/d),i*(d/f)];case 5:return[1-n,e,i*(d/f),a*(f/d)];case 6:return[1-e-a*(f/d),1-n,a*(f/d),i*(d/f)];case 7:return[n-i*(d/f),1-e-a*(f/d),i*(d/f),a*(f/d)];case 8:return[e-i,n-a,i,a];case 9:return[1-n,e-i,a,i];case 10:return[1-e,1-n,i,a];case 11:return[n-a,1-e,a,i];case 12:return[e-a*(f/d),n,a*(f/d),i*(d/f)];case 13:return[1-n-i*(d/f),e-a*(f/d),i*(d/f),a*(f/d)];case 14:return[1-e,1-n-i*(d/f),a*(f/d),i*(d/f)];case 15:return[n,1-e,i*(d/f),a*(f/d)];default:return[e,n,i,a]}},$(Bt,"_currentDrawId",-1),$(Bt,"_currentParent",null),b(Bt,un,null),b(Bt,Tc,null),b(Bt,kc,null),$(Bt,"_INNER_MARGIN",3);let k0=Bt;var yr,hn,dn,Pc,nd,$n,bn,ds,_c,Mc,Dc,id,t0;class Bj{constructor(t,e,n,i,a,c){b(this,id);b(this,yr,new Float64Array(6));b(this,hn);b(this,dn);b(this,Pc);b(this,nd);b(this,$n);b(this,bn,"");b(this,ds,0);b(this,_c,new Qm);b(this,Mc);b(this,Dc);x(this,Mc,n),x(this,Dc,i),x(this,Pc,a),x(this,nd,c),[t,e]=T(this,id,t0).call(this,t,e);const u=x(this,hn,[NaN,NaN,NaN,NaN,t,e]);x(this,$n,[t,e]),x(this,dn,[{line:u,points:l(this,$n)}]),l(this,yr).set(u,0)}updateProperty(t,e){t==="stroke-width"&&x(this,nd,e)}isEmpty(){return!l(this,dn)||l(this,dn).length===0}isCancellable(){return l(this,$n).length<=10}add(t,e){[t,e]=T(this,id,t0).call(this,t,e);const[n,i,a,c]=l(this,yr).subarray(2,6),u=t-a,d=e-c;return Math.hypot(l(this,Mc)*u,l(this,Dc)*d)<=2?null:(l(this,$n).push(t,e),isNaN(n)?(l(this,yr).set([a,c,t,e],2),l(this,hn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,yr)[0])&&l(this,hn).splice(6,6),l(this,yr).set([n,i,a,c,t,e],0),l(this,hn).push(...ct.createBezierPoints(n,i,a,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(l(this,$n).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,a){x(this,Mc,n),x(this,Dc,i),x(this,Pc,a),[t,e]=T(this,id,t0).call(this,t,e);const c=x(this,hn,[NaN,NaN,NaN,NaN,t,e]);x(this,$n,[t,e]);const u=l(this,dn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),l(this,dn).push({line:c,points:l(this,$n)}),l(this,yr).set(c,0),x(this,ds,0),this.toSVGPath(),null}getLastElement(){return l(this,dn).at(-1)}setLastElement(t){return l(this,dn)?(l(this,dn).push(t),x(this,hn,t.line),x(this,$n,t.points),x(this,ds,0),{path:{d:this.toSVGPath()}}):l(this,_c).setLastElement(t)}removeLastElement(){if(!l(this,dn))return l(this,_c).removeLastElement();l(this,dn).pop(),x(this,bn,"");for(let t=0,e=l(this,dn).length;t<e;t++){const{line:n,points:i}=l(this,dn)[t];x(this,hn,n),x(this,$n,i),x(this,ds,0),this.toSVGPath()}return{path:{d:l(this,bn)}}}toSVGPath(){const t=ct.svgRound(l(this,hn)[4]),e=ct.svgRound(l(this,hn)[5]);if(l(this,$n).length===2)return x(this,bn,`${l(this,bn)} M ${t} ${e} Z`),l(this,bn);if(l(this,$n).length<=6){const i=l(this,bn).lastIndexOf("M");x(this,bn,`${l(this,bn).slice(0,i)} M ${t} ${e}`),x(this,ds,6)}if(l(this,$n).length===4){const i=ct.svgRound(l(this,hn)[10]),a=ct.svgRound(l(this,hn)[11]);return x(this,bn,`${l(this,bn)} L ${i} ${a}`),x(this,ds,12),l(this,bn)}const n=[];l(this,ds)===0&&(n.push(`M ${t} ${e}`),x(this,ds,6));for(let i=l(this,ds),a=l(this,hn).length;i<a;i+=6){const[c,u,d,f,p,g]=l(this,hn).slice(i,i+6).map(ct.svgRound);n.push(`C${c} ${u} ${d} ${f} ${p} ${g}`)}return x(this,bn,l(this,bn)+n.join(" ")),x(this,ds,l(this,hn).length),l(this,bn)}getOutlines(t,e,n,i){const a=l(this,dn).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),l(this,_c).build(l(this,dn),t,e,n,l(this,Pc),l(this,nd),i),x(this,yr,null),x(this,hn,null),x(this,dn,null),x(this,bn,null),l(this,_c)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}yr=new WeakMap,hn=new WeakMap,dn=new WeakMap,Pc=new WeakMap,nd=new WeakMap,$n=new WeakMap,bn=new WeakMap,ds=new WeakMap,_c=new WeakMap,Mc=new WeakMap,Dc=new WeakMap,id=new WeakSet,t0=function(t,e){return ct._normalizePoint(t,e,l(this,Mc),l(this,Dc),l(this,Pc))};var Wn,Vm,zm,Oi,vr,wr,sd,rd,Lc,Tn,Br,SM,EM,CM;class Qm extends ct{constructor(){super(...arguments);b(this,Tn);b(this,Wn);b(this,Vm,0);b(this,zm);b(this,Oi);b(this,vr);b(this,wr);b(this,sd);b(this,rd);b(this,Lc)}build(e,n,i,a,c,u,d){x(this,vr,n),x(this,wr,i),x(this,sd,a),x(this,rd,c),x(this,Lc,u),x(this,zm,d??0),x(this,Oi,e),T(this,Tn,EM).call(this)}get thickness(){return l(this,Lc)}setLastElement(e){return l(this,Oi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Oi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of l(this,Oi)){if(e.push(`M${ct.svgRound(n[4])} ${ct.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ct.svgRound(n[10])} ${ct.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[c,u,d,f,p,g]=n.subarray(i,i+6).map(ct.svgRound);e.push(`C${c} ${u} ${d} ${f} ${p} ${g}`)}}return e.join("")}serialize([e,n,i,a],c){const u=[],d=[],[f,p,g,y]=T(this,Tn,SM).call(this);let w,S,E,C,k,M,_,L,D;switch(l(this,rd)){case 0:D=ct._rescale,w=e,S=n+a,E=i,C=-a,k=e+f*i,M=n+(1-p-y)*a,_=e+(f+g)*i,L=n+(1-p)*a;break;case 90:D=ct._rescaleAndSwap,w=e,S=n,E=i,C=a,k=e+p*i,M=n+f*a,_=e+(p+y)*i,L=n+(f+g)*a;break;case 180:D=ct._rescale,w=e+i,S=n,E=-i,C=a,k=e+(1-f-g)*i,M=n+p*a,_=e+(1-f)*i,L=n+(p+y)*a;break;case 270:D=ct._rescaleAndSwap,w=e+i,S=n+a,E=-i,C=-a,k=e+(1-p-y)*i,M=n+(1-f-g)*a,_=e+(1-p)*i,L=n+(1-f)*a;break}for(const{line:F,points:j}of l(this,Oi))u.push(D(F,w,S,E,C,c?new Array(F.length):null)),d.push(D(j,w,S,E,C,c?new Array(j.length):null));return{lines:u,points:d,rect:[k,M,_,L]}}static deserialize(e,n,i,a,c,{paths:{lines:u,points:d},rotation:f,thickness:p}){const g=[];let y,w,S,E,C;switch(f){case 0:C=ct._rescale,y=-e/i,w=n/a+1,S=1/i,E=-1/a;break;case 90:C=ct._rescaleAndSwap,y=-n/a,w=-e/i,S=1/a,E=1/i;break;case 180:C=ct._rescale,y=e/i+1,w=-n/a,S=-1/i,E=1/a;break;case 270:C=ct._rescaleAndSwap,y=n/a+1,w=e/i+1,S=-1/a,E=-1/i;break}if(!u){u=[];for(const M of d){const _=M.length;if(_===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(_===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const L=new Float32Array(3*(_-2));u.push(L);let[D,F,j,U]=M.subarray(0,4);L.set([NaN,NaN,NaN,NaN,D,F],0);for(let G=4;G<_;G+=2){const q=M[G],J=M[G+1];L.set(ct.createBezierPoints(D,F,j,U,q,J),(G-2)*3),[D,F,j,U]=[j,U,q,J]}}}for(let M=0,_=u.length;M<_;M++)g.push({line:C(u[M].map(L=>L??NaN),y,w,S,E),points:C(d[M].map(L=>L??NaN),y,w,S,E)});const k=new this.prototype.constructor;return k.build(g,i,a,1,f,p,c),k}get box(){return l(this,Wn)}updateProperty(e,n){return e==="stroke-width"?T(this,Tn,CM).call(this,n):null}updateParentDimensions([e,n],i){const[a,c]=T(this,Tn,Br).call(this);x(this,vr,e),x(this,wr,n),x(this,sd,i);const[u,d]=T(this,Tn,Br).call(this),f=u-a,p=d-c,g=l(this,Wn);return g[0]-=f,g[1]-=p,g[2]+=2*f,g[3]+=2*p,g}updateRotation(e){return x(this,Vm,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Wn).map(ct.svgRound).join(" ")}get defaultProperties(){const[e,n]=l(this,Wn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=l(this,Wn);let i=0,a=0,c=0,u=0,d=0,f=0;switch(l(this,Vm)){case 90:a=n/e,c=-e/n,d=e;break;case 180:i=-1,u=-1,d=e,f=n;break;case 270:a=-n/e,c=e/n,f=n;break;default:return""}return`matrix(${i} ${a} ${c} ${u} ${ct.svgRound(d)} ${ct.svgRound(f)})`}getPathResizingSVGProperties([e,n,i,a]){const[c,u]=T(this,Tn,Br).call(this),[d,f,p,g]=l(this,Wn);if(Math.abs(p-c)<=ct.PRECISION||Math.abs(g-u)<=ct.PRECISION){const C=e+i/2-(d+p/2),k=n+a/2-(f+g/2);return{path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:`${this.rotationTransform} translate(${C} ${k})`}}}const y=(i-2*c)/(p-2*c),w=(a-2*u)/(g-2*u),S=p/i,E=g/a;return{path:{"transform-origin":`${ct.svgRound(d)} ${ct.svgRound(f)}`,transform:`${this.rotationTransform} scale(${S} ${E}) translate(${ct.svgRound(c)} ${ct.svgRound(u)}) scale(${y} ${w}) translate(${ct.svgRound(-c)} ${ct.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,i,a]){const[c,u]=T(this,Tn,Br).call(this),d=l(this,Wn),[f,p,g,y]=d;if(d[0]=e,d[1]=n,d[2]=i,d[3]=a,Math.abs(g-c)<=ct.PRECISION||Math.abs(y-u)<=ct.PRECISION){const k=e+i/2-(f+g/2),M=n+a/2-(p+y/2);for(const{line:_,points:L}of l(this,Oi))ct._translate(_,k,M,_),ct._translate(L,k,M,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const w=(i-2*c)/(g-2*c),S=(a-2*u)/(y-2*u),E=-w*(f+c)+e+c,C=-S*(p+u)+n+u;if(w!==1||S!==1||E!==0||C!==0)for(const{line:k,points:M}of l(this,Oi))ct._rescale(k,E,C,w,S,k),ct._rescale(M,E,C,w,S,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[a,c]=i,u=l(this,Wn),d=e-u[0],f=n-u[1];if(l(this,vr)===a&&l(this,wr)===c)for(const{line:p,points:g}of l(this,Oi))ct._translate(p,d,f,p),ct._translate(g,d,f,g);else{const p=l(this,vr)/a,g=l(this,wr)/c;x(this,vr,a),x(this,wr,c);for(const{line:y,points:w}of l(this,Oi))ct._rescale(y,d,f,p,g,y),ct._rescale(w,d,f,p,g,w);u[2]*=p,u[3]*=g}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get defaultSVGProperties(){const e=l(this,Wn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e[0])} ${ct.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Wn=new WeakMap,Vm=new WeakMap,zm=new WeakMap,Oi=new WeakMap,vr=new WeakMap,wr=new WeakMap,sd=new WeakMap,rd=new WeakMap,Lc=new WeakMap,Tn=new WeakSet,Br=function(e=l(this,Lc)){const n=l(this,zm)+e/2*l(this,sd);return l(this,rd)%180===0?[n/l(this,vr),n/l(this,wr)]:[n/l(this,wr),n/l(this,vr)]},SM=function(){const[e,n,i,a]=l(this,Wn),[c,u]=T(this,Tn,Br).call(this,0);return[e+c,n+u,i-2*c,a-2*u]},EM=function(){const e=x(this,Wn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of l(this,Oi)){if(a.length<=12){for(let d=4,f=a.length;d<f;d+=6)rt.pointBoundingBox(a[d],a[d+1],e);continue}let c=a[4],u=a[5];for(let d=6,f=a.length;d<f;d+=6){const[p,g,y,w,S,E]=a.subarray(d,d+6);rt.bezierBoundingBox(c,u,p,g,y,w,S,E,e),c=S,u=E}}const[n,i]=T(this,Tn,Br).call(this);e[0]=En(e[0]-n,0,1),e[1]=En(e[1]-i,0,1),e[2]=En(e[2]+n,0,1),e[3]=En(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},CM=function(e){const[n,i]=T(this,Tn,Br).call(this);x(this,Lc,e);const[a,c]=T(this,Tn,Br).call(this),[u,d]=[a-n,c-i],f=l(this,Wn);return f[0]-=u,f[1]-=d,f[2]+=2*u,f[3]+=2*d,f};class lv extends AM{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:pe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new lv(this._viewParameters);return t.updateAll(this),t}}var W0,TM;const Ou=class Ou extends k0{constructor(e){super({...e,name:"inkEditor"});b(this,W0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){pe.initialize(e,n),this._defaultDrawingOptions=new lv(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Mt(this,"typesMap",new Map([[jt.INK_THICKNESS,"stroke-width"],[jt.INK_COLOR,"stroke"],[jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,a,c){return new Bj(e,n,i,a,c,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,a,c,u){return Qm.deserialize(e,n,i,a,c,u)}static async deserialize(e,n,i){let a=null;if(e instanceof vb){const{data:{inkLists:u,rect:d,rotation:f,id:p,color:g,opacity:y,borderStyle:{rawWidth:w},popupRef:S,richText:E,contentsObj:C,creationDate:k,modificationDate:M},parent:{page:{pageNumber:_}}}=e;a=e={annotationType:Lt.INK,color:Array.from(g),thickness:w,opacity:y,paths:{points:u},boxes:null,pageIndex:_-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:S,richText:E,comment:(C==null?void 0:C.str)||null,creationDate:k,modificationDate:M}}const c=await super.deserialize(e,n,i);return c._initialData=a,e.comment&&c.setCommentData(e),c}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new S0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Ou.getDefaultDrawingOptions({stroke:rt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":c,"stroke-width":u}}=this,d=Object.assign(super.serialize(e),{color:pe._colorManager.convert(a),opacity:c,thickness:u,paths:{lines:n,points:i}});return this.addComment(d),e?(d.isCopy=!0,d):this.annotationElementId&&!T(this,W0,TM).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};W0=new WeakSet,TM=function(e){const{color:n,thickness:i,opacity:a,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,d)=>u!==n[d])||e.thickness!==i||e.opacity!==a||e.pageIndex!==c},$(Ou,"_type","ink"),$(Ou,"_editorType",Lt.INK),$(Ou,"_defaultDrawingOptions",null);let yA=Ou;class vA extends Qm{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const wy=8,hf=3;var Rc,Kt,wA,Bs,kM,PM,xA,e0,_M,MM,DM,AA,bA,LM;class Eo{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},a,c,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const g=200,y=p.font=`${n} ${i} ${g}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:S,actualBoundingBoxAscent:E,actualBoundingBoxDescent:C,fontBoundingBoxAscent:k,fontBoundingBoxDescent:M,width:_}=p.measureText(t),L=1.5,D=Math.ceil(Math.max(Math.abs(w)+Math.abs(S)||0,_)*L),F=Math.ceil(Math.max(Math.abs(E)+Math.abs(C)||g,Math.abs(k)+Math.abs(M)||g)*L);f=new OffscreenCanvas(D,F),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,F),p.fillStyle="black",p.fillText(t,D*(L-1)/2,F*(3-L)/2);const j=T(this,Kt,AA).call(this,p.getImageData(0,0,D,F).data),U=T(this,Kt,DM).call(this,j),G=T(this,Kt,bA).call(this,U),q=T(this,Kt,xA).call(this,j,D,F,G);return this.processDrawnLines({lines:{curves:q,width:D,height:F},pageWidth:a,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,a){const[c,u,d]=T(this,Kt,LM).call(this,t),[f,p]=T(this,Kt,MM).call(this,c,u,d,Math.hypot(u,d)*l(this,Rc).sigmaSFactor,l(this,Rc).sigmaR,l(this,Rc).kernelSize),g=T(this,Kt,bA).call(this,p),y=T(this,Kt,xA).call(this,f,u,d,g);return this.processDrawnLines({lines:{curves:y,width:u,height:d},pageWidth:e,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:c,areContours:u}){i%180!==0&&([e,n]=[n,e]);const{curves:d,width:f,height:p}=t,g=t.thickness??0,y=[],w=Math.min(e/f,n/p),S=w/e,E=w/n,C=[];for(const{points:M}of d){const _=c?T(this,Kt,_M).call(this,M):M;if(!_)continue;C.push(_);const L=_.length,D=new Float32Array(L),F=new Float32Array(3*(L===2?2:L-2));if(y.push({line:F,points:D}),L===2){D[0]=_[0]*S,D[1]=_[1]*E,F.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[j,U,G,q]=_;j*=S,U*=E,G*=S,q*=E,D.set([j,U,G,q],0),F.set([NaN,NaN,NaN,NaN,j,U],0);for(let J=4;J<L;J+=2){const vt=D[J]=_[J]*S,wt=D[J+1]=_[J+1]*E;F.set(ct.createBezierPoints(j,U,G,q,vt,wt),(J-2)*3),[j,U,G,q]=[G,q,vt,wt]}}if(y.length===0)return null;const k=u?new vA:new Qm;return k.build(y,e,n,1,i,u?0:g,a),{outline:k,newCurves:C,areContours:u,thickness:g,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:a}){let c=1/0,u=-1/0,d=0;for(const _ of t){d+=_.length;for(let L=2,D=_.length;L<D;L++){const F=_[L]-_[L-2];c=Math.min(c,F),u=Math.max(u,F)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,g=wy+hf*p,y=new Uint32Array(g);let w=0;y[w++]=g*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,y[w++]=0,y[w++]=i,y[w++]=a,y[w++]=e?0:1,y[w++]=Math.max(0,Math.floor(n??0)),y[w++]=p,y[w++]=f.BYTES_PER_ELEMENT;for(const _ of t)y[w++]=_.length-2,y[w++]=_[0],y[w++]=_[1];const S=new CompressionStream("deflate-raw"),E=S.writable.getWriter();await E.ready,E.write(y);const C=f.prototype.constructor;for(const _ of t){const L=new C(_.length-2);for(let D=2,F=_.length;D<F;D++)L[D-2]=_[D]-_[D-2];E.write(L)}E.close();const k=await new Response(S.readable).arrayBuffer();return new Uint8Array(k).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let c=null,u=0;for await(const _ of n)c||(c=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),c.set(_,u),u+=_.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],g=d[3],y=d[4]===0,w=d[5],S=d[6],E=d[7],C=[],k=(wy+hf*S)*Uint32Array.BYTES_PER_ELEMENT;let M;switch(E){case Int8Array.BYTES_PER_ELEMENT:M=new Int8Array(c.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:M=new Int16Array(c.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:M=new Int32Array(c.buffer,k);break}u=0;for(let _=0;_<S;_++){const L=d[hf*_+wy],D=new Float32Array(L+2);C.push(D);for(let F=0;F<hf-1;F++)D[F]=d[hf*_+wy+F+1];for(let F=0;F<L;F++)D[F+2]=D[F]+M[u++]}return{areContours:y,thickness:w,outlines:C,width:p,height:g}}catch(e){return _t(`decompressSignature: ${e}`),null}}}Rc=new WeakMap,Kt=new WeakSet,wA=function(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i},Bs=new WeakMap,kM=function(t,e,n,i,a,c,u){const d=T(this,Kt,wA).call(this,n,i,a,c);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,g=l(this,Bs)[2*p],y=l(this,Bs)[2*p+1];if(t[(n+g)*e+(i+y)]!==0)return p}return-1},PM=function(t,e,n,i,a,c,u){const d=T(this,Kt,wA).call(this,n,i,a,c);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,g=l(this,Bs)[2*p],y=l(this,Bs)[2*p+1];if(t[(n+g)*e+(i+y)]!==0)return p}return-1},xA=function(t,e,n,i){const a=t.length,c=new Int32Array(a);for(let p=0;p<a;p++)c[p]=t[p]<=i?1:0;for(let p=1;p<n-1;p++)c[p*e]=c[p*e+e-1]=0;for(let p=0;p<e;p++)c[p]=c[e*n-1-p]=0;let u=1,d;const f=[];for(let p=1;p<n-1;p++){d=1;for(let g=1;g<e-1;g++){const y=p*e+g,w=c[y];if(w===0)continue;let S=p,E=g;if(w===1&&c[y-1]===0)u+=1,E-=1;else if(w>=1&&c[y+1]===0)u+=1,E+=1,w>1&&(d=w);else{w!==1&&(d=Math.abs(w));continue}const C=[g,p],k=E===g+1,M={isHole:k,points:C,id:u,parent:0};f.push(M);let _;for(const J of f)if(J.id===d){_=J;break}_?_.isHole?M.parent=k?_.parent:d:M.parent=k?d:_.parent:M.parent=k?d:0;const L=T(this,Kt,kM).call(this,c,e,p,g,S,E,0);if(L===-1){c[y]=-u,c[y]!==1&&(d=Math.abs(c[y]));continue}let D=l(this,Bs)[2*L],F=l(this,Bs)[2*L+1];const j=p+D,U=g+F;S=j,E=U;let G=p,q=g;for(;;){const J=T(this,Kt,PM).call(this,c,e,G,q,S,E,1);D=l(this,Bs)[2*J],F=l(this,Bs)[2*J+1];const vt=G+D,wt=q+F;C.push(wt,vt);const yt=G*e+q;if(c[yt+1]===0?c[yt]=-u:c[yt]===1&&(c[yt]=u),vt===p&&wt===g&&G===j&&q===U){c[y]!==1&&(d=Math.abs(c[y]));break}else S=G,E=q,G=vt,q=wt}}}return f},e0=function(t,e,n,i){if(n-e<=4){for(let j=e;j<n-2;j+=2)i.push(t[j],t[j+1]);return}const a=t[e],c=t[e+1],u=t[n-4]-a,d=t[n-3]-c,f=Math.hypot(u,d),p=u/f,g=d/f,y=p*c-g*a,w=d/u,S=1/f,E=Math.atan(w),C=Math.cos(E),k=Math.sin(E),M=S*(Math.abs(C)+Math.abs(k)),_=S*(1-M+M**2),L=Math.max(Math.atan(Math.abs(k+C)*_),Math.atan(Math.abs(k-C)*_));let D=0,F=e;for(let j=e+2;j<n-2;j+=2){const U=Math.abs(y-p*t[j+1]+g*t[j]);U>D&&(F=j,D=U)}D>(f*L)**2?(T(this,Kt,e0).call(this,t,e,F+2,i),T(this,Kt,e0).call(this,t,F,n,i)):i.push(a,c)},_M=function(t){const e=[],n=t.length;return T(this,Kt,e0).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},MM=function(t,e,n,i,a,c){const u=new Float32Array(c**2),d=-2*i**2,f=c>>1;for(let E=0;E<c;E++){const C=(E-f)**2;for(let k=0;k<c;k++)u[E*c+k]=Math.exp((C+(k-f)**2)/d)}const p=new Float32Array(256),g=-2*a**2;for(let E=0;E<256;E++)p[E]=Math.exp(E**2/g);const y=t.length,w=new Uint8Array(y),S=new Uint32Array(256);for(let E=0;E<n;E++)for(let C=0;C<e;C++){const k=E*e+C,M=t[k];let _=0,L=0;for(let F=0;F<c;F++){const j=E+F-f;if(!(j<0||j>=n))for(let U=0;U<c;U++){const G=C+U-f;if(G<0||G>=e)continue;const q=t[j*e+G],J=u[F*c+U]*p[Math.abs(q-M)];_+=q*J,L+=J}}const D=w[k]=Math.round(_/L);S[D]++}return[w,S]},DM=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},AA=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,a=1/0;for(let u=0,d=n.length;u<d;u++){const f=n[u]=t[u<<2];i=Math.max(i,f),a=Math.min(a,f)}const c=255/(i-a);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-a)*c;return n},bA=function(t){let e,n=-1/0,i=-1/0;const a=t.findIndex(d=>d!==0);let c=a,u=a;for(e=a;e<256;e++){const d=t[e];d>n&&(e-c>i&&(i=e-c,u=e-1),n=d,c=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},LM=function(t){const e=t,{width:n,height:i}=t,{maxDim:a}=l(this,Rc);let c=n,u=i;if(n>a||i>a){let y=n,w=i,S=Math.log2(Math.max(n,i)/a);const E=Math.floor(S);S=S===E?E-1:E;for(let k=0;k<S;k++){c=Math.ceil(y/2),u=Math.ceil(w/2);const M=new OffscreenCanvas(c,u);M.getContext("2d").drawImage(t,0,0,y,w,0,0,c,u),y=c,w=u,t!==e&&t.close(),t=M.transferToImageBitmap()}const C=Math.min(a/c,a/u);c=Math.round(c*C),u=Math.round(u*C)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[T(this,Kt,AA).call(this,p),c,u]},b(Eo,Kt),b(Eo,Rc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(Eo,Bs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class wb extends AM{constructor(){super(),super.updateProperties({fill:pe._defaultLineColor,"stroke-width":0})}clone(){const t=new wb;return t.updateAll(this),t}}class xb extends lv{constructor(t){super(t),super.updateProperties({stroke:pe._defaultLineColor,"stroke-width":1})}clone(){const t=new xb(this._viewParameters);return t.updateAll(this),t}}var Va,xr,za,Fc;const wi=class wi extends k0{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});b(this,Va,!1);b(this,xr,null);b(this,za,null);b(this,Fc,null);this._willKeepAspectRatio=!0,x(this,za,e.signatureData||null),x(this,xr,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){pe.initialize(e,n),this._defaultDrawingOptions=new wb,this._defaultDrawnSignatureOptions=new xb(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Mt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,xr)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,za)){const{lines:a,mustSmooth:c,areContours:u,description:d,uuid:f,heightInPage:p}=l(this,za),{rawDims:{pageWidth:g,pageHeight:y},rotation:w}=this.parent.viewport,S=Eo.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:w,innerMargin:wi._INNER_MARGIN,mustSmooth:c,areContours:u});this.addSignature(S,p,d,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,xr)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){x(this,Fc,e),this.addEditToolbar()}getUuid(){return l(this,Fc)}get description(){return l(this,xr)}set description(e){x(this,xr,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:a,height:c}=l(this,za),u=Math.max(a,c),d=Eo.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:i,width:a,height:c},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,a){const{x:c,y:u}=this,{outline:d}=x(this,za,e);x(this,Va,d instanceof vA),this.description=i;let f;l(this,Va)?f=wi.getDefaultDrawingOptions():(f=wi._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:f});const[,p]=this.pageDimensions;let g=n/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=c,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Eo.process(e,n,i,a,wi._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:a},rotation:c}=this.parent.viewport;return Eo.extractContoursFromText(e,n,i,a,c,wi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Eo.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:a,innerMargin:wi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=wi.getDefaultDrawingOptions():(this._drawingOptions=wi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,c=Object.assign(super.serialize(e),{isSignature:!0,areContours:l(this,Va),color:[0,0,0],thickness:l(this,Va)?0:a});return this.addComment(c),e?(c.paths={lines:n,points:i},c.uuid=l(this,Fc),c.isCopy=!0):c.lines=n,l(this,xr)&&(c.accessibilityData={type:"Figure",alt:l(this,xr)}),c}static deserializeDraw(e,n,i,a,c,u){return u.areContours?vA.deserialize(e,n,i,a,c,u):Qm.deserialize(e,n,i,a,c,u)}static async deserialize(e,n,i){var c;const a=await super.deserialize(e,n,i);return x(a,Va,e.areContours),a.description=((c=e.accessibilityData)==null?void 0:c.alt)||"",x(a,Fc,e.uuid),a}};Va=new WeakMap,xr=new WeakMap,za=new WeakMap,Fc=new WeakMap,$(wi,"_type","signature"),$(wi,"_editorType",Lt.SIGNATURE),$(wi,"_defaultDrawingOptions",null);let SA=wi;var be,fn,Ua,wo,Ha,od,xo,Ic,Ar,Bi,ad,$t,Lf,Rf,n0,i0,s0,CA,r0,RM;class EA extends pe{constructor(e){super({...e,name:"stampEditor"});b(this,$t);b(this,be,null);b(this,fn,null);b(this,Ua,null);b(this,wo,null);b(this,Ha,null);b(this,od,"");b(this,xo,null);b(this,Ic,!1);b(this,Ar,null);b(this,Bi,!1);b(this,ad,!1);x(this,wo,e.bitmapUrl),x(this,Ha,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){pe.initialize(e,n)}static isHandlingMimeForPasting(e){return ax.includes(e)}static paste(e,n){n.pasteEditor({mode:Lt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:c,height:u}=e||this.copyCanvas(null,null,!0).imageData,d=await i.guess({name:"altText",request:{data:a,width:c,height:u,channels:a.length/(c*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;l(this,fn)&&(x(this,be,null),this._uiManager.imageManager.deleteId(l(this,fn)),(e=l(this,xo))==null||e.remove(),x(this,xo,null),l(this,Ar)&&(clearTimeout(l(this,Ar)),x(this,Ar,null))),super.remove()}rebuild(){if(!this.parent){l(this,fn)&&T(this,$t,n0).call(this);return}super.rebuild(),this.div!==null&&(l(this,fn)&&l(this,xo)===null&&T(this,$t,n0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Ua)||l(this,be)||l(this,wo)||l(this,Ha)||l(this,fn)||l(this,Ic))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Ic)||(l(this,be)?T(this,$t,i0).call(this):T(this,$t,n0).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(x(this,fn,i),a&&x(this,be,a),x(this,Ic,!1),T(this,$t,i0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Ar)!==null&&clearTimeout(l(this,Ar)),x(this,Ar,setTimeout(()=>{x(this,Ar,null),T(this,$t,CA).call(this)},200))}copyCanvas(e,n,i=!1){e||(e=224);const{width:a,height:c}=l(this,be),u=new Cr;let d=l(this,be),f=a,p=c,g=null;if(n){if(a>n||c>n){const j=Math.min(n/a,n/c);f=Math.floor(a*j),p=Math.floor(c*j)}g=document.createElement("canvas");const w=g.width=Math.ceil(f*u.sx),S=g.height=Math.ceil(p*u.sy);l(this,Bi)||(d=T(this,$t,s0).call(this,w,S));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let C="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":o3.isDarkMode&&(C="#8f8f9d",k="#42414d");const M=15,_=M*u.sx,L=M*u.sy,D=new OffscreenCanvas(_*2,L*2),F=D.getContext("2d");F.fillStyle=C,F.fillRect(0,0,_*2,L*2),F.fillStyle=k,F.fillRect(0,0,_,L),F.fillRect(_,L,_,L),E.fillStyle=E.createPattern(D,"repeat"),E.fillRect(0,0,w,S),E.drawImage(d,0,0,d.width,d.height,0,0,w,S)}let y=null;if(i){let w,S;if(u.symmetric&&d.width<e&&d.height<e)w=d.width,S=d.height;else if(d=l(this,be),a>e||c>e){const k=Math.min(e/a,e/c);w=Math.floor(a*k),S=Math.floor(c*k),l(this,Bi)||(d=T(this,$t,s0).call(this,w,S))}const C=new OffscreenCanvas(w,S).getContext("2d",{willReadFrequently:!0});C.drawImage(d,0,0,d.width,d.height,0,0,w,S),y={width:w,height:S,data:C.getImageData(0,0,w,S).data}}return{canvas:g,width:f,height:p,imageData:y}}static async deserialize(e,n,i){var C;let a=null,c=!1;if(e instanceof K2){const{data:{rect:k,rotation:M,id:_,structParent:L,popupRef:D,richText:F,contentsObj:j,creationDate:U,modificationDate:G},container:q,parent:{page:{pageNumber:J}},canvas:vt}=e;let wt,yt;vt?(delete e.canvas,{id:wt,bitmap:yt}=i.imageManager.getFromCanvas(q.id,vt),vt.remove()):(c=!0,e._hasNoCanvas=!0);const At=((C=await n._structTree.getAriaAttributes(`${Lu}${_}`))==null?void 0:C.get("aria-label"))||"";a=e={annotationType:Lt.STAMP,bitmapId:wt,bitmap:yt,pageIndex:J-1,rect:k.slice(0),rotation:M,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:At},isSvg:!1,structParent:L,popupRef:D,richText:F,comment:(j==null?void 0:j.str)||null,creationDate:U,modificationDate:G}}const u=await super.deserialize(e,n,i),{rect:d,bitmap:f,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:w}=e;c?(i.addMissingCanvas(e.id,u),x(u,Ic,!0)):g&&i.imageManager.isValidId(g)?(x(u,fn,g),f&&x(u,be,f)):x(u,wo,p),x(u,Bi,y);const[S,E]=u.pageDimensions;return u.width=(d[2]-d[0])/S,u.height=(d[3]-d[1])/E,w&&(u.altTextData=w),u._initialData=a,e.comment&&u.setCommentData(e),x(u,ad,!!a),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:l(this,fn),isSvg:l(this,Bi)});if(this.addComment(i),e)return i.bitmapUrl=T(this,$t,r0).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:c}=this.serializeAltText(!1);if(!a&&c&&(i.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const d=T(this,$t,RM).call(this,i);return d.isSame?null:(d.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const u=l(this,Bi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(l(this,fn)))n.stamps.set(l(this,fn),{area:u,serialized:i}),i.bitmap=T(this,$t,r0).call(this,!1);else if(l(this,Bi)){const d=n.stamps.get(l(this,fn));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=T(this,$t,r0).call(this,!1))}return i}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}be=new WeakMap,fn=new WeakMap,Ua=new WeakMap,wo=new WeakMap,Ha=new WeakMap,od=new WeakMap,xo=new WeakMap,Ic=new WeakMap,Ar=new WeakMap,Bi=new WeakMap,ad=new WeakMap,$t=new WeakSet,Lf=function(e,n=!1){if(!e){this.remove();return}x(this,be,e.bitmap),n||(x(this,fn,e.id),x(this,Bi,e.isSvg)),e.file&&x(this,od,e.file.name),T(this,$t,i0).call(this)},Rf=function(){if(x(this,Ua,null),this._uiManager.enableWaiting(!1),!!l(this,xo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,be)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,be)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},n0=function(){if(l(this,fn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,fn)).then(i=>T(this,$t,Lf).call(this,i,!0)).finally(()=>T(this,$t,Rf).call(this));return}if(l(this,wo)){const i=l(this,wo);x(this,wo,null),this._uiManager.enableWaiting(!0),x(this,Ua,this._uiManager.imageManager.getFromUrl(i).then(a=>T(this,$t,Lf).call(this,a)).finally(()=>T(this,$t,Rf).call(this)));return}if(l(this,Ha)){const i=l(this,Ha);x(this,Ha,null),this._uiManager.enableWaiting(!0),x(this,Ua,this._uiManager.imageManager.getFromFile(i).then(a=>T(this,$t,Lf).call(this,a)).finally(()=>T(this,$t,Rf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=ax.join(",");const n=this._uiManager._signal;x(this,Ua,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),T(this,$t,Lf).call(this,a)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>T(this,$t,Rf).call(this))),e.click()},i0=function(){var f;const{div:e}=this;let{width:n,height:i}=l(this,be);const[a,c]=this.pageDimensions,u=.75;if(this.width)n=this.width*a,i=this.height*c;else if(n>u*a||i>u*c){const p=Math.min(u*a/n,u*c/i);n*=p,i*=p}this._uiManager.enableWaiting(!1);const d=x(this,xo,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/a,this.height=i/c,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),T(this,$t,CA).call(this),l(this,ad)||(this.parent.addUndoableEditor(this),x(this,ad,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,od)&&this.div.setAttribute("aria-description",l(this,od)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},s0=function(e,n){const{width:i,height:a}=l(this,be);let c=i,u=a,d=l(this,be);for(;c>2*e||u>2*n;){const f=c,p=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const g=new OffscreenCanvas(c,u);g.getContext("2d").drawImage(d,0,0,f,p,0,0,c,u),d=g.transferToImageBitmap()}return d},CA=function(){const[e,n]=this.parentDimensions,{width:i,height:a}=this,c=new Cr,u=Math.ceil(i*e*c.sx),d=Math.ceil(a*n*c.sy),f=l(this,xo);if(!f||f.width===u&&f.height===d)return;f.width=u,f.height=d;const p=l(this,Bi)?l(this,be):T(this,$t,s0).call(this,u,d),g=f.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,u,d)},r0=function(e){if(e){if(l(this,Bi)){const a=this._uiManager.imageManager.getSvgUrl(l(this,fn));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,be),n.getContext("2d").drawImage(l(this,be),0,0),n.toDataURL()}if(l(this,Bi)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*Za.PDF_TO_CSS_UNITS),c=Math.round(this.height*i*Za.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(a,c);return u.getContext("2d").drawImage(l(this,be),0,0,l(this,be).width,l(this,be).height,0,0,a,c),u.transferToImageBitmap()}return structuredClone(l(this,be))},RM=function(e){var u;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=e.pageIndex===n,c=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&c,isSameAltText:c}},$(EA,"_type","stamp"),$(EA,"_editorType",Lt.STAMP);var Nc,ld,$a,Wa,Ao,fi,Ga,cd,ud,js,bo,pn,So,Xa,hd,mt,Ya,ue,kA,FM,Zs,PA,_A,o0;const Ps=class Ps{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:p}){b(this,ue);b(this,Nc);b(this,ld,!1);b(this,$a,null);b(this,Wa,null);b(this,Ao,null);b(this,fi,new Map);b(this,Ga,!1);b(this,cd,!1);b(this,ud,!1);b(this,js,null);b(this,bo,null);b(this,pn,null);b(this,So,null);b(this,Xa,null);b(this,hd,-1);b(this,mt);const g=[...l(Ps,Ya).values()];if(!Ps._initialized){Ps._initialized=!0;for(const y of g)y.initialize(p,t)}t.registerEditorTypes(g),x(this,mt,t),this.pageIndex=e,this.div=n,x(this,Nc,a),x(this,$a,c),this.viewport=f,x(this,pn,d),this.drawLayer=u,this._structTree=i,l(this,mt).addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return l(this,fi).size===0}get isInvisible(){return this.isEmpty&&l(this,mt).getMode()===Lt.NONE}updateToolbar(t){l(this,mt).updateToolbar(t)}updateMode(t=l(this,mt).getMode()){switch(T(this,ue,o0).call(this),t){case Lt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Lt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Lt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Lt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of l(Ps,Ya).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,pn))==null?void 0:e.div)}setEditingState(t){l(this,mt).setEditingState(t)}addCommands(t){l(this,mt).addCommands(t)}cleanUndoStack(t){l(this,mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,$a))==null||e.togglePointerEvents(t)}async enable(){var n;x(this,ud,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=l(this,Xa))==null||n.abort(),x(this,Xa,null);const t=new Set;for(const i of l(this,ue,kA))i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,mt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=l(this,$a);if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),l(this,mt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}x(this,ud,!1),l(this,mt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(x(this,cd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,pn)&&!l(this,Xa)){x(this,Xa,new AbortController);const a=l(this,mt).combinedSignal(l(this,Xa));l(this,pn).div.addEventListener("pointerdown",c=>{const{clientX:d,clientY:f,timeStamp:p}=c,g=l(this,hd);if(p-g>500){x(this,hd,p);return}x(this,hd,-1);const{classList:y}=this.div;y.toggle("getElements",!0);const w=document.elementsFromPoint(d,f);if(y.toggle("getElements",!1),!this.div.contains(w[0]))return;let S;const E=new RegExp(`^${Hf}[0-9]+$`);for(const k of w)if(E.test(k.id)){S=k.id;break}if(!S)return;const C=l(this,fi).get(S);(C==null?void 0:C.annotationElementId)===null&&(c.stopPropagation(),c.preventDefault(),C.dblclick(c))},{signal:a,capture:!0})}const t=l(this,$a),e=[];if(t){const a=new Map,c=new Map;for(const d of l(this,ue,kA)){if(d.disableEditing(),!d.annotationElementId){e.push(d);continue}if(d.serialize()!==null){a.set(d.annotationElementId,d);continue}else c.set(d.annotationElementId,d);(i=this.getEditableAnnotation(d.annotationElementId))==null||i.show(),d.remove()}const u=t.getEditableAnnotations();for(const d of u){const{id:f}=d.data;if(l(this,mt).isDeletedAnnotationElement(f)){d.updateEdited({deleted:!0});continue}let p=c.get(f);if(p){p.resetAnnotationElement(d),p.show(!1),d.show();continue}p=a.get(f),p&&(l(this,mt).addChangedExistingAnnotation(p),p.renderAnnotationElement(d)&&p.show(!1)),d.show()}}T(this,ue,o0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of l(Ps,Ya).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),x(this,cd,!1)}getEditableAnnotation(t){var e;return((e=l(this,$a))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,mt).getActive()!==t&&l(this,mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,pn))!=null&&t.div&&!l(this,So)){x(this,So,new AbortController);const e=l(this,mt).combinedSignal(l(this,So));l(this,pn).div.addEventListener("pointerdown",T(this,ue,FM).bind(this),{signal:e}),l(this,pn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,pn))!=null&&t.div&&l(this,So)&&(l(this,So).abort(),x(this,So,null),l(this,pn).div.classList.remove("highlighting"))}enableClick(){if(l(this,Wa))return;x(this,Wa,new AbortController);const t=l(this,mt).combinedSignal(l(this,Wa));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,Wa))==null||t.abort(),x(this,Wa,null)}attach(t){l(this,fi).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,mt).isDeletedAnnotationElement(e)&&l(this,mt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,fi).delete(t.id),(e=l(this,Nc))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,cd)&&t.annotationElementId&&l(this,mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,mt).addDeletedAnnotationElement(t),pe.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,ud)),l(this,mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Ao)&&(t._focusEventsAllowed=!1,x(this,Ao,setTimeout(()=>{x(this,Ao,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,mt)._signal}),e.focus())},0))),t._structTreeParentId=(n=l(this,Nc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of l(this,fi).values())if(e.uid===t)return e;return null}getNextId(){return l(this,mt).getId()}combinedSignal(t){return l(this,mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,ue,Zs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await l(this,mt).updateMode(t.mode);const{offsetX:n,offsetY:i}=T(this,ue,_A).call(this),a=this.getNextId(),c=T(this,ue,PA).call(this,{parent:this,id:a,x:n,y:i,uiManager:l(this,mt),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){var e;return await((e=l(Ps,Ya).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,mt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),a=T(this,ue,PA).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:l(this,mt),isCentered:e,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(T(this,ue,_A).call(this),!0,t)}setSelected(t){l(this,mt).setSelected(t)}toggleSelected(t){l(this,mt).toggleSelected(t)}unselect(t){l(this,mt).unselect(t)}pointerup(t){var i;const{isMac:e}=sn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Ga)||(x(this,Ga,!1),(i=l(this,ue,Zs))!=null&&i.isDrawer&&l(this,ue,Zs).supportMultipleDrawings))return;if(!l(this,ld)){x(this,ld,!0);return}const n=l(this,mt).getMode();if(n===Lt.STAMP||n===Lt.SIGNATURE){l(this,mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var i;if(l(this,mt).getMode()===Lt.HIGHLIGHT&&this.enableTextSelection(),l(this,Ga)){x(this,Ga,!1);return}const{isMac:e}=sn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,Ga,!0),(i=l(this,ue,Zs))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=l(this,mt).getActive();x(this,ld,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,js)){l(this,ue,Zs).startDrawing(this,l(this,mt),!1,t);return}l(this,mt).setCurrentDrawingSession(this),x(this,js,new AbortController);const e=l(this,mt).combinedSignal(l(this,js));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(x(this,bo,null),this.commitOrRemove())},{signal:e}),l(this,ue,Zs).startDrawing(this,l(this,mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,bo,e);return}l(this,bo)&&setTimeout(()=>{var e;(e=l(this,bo))==null||e.focus(),x(this,bo,null)},0)}endDrawingSession(t=!1){return l(this,js)?(l(this,mt).setCurrentDrawingSession(null),l(this,js).abort(),x(this,js,null),x(this,bo,null),l(this,ue,Zs).endDrawing(t)):null}findNewParent(t,e,n){const i=l(this,mt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return l(this,js)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,js)&&l(this,ue,Zs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,mt).getActive())==null?void 0:t.parent)===this&&(l(this,mt).commitOrRemove(),l(this,mt).setActiveEditor(null)),l(this,Ao)&&(clearTimeout(l(this,Ao)),x(this,Ao,null));for(const n of l(this,fi).values())(e=l(this,Nc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,fi).clear(),l(this,mt).removeLayer(this)}render({viewport:t}){this.viewport=t,Vc(this.div,t);for(const e of l(this,mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,mt).commitOrRemove(),T(this,ue,o0).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Vc(this.div,{rotation:n}),e!==n)for(const i of l(this,fi).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,mt).viewParameters.realScale}};Nc=new WeakMap,ld=new WeakMap,$a=new WeakMap,Wa=new WeakMap,Ao=new WeakMap,fi=new WeakMap,Ga=new WeakMap,cd=new WeakMap,ud=new WeakMap,js=new WeakMap,bo=new WeakMap,pn=new WeakMap,So=new WeakMap,Xa=new WeakMap,hd=new WeakMap,mt=new WeakMap,Ya=new WeakMap,ue=new WeakSet,kA=function(){return l(this,fi).size!==0?l(this,fi).values():l(this,mt).getEditors(this.pageIndex)},FM=function(t){l(this,mt).unselectAll();const{target:e}=t;if(e===l(this,pn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,pn).div.contains(e)){const{isMac:n}=sn.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,mt).showAllEditors("highlight",!0,!0),l(this,pn).div.classList.add("free"),this.toggleDrawing(),T0.startHighlighting(this,l(this,mt).direction==="ltr",{target:l(this,pn).div,x:t.x,y:t.y}),l(this,pn).div.addEventListener("pointerup",()=>{l(this,pn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,mt)._signal}),t.preventDefault()}},Zs=function(){return l(Ps,Ya).get(l(this,mt).getMode())},PA=function(t){const e=l(this,ue,Zs);return e?new e.prototype.constructor(t):null},_A=function(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,a=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+i),f=(a+u)/2-t,p=(c+d)/2-e,[g,y]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:y}},o0=function(){for(const t of l(this,fi).values())t.isEmpty()&&t.remove()},$(Ps,"_initialized",!1),b(Ps,Ya,new Map([aA,yA,EA,T0,SA].map(t=>[t._editorType,t])));let TA=Ps;var Vs,Gn,Oc,Um,G0,IM,kr,DA,NM,LA;const Je=class Je{constructor(){b(this,kr);b(this,Vs,null);b(this,Gn,new Map);b(this,Oc,new Map)}setParent(t){if(!l(this,Vs)){x(this,Vs,t);return}if(l(this,Vs)!==t){if(l(this,Gn).size>0)for(const e of l(this,Gn).values())e.remove(),t.append(e);x(this,Vs,t)}}static get _svgFactory(){return Mt(this,"_svgFactory",new E0)}draw(t,e=!1,n=!1){const i=Qe(Je,Um)._++,a=T(this,kr,DA).call(this),c=Je._svgFactory.createElement("defs");a.append(c);const u=Je._svgFactory.createElement("path");c.append(u);const d=`path_${i}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,Oc).set(i,u);const f=n?T(this,kr,NM).call(this,c,d):null,p=Je._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(a,t),l(this,Gn).set(i,a),{id:i,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=Qe(Je,Um)._++,i=T(this,kr,DA).call(this),a=Je._svgFactory.createElement("defs");i.append(a);const c=Je._svgFactory.createElement("path");a.append(c);const u=`path_${n}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const g=Je._svgFactory.createElement("mask");a.append(g),d=`mask_${n}`,g.setAttribute("id",d),g.setAttribute("maskUnits","objectBoundingBox");const y=Je._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=Je._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${u}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const f=Je._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return i.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(i,t),l(this,Gn).set(n,i),n}finalizeDraw(t,e){l(this,Oc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:n,bbox:i,rootClass:a,path:c}=e,u=typeof t=="number"?l(this,Gn).get(t):t;if(u){if(n&&T(this,kr,LA).call(this,u,n),i&&T(d=Je,G0,IM).call(d,u,i),a){const{classList:f}=u;for(const[p,g]of Object.entries(a))f.toggle(p,g)}if(c){const p=u.firstElementChild.firstElementChild;T(this,kr,LA).call(this,p,c)}}}updateParent(t,e){if(e===this)return;const n=l(this,Gn).get(t);n&&(l(e,Vs).append(n),l(this,Gn).delete(t),l(e,Gn).set(t,n))}remove(t){l(this,Oc).delete(t),l(this,Vs)!==null&&(l(this,Gn).get(t).remove(),l(this,Gn).delete(t))}destroy(){x(this,Vs,null);for(const t of l(this,Gn).values())t.remove();l(this,Gn).clear(),l(this,Oc).clear()}};Vs=new WeakMap,Gn=new WeakMap,Oc=new WeakMap,Um=new WeakMap,G0=new WeakSet,IM=function(t,[e,n,i,a]){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*i}%`,c.height=`${100*a}%`},kr=new WeakSet,DA=function(){const t=Je._svgFactory.create(1,1,!0);return l(this,Vs).append(t),t.setAttribute("aria-hidden",!0),t},NM=function(t,e){const n=Je._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Je._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),i},LA=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},b(Je,G0),b(Je,Um,0);let MA=Je;globalThis._pdfjsTestingUtils={HighlightOutliner:cA};globalThis.pdfjsLib={AbortException:Qa,AnnotationEditorLayer:TA,AnnotationEditorParamsType:jt,AnnotationEditorType:Lt,AnnotationEditorUIManager:zc,AnnotationLayer:rA,AnnotationMode:ta,AnnotationType:$e,applyOpacity:l3,build:mj,ColorPicker:b0,createValidAbsoluteUrl:p_,CSSConstants:a3,DOMSVGFactory:E0,DrawLayer:MA,FeatureTest:sn,fetchData:Xm,findContrastColor:c3,getDocument:R2,getFilenameFromUrl:e3,getPdfFilenameFromUrl:n3,getRGB:Km,getUuid:g_,getXfaPageViewport:s3,GlobalWorkerOptions:br,ImageKind:Ty,InvalidPDFException:rx,isDataScheme:nv,isPdfFile:fb,isValidExplicitDest:x3,MathClamp:En,noContextMenu:ys,normalizeUnicode:JB,OPS:$f,OutputScale:Cr,PagesMapper:Gf,PasswordResponses:HB,PDFDataRangeTransport:F2,PDFDateString:g0,PDFWorker:Yf,PermissionFlag:UB,PixelsPerInch:Za,RenderingCancelledException:db,renderRichText:v_,ResponseException:m0,setLayerDimensions:Vc,shadow:Mt,SignatureExtractor:Eo,stopEvent:Ne,SupportedImageMimeTypes:ax,TextLayer:Xf,TouchManager:v0,updateUrlHash:m_,Util:rt,VerbosityLevel:Z0,version:pj,XfaLayer:y_};const jj="/assets/pdf.worker.min-wgc6bjNh.mjs";br.workerSrc=jj;let L1=null;function Vj(){return L1||(L1=R2("/pdf.pdf").promise),L1}function Ab({pageNumber:r,width:t=700,className:e="",children:n}){const i=Z.useRef(null),[a,c]=Z.useState({cssWidth:0,cssHeight:0,pdfWidth:612,pdfHeight:792});Z.useEffect(()=>{let d=!1;async function f(){const g=await(await Vj()).getPage(r);if(d)return;const y=g.getViewport({scale:1}),w=window.devicePixelRatio||1,E=t/y.width*w,C=g.getViewport({scale:E}),k=i.current;k.width=C.width,k.height=C.height;const M=Math.round(t*(y.height/y.width));c({cssWidth:t,cssHeight:M,pdfWidth:y.width,pdfHeight:y.height});const _=k.getContext("2d");await g.render({canvasContext:_,viewport:C}).promise}return f(),()=>{d=!0}},[r,t]);const u=a.cssHeight||Math.round(t*1.294);return I.jsxs("div",{className:`relative ${e}`,style:{width:a.cssWidth||t,height:u},children:[I.jsx("canvas",{ref:i,style:{width:a.cssWidth||t,height:u,display:"block"}}),n&&a.cssWidth>0&&I.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{width:a.cssWidth,height:a.cssHeight},viewBox:`0 0 ${a.pdfWidth} ${a.pdfHeight}`,preserveAspectRatio:"xMinYMin meet",children:n})]})}function zj({isActive:r}){const[t,e]=Z.useState(0);return Z.useEffect(()=>{if(!r){e(0);return}const n=setTimeout(()=>e(1),800),i=setTimeout(()=>e(2),2e3),a=setTimeout(()=>e(3),3200);return()=>[n,i,a].forEach(clearTimeout)},[r]),I.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-[#F2F2F7]",children:I.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-auto",children:I.jsx(jc,{mode:"wait",children:t<3?I.jsx(te.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{duration:.4},className:"w-full max-w-2xl",children:I.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-[#E5E5EA] overflow-hidden",children:[I.jsxs("div",{className:"bg-gradient-to-r from-[#6366F1] to-[#8B5CF6] px-6 py-4 flex items-center gap-3",children:[I.jsx($O,{size:20,color:"white"}),I.jsx("span",{className:"text-white font-semibold",style:{fontFamily:"Inter"},children:"Office Hours  Upload Assignment"})]}),I.jsxs("div",{className:"p-8",children:[I.jsxs("div",{className:"text-center mb-6",children:[I.jsx("p",{className:"text-[#1C1C1E] font-semibold mb-1",style:{fontFamily:"Inter",fontSize:18},children:"CS 103  Mathematical Foundations of Computing"}),I.jsx("p",{className:"text-[#8E8E93] text-sm",style:{fontFamily:"Inter"},children:"Upload your homework to get started"})]}),I.jsx(te.div,{animate:t===1?{borderColor:"#6366F1",backgroundColor:"#F0F0FF"}:{},className:"border-2 border-dashed border-[#D1D1D6] rounded-2xl p-12 flex flex-col items-center gap-4 relative overflow-hidden transition-colors",children:I.jsxs(jc,{children:[t===0&&I.jsxs(te.div,{initial:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center gap-4",children:[I.jsx("div",{className:"w-16 h-16 rounded-2xl bg-[#F2F2F7] flex items-center justify-center",children:I.jsx(KT,{size:28,className:"text-[#8E8E93]"})}),I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"text-[#1C1C1E] font-medium",style:{fontFamily:"Inter"},children:"Drop your PDF here or tap to browse"}),I.jsx("p",{className:"text-[#8E8E93] text-sm mt-1",style:{fontFamily:"Inter"},children:"Supports PDF, images, and scanned documents"})]})]},"idle"),t>=1&&t<2&&I.jsxs(te.div,{initial:{y:-80,opacity:0,rotate:-5},animate:{y:0,opacity:1,rotate:0},transition:{type:"spring",stiffness:200,damping:20},className:"flex flex-col items-center gap-3",children:[I.jsxs("div",{className:"w-16 h-20 bg-white rounded-xl border-2 border-[#6366F1] shadow-lg flex flex-col items-center justify-center gap-1",children:[I.jsx(tB,{size:24,className:"text-[#6366F1]"}),I.jsx("span",{className:"text-[8px] text-[#6366F1] font-bold",style:{fontFamily:"Inter"},children:"PDF"})]}),I.jsx("p",{className:"text-[#6366F1] text-sm font-medium",style:{fontFamily:"Inter"},children:"CS103_ProblemSet1.pdf"})]},"dropping"),t>=2&&I.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full flex flex-col items-center gap-4",children:[I.jsx("div",{className:"w-14 h-14 rounded-2xl bg-[#6366F1]/10 flex items-center justify-center",children:I.jsx(te.div,{animate:t<3?{rotate:360}:{},transition:{duration:1,repeat:1/0,ease:"linear"},children:t<3?I.jsx(KT,{size:24,className:"text-[#6366F1]"}):I.jsx(d_,{size:24,className:"text-[#10B981]"})})}),I.jsxs("div",{className:"w-full max-w-xs",children:[I.jsxs("div",{className:"flex justify-between text-xs mb-1",style:{fontFamily:"Inter"},children:[I.jsx("span",{className:"text-[#6B7280]",children:"CS103_ProblemSet1.pdf"}),I.jsx("span",{className:"text-[#6366F1]",children:t<3?"Uploading...":"Done!"})]}),I.jsx("div",{className:"h-2 bg-[#E5E5EA] rounded-full overflow-hidden",children:I.jsx(te.div,{initial:{width:"0%"},animate:{width:t>=2?"100%":"0%"},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-[#6366F1] to-[#8B5CF6] rounded-full"})})]})]},"uploading")]})})]})]})},"upload"):I.jsx(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center gap-6 pb-8",children:[1,2,3].map(n=>I.jsx(Ab,{pageNumber:n,width:680,className:"rounded-lg shadow-xl"},n))},"pdf-view")})})})}function Cl({lines:r,isActive:t,onComplete:e}){const[n,i]=Z.useState({}),a=Z.useRef([]);return Z.useEffect(()=>{if(t)return a.current.forEach(clearTimeout),a.current=[],r.forEach(c=>{const u=c.charSpeed??32;for(let d=1;d<=c.text.length;d++){const f=setTimeout(()=>{if(i(p=>({...p,[c.id]:d})),d===c.text.length&&e){const p=r[r.length-1];c.id===p.id&&e()}},c.startDelay+d*u);a.current.push(f)}}),()=>a.current.forEach(clearTimeout)},[t]),I.jsx(I.Fragment,{children:r.map(c=>{const u=n[c.id]||0,d=u>0&&u<c.text.length;return I.jsxs("text",{x:c.x,y:c.y,fill:c.color,fontSize:c.fontSize,fontFamily:"Caveat, cursive",fontWeight:c.fontWeight||"normal",children:[c.text.slice(0,u),d&&I.jsx("tspan",{fill:c.color,opacity:.6,style:{animation:"blink 0.8s step-end infinite"},children:"|"})]},c.id)})})}function Uj({circles:r,isActive:t}){const[e,n]=Z.useState({}),i=Z.useRef([]);return Z.useEffect(()=>{if(t)return i.current.forEach(clearTimeout),i.current=[],r.forEach(a=>{const c=setTimeout(()=>{n(u=>({...u,[a.id]:!0}))},a.startDelay);i.current.push(c)}),()=>i.current.forEach(clearTimeout)},[t]),I.jsxs(I.Fragment,{children:[r.map(a=>{if(!e[a.id])return null;const c=`M ${a.cx-a.rx} ${a.cy} a ${a.rx} ${a.ry} 0 1 0 ${2*a.rx} 0 a ${a.rx} ${a.ry} 0 1 0 ${-2*a.rx} 0`;return I.jsx("path",{d:c,fill:"none",stroke:a.color,strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:"1000",strokeDashoffset:"0",style:{strokeDashoffset:"1000",animation:"drawPath 0.9s ease-out forwards"}},a.id)}),I.jsx("style",{children:`
        @keyframes drawPath {
          to { stroke-dashoffset: 0; }
        }
        @keyframes blink {
          0%, 100% { opacity: 0.6; }
          50% { opacity: 0; }
        }
      `})]})}const Hj=[{id:"ex1",text:"1 = 1",x:80,y:255,color:"#1C1C1E",fontSize:16,startDelay:600,charSpeed:32},{id:"ex2",text:"3 = 9",x:80,y:280,color:"#1C1C1E",fontSize:16,startDelay:1600,charSpeed:32},{id:"ex3",text:"5 = 25  ...",x:80,y:305,color:"#1C1C1E",fontSize:16,startDelay:2600,charSpeed:32}],$j=[{id:"ai1",text:"1  =  2  0  +  1",x:200,y:255,color:"#6366F1",fontSize:15,startDelay:200,charSpeed:20},{id:"ai2",text:"3  =  2  1  +  1",x:200,y:280,color:"#6366F1",fontSize:15,startDelay:900,charSpeed:20},{id:"ai3",text:"5  =  2  2  +  1",x:200,y:305,color:"#6366F1",fontSize:15,startDelay:1600,charSpeed:20},{id:"aiq",text:" can you generalise this to any odd n ?",x:80,y:345,color:"#6366F1",fontSize:15,startDelay:2500,charSpeed:18}],Wj=[{id:"p1",text:"Let n be any odd integer.",x:80,y:400,color:"#1C1C1E",fontSize:16,startDelay:0,charSpeed:28},{id:"p2",text:"Then  n = 2k + 1   for some integer  k.",x:80,y:425,color:"#1C1C1E",fontSize:16,startDelay:3800,charSpeed:26},{id:"p3",text:"  n = (2k + 1)  =  4k + 4k + 1",x:80,y:460,color:"#1C1C1E",fontSize:16,startDelay:7900,charSpeed:25},{id:"p4",text:"        = 2(2k + 2k) + 1",x:80,y:485,color:"#1C1C1E",fontSize:16,startDelay:11300,charSpeed:25},{id:"p5",text:"This has the form 2m + 1,  so  n  is odd.",x:80,y:520,color:"#1C1C1E",fontSize:16,startDelay:14950,charSpeed:26},{id:"p6",text:"  n is odd for every odd integer n.   ",x:80,y:555,color:"#1C1C1E",fontSize:16,fontWeight:"600",startDelay:18550,charSpeed:25}];function Gj({isActive:r}){const[t,e]=Z.useState(0),[n,i]=Z.useState(!1),a=Z.useRef([]);Z.useEffect(()=>{if(!r){e(0),i(!1);return}a.current.forEach(clearTimeout),a.current=[];const f=(p,g)=>{a.current.push(setTimeout(p,g))};return f(()=>e(1),400),f(()=>e(3),5500),f(()=>{e(4),i(!0)},6500),f(()=>i(!1),12e3),f(()=>e(6),16e3),f(()=>e(7),38500),()=>a.current.forEach(clearTimeout)},[r]);const c=t>=4,u=t>=4,d=t>=6;return I.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative bg-[#F2F2F7]",children:[I.jsx("div",{className:"flex-1 overflow-auto flex items-start justify-center py-5 px-4",children:I.jsx("div",{className:"relative",children:I.jsxs(Ab,{pageNumber:2,width:700,className:"rounded-lg shadow-xl",children:[t>=1&&I.jsx(Cl,{lines:Hj,isActive:t>=1}),c&&I.jsx(Uj,{isActive:!0,circles:[{id:"c1",cx:102,cy:250,rx:38,ry:13,color:"#6366F1",startDelay:0},{id:"c2",cx:102,cy:275,rx:38,ry:13,color:"#6366F1",startDelay:850},{id:"c3",cx:115,cy:300,rx:50,ry:13,color:"#6366F1",startDelay:1700}]}),u&&I.jsx(Cl,{lines:$j,isActive:u}),d&&I.jsx("line",{x1:"80",y1:"375",x2:"480",y2:"375",stroke:"#E5E5EA",strokeWidth:"0.8"}),d&&I.jsx(Cl,{lines:Wj,isActive:d}),t>=7&&I.jsx("text",{x:"80",y:"595",fontSize:"15",fill:"#10B981",fontFamily:"Caveat, cursive",fontWeight:"600",children:" Proof complete!"})]})})}),I.jsxs("div",{className:"absolute right-5 top-1/2 -translate-y-1/2 z-40 flex flex-col items-center gap-3",children:[I.jsxs("div",{className:"relative",children:[t===3&&I.jsx(te.div,{animate:{scale:[1,1.8,1],opacity:[.6,0,.6]},transition:{duration:1.1,repeat:1/0},className:"absolute inset-0 rounded-2xl bg-[#6366F1]"}),n&&I.jsx(te.div,{animate:{rotate:360},transition:{duration:1.4,repeat:1/0,ease:"linear"},className:"absolute -inset-1.5 rounded-3xl border-2 border-transparent border-t-[#6366F1] border-r-[#8B5CF6]"}),I.jsx("button",{className:`relative w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg transition-colors ${t>=4?"bg-gradient-to-br from-[#5558E3] to-[#7C3AED]":"bg-gradient-to-br from-[#6366F1] to-[#8B5CF6]"}`,style:{boxShadow:"0 4px 16px rgba(99,102,241,0.45)"},children:I.jsx(Q0,{size:20,color:"white"})}),I.jsx(jc,{children:n&&I.jsxs(te.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:8},className:"absolute right-14 top-1/2 -translate-y-1/2 bg-white rounded-xl px-2.5 py-1.5 shadow-md border border-[#E5E5EA] flex items-center gap-1.5 whitespace-nowrap",children:[[0,.15,.3].map((f,p)=>I.jsx(te.div,{animate:{y:[0,-3,0]},transition:{duration:.5,repeat:1/0,delay:f},className:"w-1.5 h-1.5 rounded-full bg-[#6366F1]"},p)),I.jsx("span",{className:"text-[11px] text-[#6366F1] font-medium",style:{fontFamily:"Inter"},children:"AI annotating"})]})})]}),I.jsx("div",{className:"relative",children:I.jsx(te.button,{animate:{backgroundColor:"#F2F2F7"},className:"relative w-12 h-12 rounded-2xl flex items-center justify-center shadow-md",style:{boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:I.jsx(hb,{size:20,className:"text-[#6B7280]"})})})]})]})}const Xj=[{id:"a1",text:"Let  mn = 2k  and  m = 2p + 1   ( k, p   )",x:80,y:255,color:"#1C1C1E",fontSize:15,startDelay:600,charSpeed:26},{id:"a2",text:"Then  2k  =  (2p + 1)  n",x:80,y:280,color:"#1C1C1E",fontSize:15,startDelay:3200,charSpeed:26},{id:"a3",text:"     n  =  2k / (2p + 1)   ",x:80,y:305,color:"#1C1C1E",fontSize:15,startDelay:5e3,charSpeed:26}],Yj=[{id:"h1",text:"consider: proof by contradiction?",x:80,y:350,color:"#6366F1",fontSize:14,startDelay:0,charSpeed:18}],Kj=[{id:"h2",text:"  assume n is odd    find contradiction",x:80,y:375,color:"#6366F1",fontSize:14,startDelay:0,charSpeed:18}],qj=[{id:"pr0",text:"Proof by Contradiction:",x:80,y:420,color:"#1C1C1E",fontSize:15,fontWeight:"600",startDelay:0,charSpeed:27},{id:"pr1",text:"Assume for contradiction that n is odd.",x:80,y:445,color:"#1C1C1E",fontSize:15,startDelay:4e3,charSpeed:26},{id:"pr2",text:"Then  n = 2q + 1   for some  q  .",x:80,y:470,color:"#1C1C1E",fontSize:15,startDelay:8500,charSpeed:26},{id:"pr3",text:"mn = (2p+1)(2q+1) = 4pq + 2p + 2q + 1",x:80,y:505,color:"#1C1C1E",fontSize:15,startDelay:13500,charSpeed:24},{id:"pr4",text:"    = 2(2pq + p + q) + 1",x:80,y:530,color:"#1C1C1E",fontSize:15,startDelay:18e3,charSpeed:24},{id:"pr5",text:"But mn is EVEN  Contradiction!  ",x:80,y:570,color:"#EF4444",fontSize:15,fontWeight:"600",startDelay:22e3,charSpeed:24},{id:"pr6",text:"  n must be even.   ",x:80,y:610,color:"#1C1C1E",fontSize:15,fontWeight:"700",startDelay:27e3,charSpeed:26}];function Qj({isActive:r}){const[t,e]=Z.useState(0),[n,i]=Z.useState(!1),a=Z.useRef([]);Z.useEffect(()=>{if(!r){e(0),i(!1);return}a.current.forEach(clearTimeout),a.current=[];const p=(g,y)=>{a.current.push(setTimeout(g,y))};return p(()=>e(1),400),p(()=>e(2),8e3),p(()=>{e(3),i(!0)},11500),p(()=>{e(4),i(!1)},15e3),p(()=>e(5),17e3),p(()=>{e(6),i(!0)},21e3),p(()=>{e(7),i(!1)},24500),p(()=>e(8),26500),p(()=>e(9),30500),p(()=>e(10),63e3),()=>a.current.forEach(clearTimeout)},[r]);const c=t>=2,u=t>=5,d=t>=8,f=t>=9;return I.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative bg-[#F2F2F7]",children:[I.jsx("div",{className:"flex-1 overflow-auto flex items-start justify-center py-5 px-4",children:I.jsx("div",{className:"relative",children:I.jsxs(Ab,{pageNumber:3,width:700,className:"rounded-lg shadow-xl",children:[t>=1&&I.jsx(Cl,{lines:Xj,isActive:t>=1}),c&&I.jsx("line",{x1:"78",y1:"301",x2:"330",y2:"309",stroke:"#EF4444",strokeWidth:"2",strokeLinecap:"round",opacity:"0.7",strokeDasharray:"320",style:{strokeDashoffset:"320",animation:"drawPath 0.45s ease-out forwards"}}),u&&I.jsx(Cl,{lines:Yj,isActive:!0}),d&&I.jsx(Cl,{lines:Kj,isActive:!0}),f&&I.jsx("line",{x1:"80",y1:"398",x2:"480",y2:"398",stroke:"#E5E5EA",strokeWidth:"0.8"}),f&&I.jsx(Cl,{lines:qj,isActive:f}),t>=10&&I.jsx("text",{x:"80",y:"655",fontSize:"15",fill:"#10B981",fontFamily:"Caveat, cursive",fontWeight:"600",children:" Proof complete!"})]})})}),I.jsxs("div",{className:"absolute right-5 top-1/2 -translate-y-1/2 z-40 flex flex-col items-center gap-3",children:[I.jsxs("div",{className:"relative",children:[t===2&&I.jsx(te.div,{animate:{scale:[1,1.8,1],opacity:[.6,0,.6]},transition:{duration:1.1,repeat:1/0},className:"absolute inset-0 rounded-2xl bg-[#6366F1]"}),I.jsx("button",{className:"w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg bg-gradient-to-br from-[#6366F1] to-[#8B5CF6]",style:{boxShadow:"0 4px 16px rgba(99,102,241,0.4)"},children:I.jsx(Q0,{size:20,color:"white"})})]}),I.jsxs("div",{className:"relative",children:[n&&I.jsxs(I.Fragment,{children:[I.jsx(te.div,{animate:{scale:[1,1.9,1],opacity:[.5,0,.5]},transition:{duration:1,repeat:1/0},className:"absolute inset-0 rounded-2xl bg-[#EF4444]"}),I.jsx(te.div,{animate:{scale:[1,1.5,1],opacity:[.4,0,.4]},transition:{duration:1,repeat:1/0,delay:.3},className:"absolute inset-0 rounded-2xl bg-[#EF4444]"})]}),I.jsx(te.button,{animate:n?{backgroundColor:"#EF4444"}:{backgroundColor:"#F2F2F7"},transition:{duration:.2},className:"relative w-12 h-12 rounded-2xl flex items-center justify-center shadow-md",style:{boxShadow:n?"0 4px 16px rgba(239,68,68,0.45)":"0 2px 8px rgba(0,0,0,0.08)"},children:n?I.jsx(cB,{size:20,color:"white"}):I.jsx(hb,{size:20,className:"text-[#6B7280]"})}),I.jsx(jc,{children:n&&I.jsx(te.div,{initial:{opacity:0,x:8},animate:{opacity:1,x:0},exit:{opacity:0,x:8},className:"absolute right-14 top-1/2 -translate-y-1/2 bg-white rounded-xl px-2.5 py-1.5 shadow-md border border-[#FEE2E2] flex items-center gap-0.5",children:[2,4,3,5,3,4,2,5,3,4].map((p,g)=>I.jsx(te.div,{animate:{scaleY:[1,p/3,1]},transition:{duration:.35,repeat:1/0,delay:g*.05},className:"w-1 bg-[#EF4444] rounded-full origin-center",style:{height:18}},g))})})]})]})]})}function Zj({isActive:r}){return I.jsx("div",{className:"flex-1 flex items-center justify-center bg-[#F2F2F7]",children:I.jsxs(te.div,{initial:{opacity:0,y:12,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.4},className:"bg-white rounded-3xl shadow-lg border border-[#E5E5EA] px-10 py-8 flex flex-col items-center text-center max-w-md",children:[I.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center mb-4",children:I.jsx(d_,{size:28,color:"white"})}),I.jsx("p",{className:"text-xl font-semibold text-[#1C1C1E] mb-2",style:{fontFamily:"Inter"},children:"Learner Profile Updated"}),I.jsx("p",{className:"text-sm text-[#6B7280] max-w-sm",style:{fontFamily:"Inter"},children:"Your recent work and preferences have been saved. Future hints and practice problems will use this updated learner profile."})]})})}const Jj=["Upload Assignment","Problem 1: Odd Proof","Problem 2: Even Product","Session Complete"],t4=["Homework 3","Problem 1  Direct Proof","Problem 2  Contradiction","Session Review"];function e4(){const[r,t]=Z.useState(1),[e,n]=Z.useState("pen"),[i,a]=Z.useState("#1C1C1E"),[c,u]=Z.useState(2),[d,f]=Z.useState(!1),g=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),y=()=>t(S=>Math.min(4,S+1)),w=()=>t(S=>Math.max(1,S-1));return I.jsxs("div",{className:"w-full h-screen bg-[#111118] flex flex-col items-center justify-center overflow-hidden",style:{fontFamily:"Inter, sans-serif"},children:[I.jsxs("div",{className:"relative bg-[#F2F2F7] overflow-hidden flex flex-col",style:{width:"min(100vw, 1180px)",height:"min(100vh, 820px)",borderRadius:"min(2.5vw, 26px)",boxShadow:"0 0 0 2px #2A2A35, 0 0 0 4px #1A1A25, 0 40px 120px rgba(0,0,0,0.8)"},children:[I.jsxs("div",{className:"h-10 bg-white flex items-center justify-between px-6 shrink-0 border-b border-[#E5E5EA] z-20",children:[I.jsx("span",{className:"text-xs font-semibold text-[#1C1C1E]",style:{fontFamily:"Inter",minWidth:50},children:g}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("div",{className:"w-5 h-5 rounded-md bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center",children:I.jsx(Q0,{size:11,color:"white"})}),I.jsx("span",{className:"text-xs font-bold text-[#1C1C1E]",style:{fontFamily:"Inter"},children:"Office Hours"})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(xB,{size:13,className:"text-[#1C1C1E]"}),I.jsx(MB,{size:13,className:"text-[#1C1C1E]"}),I.jsxs("div",{className:"flex items-center gap-0.5",children:[I.jsx("div",{className:"w-6 h-3 rounded-sm border border-[#1C1C1E] relative flex items-center px-0.5",children:I.jsx("div",{className:"h-2 rounded-sm bg-[#34D399]",style:{width:"78%"}})}),I.jsx("div",{className:"w-0.5 h-1.5 rounded-r-sm bg-[#1C1C1E]"})]})]})]}),I.jsx("div",{className:"flex flex-1 overflow-hidden",children:I.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[I.jsx("div",{className:"flex items-center h-14 bg-white border-b border-[#E5E5EA] shrink-0 z-10",children:I.jsx("div",{className:"flex-1 overflow-hidden",children:I.jsx(jB,{currentTool:e,currentColor:i,strokeSize:c,onToolChange:n,onColorChange:a,onStrokeSizeChange:u,onUndo:()=>{},onRedo:()=>{},onClear:()=>{},noteTitle:t4[r-1],activeScene:r,onTranscript:()=>f(!0)})})}),I.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[I.jsx(zB,{isOpen:d,onClose:()=>f(!1),scene:r}),I.jsxs(jc,{mode:"wait",children:[r===1&&I.jsx(te.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},children:I.jsx(zj,{isActive:r===1})},"s1"),r===2&&I.jsx(te.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},children:I.jsx(Gj,{isActive:r===2})},"s2"),r===3&&I.jsx(te.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},children:I.jsx(Qj,{isActive:r===3})},"s3"),r===4&&I.jsx(te.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},children:I.jsx(Zj,{isActive:r===4})},"s4")]})]})]})}),I.jsx("div",{className:"h-7 bg-white border-t border-[#E5E5EA] flex items-center justify-center shrink-0",children:I.jsx("div",{className:"w-24 h-1 bg-[#C7C7CC] rounded-full"})})]}),I.jsxs("div",{className:"mt-5 flex items-center gap-4 z-50",children:[I.jsx("button",{onClick:w,disabled:r===1,className:"w-9 h-9 rounded-full bg-white/10 hover:bg-white/20 border border-white/20 flex items-center justify-center disabled:opacity-30 transition-all",children:I.jsx(XO,{size:16,color:"white"})}),I.jsx("div",{className:"flex items-center gap-2 bg-black/30 backdrop-blur rounded-2xl px-4 py-2.5 border border-white/10",children:Jj.map((S,E)=>{const C=E+1,k=r===C,M=r>C;return I.jsx("button",{onClick:()=>t(C),className:"flex items-center gap-2 transition-all",children:I.jsx(te.div,{animate:{width:k?"auto":8,backgroundColor:M?"#10B981":k?"#6366F1":"#ffffff40"},transition:{duration:.3},className:"h-2 rounded-full overflow-hidden flex items-center",style:{minWidth:8},children:k&&I.jsxs("span",{className:"text-white text-xs px-2 whitespace-nowrap",style:{fontFamily:"Inter",fontSize:11},children:["Scene ",C,": ",S]})})},C)})}),I.jsxs(te.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,disabled:r===4,className:"flex items-center gap-2 bg-[#6366F1] hover:bg-[#5558E3] text-white rounded-2xl px-4 py-2 text-sm font-medium transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-lg shadow-indigo-900/40",style:{fontFamily:"Inter"},children:["Next Scene",I.jsx(UO,{size:15})]})]})]})}HL.createRoot(document.getElementById("root")).render(I.jsx(e4,{}));
